<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>T-SPACE</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://tigutf.github.io/"/>
  <updated>2019-06-27T17:16:12.000Z</updated>
  <id>http://tigutf.github.io/</id>
  
  <author>
    <name>Tigutf</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å…³äºå¾®æœåŠ¡è®¾è®¡çš„é¢è¯•é¢˜</title>
    <link href="http://tigutf.github.io/2019/06/28/%E5%85%B3%E4%BA%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <id>http://tigutf.github.io/2019/06/28/å…³äºå¾®æœåŠ¡è®¾è®¡çš„é¢è¯•é¢˜/</id>
    <published>2019-06-27T17:16:12.000Z</published>
    <updated>2019-06-27T17:16:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©é¢è¯•ï¼Œé¢è¯•å®˜æåˆ°ä¸€ä¸ªé—®é¢˜ï¼šé¡¹ç›®ä¸­æ˜¯å¦é‡åˆ°è¿‡ï¼Œå¤šä¸ªæ¥å£æœåŠ¡ä¸­ï¼Œæˆ‘æœ‰çš„æ•°æ®åº“æ“ä½œå·²ç»æäº¤äº†ï¼Œä½†æœ‰ä¸ªåˆ«æ¥å£å‡ºç°å¼‚å¸¸ï¼Œè¿™æ—¶å€™é’ˆå¯¹æˆ‘å·²æäº¤çš„å†…å®¹è¯¥æ€å¤„ç†ï¼Ÿ</p><p>å¤´è„‘ä¸€çƒ­ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜ï¼ŒæŠ“ç€æ•°æ®åº“äº‹åŠ¡ä¸æ”¾ï¼Œå›ç­”å¾—ä¸å°½äººæ„ï¼›è·³å‡ºæ•°æ®åº“äº‹åŠ¡çš„å±€é™ï¼Œå…¶å®è¿™å°±æ˜¯é›†ç¾¤æœåŠ¡ä¸­ä¸€è‡´æ€§çš„é—®é¢˜â€“I should have been able to answer better ğŸ˜”<br><a id="more"></a></p><p>ä¸€å¿ƒæƒ³ç€æ•°æ®åº“äº‹åŠ¡ï¼Œæ•°æ®çš„æäº¤å’Œå›æ»šï¼Œå·²æäº¤æ›´æ–°çš„æ•°æ®å¦‚ä½•å›æ»šå›æ¥ï¼Œä¸€æ—¶é—´æƒ³åˆ°çš„ä¾¿æ˜¯ä»å¤‡ä»½çš„æ•°æ®åº“ä¸­æ¢å¤å›æ¥ï¼ˆåé¢æƒ³æƒ³ï¼Œæ¢å¤å›æ»šçš„æƒ³æ³•æˆ–è®¸æ²¡é”™ï¼Œä½†æ˜¯ä»å¤‡ä»½åº“æ¢å¤ï¼Œä¸€æ˜¯æ— æ³•ç¡®å®šä»åº“æ˜¯å¦å·²åŒæ­¥å®Œæˆï¼ŒäºŒåˆ™æ˜¯è¦æ¢å¤çš„åˆ‡å…¥ç‚¹éš¾ä»¥ç¡®å®šï¼‰ã€‚</p><p>é¢è¯•å®˜æç¤ºäºŒæ®µæäº¤ï¼ˆçœ‹è¿‡ï¼Œæœ‰ç‚¹å°è±¡ï¼Œå´åœ¨å½“æ—¶å¿˜è®°äº†è¯¥å¦‚ä½•è§£é‡Šï¼Œéƒé—·~ï¼‰</p><blockquote><p>ã€€2PCï¼Œåˆå«åš XA Transactionsï¼›<br>XA æ˜¯ä¸€ä¸ªä¸¤é˜¶æ®µæäº¤åè®®ï¼Œè¯¥åè®®åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªé˜¶æ®µï¼š<br>ç¬¬ä¸€é˜¶æ®µï¼šäº‹åŠ¡åè°ƒå™¨è¦æ±‚æ¯ä¸ªæ¶‰åŠåˆ°äº‹åŠ¡çš„æ•°æ®åº“é¢„æäº¤(precommit)æ­¤æ“ä½œï¼Œå¹¶åæ˜ æ˜¯å¦å¯ä»¥æäº¤.<br>ç¬¬äºŒé˜¶æ®µï¼šäº‹åŠ¡åè°ƒå™¨è¦æ±‚æ¯ä¸ªæ•°æ®åº“æäº¤æ•°æ®ã€‚</p></blockquote><p>æŒ‰ç…§æ­¤äºŒé˜¶æ®µæäº¤åŸç†ï¼Œè‹¥æœ‰ä¸€ä¸ªä¸­é—´çš„åè°ƒå™¨å¹¿æ’­ç›‘æ§å„ä¸ªæœåŠ¡æ¥å£äº‹åŠ¡çš„æäº¤çŠ¶æ€ã€‚åˆ¤æ–­æ‰€æœ‰èŠ‚ç‚¹æ˜¯å¦å·²å¯ä»¥æäº¤ï¼Œä»è€Œä½¿å¾—æ‰€æœ‰äº‹åŠ¡åœ¨çœŸæ­£æäº¤å‰ä¿æŒä¸€è‡´ã€‚</p><p>æ•°æ®å­˜å‚¨åŠŸèƒ½ï¼Œç›®å‰å¤šç§ç»„ä»¶å¯ä»¥å®ç°ï¼ˆç¼“å­˜redisï¼Œæ¶ˆæ¯ä¸­é—´ä»¶ï¼Œzkçš„å¾®æœåŠ¡ä¸­å¸¸ç”¨å·¥å…·ï¼‰ã€‚é€šè¿‡è¿™äº›å·¥å…·ï¼Œè®©æ•°æ®å¾—ä»¥å­˜å‚¨å¤‡ä»½ï¼Œè€Œå…¶ä¸­æŒ‡é’ˆåç§»offsetçš„å­˜åœ¨ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®šä½æ•°æ®äº‹åŠ¡èµ°åˆ°äº†å“ªä¸€æ­¥ä¸­ã€‚</p><p>CAPï¼ˆä¸€è‡´æ€§ã€å¯ç”¨æ€§ã€åˆ†åŒºå®¹é”™æ€§ï¼‰<br>é›†ç¾¤å½“ä¸­ï¼Œåˆ†åŒºå®¹é”™æ€§å¿…ç„¶å­˜åœ¨ï¼Œé‚£åˆ™æ˜¯ä¸€è‡´æ€§å’Œå¯ç”¨æ€§çš„æƒè¡¡å–èˆ</p><p>BASEï¼ˆBasically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰<br>Soft stateï¼ˆè½¯çŠ¶æ€ï¼‰<br>Eventually consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ï¼‰</p><p>åŸºäºä»¥ä¸Šä¸¤ç§è®¾è®¡æ€æƒ³çš„å¯¹æ¯”ï¼Œå¯¹äºé¢‘ç¹è¢«ä½¿ç”¨ï¼Œå¹¶å‘é«˜çš„æœåŠ¡ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé€‰æ‹©APç»„åˆï¼Œæé«˜é«˜å¯ç”¨ï¼Œæ•°æ®ä¸€è‡´æ€§æˆ‘ä»¬åˆ™ä¿è¯å®ƒæœ€ç»ˆçš„ä¸€ä¸ªä¸€è‡´æ€§ã€‚</p><p>ï¼ˆå¾…ç»­ï¼‰</p><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š~<br>åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©é¢è¯•ï¼Œé¢è¯•å®˜æåˆ°ä¸€ä¸ªé—®é¢˜ï¼šé¡¹ç›®ä¸­æ˜¯å¦é‡åˆ°è¿‡ï¼Œå¤šä¸ªæ¥å£æœåŠ¡ä¸­ï¼Œæˆ‘æœ‰çš„æ•°æ®åº“æ“ä½œå·²ç»æäº¤äº†ï¼Œä½†æœ‰ä¸ªåˆ«æ¥å£å‡ºç°å¼‚å¸¸ï¼Œè¿™æ—¶å€™é’ˆå¯¹æˆ‘å·²æäº¤çš„å†…å®¹è¯¥æ€å¤„ç†ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¤´è„‘ä¸€çƒ­ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜ï¼ŒæŠ“ç€æ•°æ®åº“äº‹åŠ¡ä¸æ”¾ï¼Œå›ç­”å¾—ä¸å°½äººæ„ï¼›è·³å‡ºæ•°æ®åº“äº‹åŠ¡çš„å±€é™ï¼Œå…¶å®è¿™å°±æ˜¯é›†ç¾¤æœåŠ¡ä¸­ä¸€è‡´æ€§çš„é—®é¢˜â€“I should have been able to answer better ğŸ˜”&lt;br&gt;
    
    </summary>
    
      <category term="å¾®æœåŠ¡" scheme="http://tigutf.github.io/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/"/>
    
    
      <category term="CAP|" scheme="http://tigutf.github.io/tags/CAP/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€é“å¤šçº¿ç¨‹ç»ƒä¹ é¢˜</title>
    <link href="http://tigutf.github.io/2019/05/17/%E4%B8%80%E9%81%93%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%BB%83%E4%B9%A0%E9%A2%98/"/>
    <id>http://tigutf.github.io/2019/05/17/ä¸€é“å¤šçº¿ç¨‹ç»ƒä¹ é¢˜/</id>
    <published>2019-05-16T16:59:07.000Z</published>
    <updated>2019-05-16T16:59:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰ä¸€ä¸ªè¶…é•¿çš„æ•°ç»„ï¼Œç°è¦å¯¹æ•°ç»„ä¸­æ•°å­—è¿›è¡Œæ±‚å’Œï¼Œè‹¥ä½¿ç”¨å¤šçº¿ç¨‹~<br><a id="more"></a></p><h2 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆå§‹åŒ–ä¸€ä¸ªè¶…é•¿çš„æ•°ç»„20äº¿ï¼ˆé•¿åº¦2çš„32æ¬¡æ–¹æœ€å¤§äº†ï¼‰ï¼Œéšæœºæ’å…¥æ•°å­—</span></span><br><span class="line"><span class="meta">@Before</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">beforeTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    arr = <span class="keyword">new</span> ArrayList(<span class="number">200000000</span>);</span><br><span class="line">    Random random = <span class="keyword">new</span> Random(<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">long</span> i=<span class="number">0</span>; i &lt; <span class="number">200000000</span>; i++)&#123;</span><br><span class="line">        arr.add(random.nextInt(<span class="number">10</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¸€èˆ¬è§£æ³•"><a href="#ä¸€èˆ¬è§£æ³•" class="headerlink" title="ä¸€èˆ¬è§£æ³•"></a>ä¸€èˆ¬è§£æ³•</h3><blockquote><p>ä¸»çº¿ç¨‹é‡Œé¢ç›´æ¥ç´¯åŠ </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mainTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">long</span> result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i &lt; <span class="number">200000000</span>; i++)&#123;</span><br><span class="line">        result += arr.get(i);</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"result == "</span> + result);</span><br><span class="line">    System.out.println(<span class="string">"consume time : "</span> + (System.currentTimeMillis()-startTime));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç»“æœ<br><br> result == 899943289<br><br> consume time : 187 ms</p></blockquote><h3 id="ä½¿ç”¨å¤šçº¿ç¨‹"><a href="#ä½¿ç”¨å¤šçº¿ç¨‹" class="headerlink" title="ä½¿ç”¨å¤šçº¿ç¨‹"></a>ä½¿ç”¨å¤šçº¿ç¨‹</h3><ul><li>æ€è·¯ï¼šå®šä¹‰ä¸€ä¸ªå½“å‰æ•°ç»„çš„ä¸‹æ ‡ï¼Œæ¯æœ‰ä¸€ä¸ªçº¿ç¨‹è·å–åˆ°æ•°ç»„çš„ä¸€ä¸ªå½“å‰ä¸‹æ ‡çš„å€¼ï¼Œä¸‹æ ‡å°±+1ï¼›å¤šä¸ªçº¿ç¨‹ï¼Œå¾ªç¯åŒæ­¥è®¿é—®æ•°ç»„çš„å€¼ï¼Œåœ¨çº¿ç¨‹å†…éƒ¨åšç´¯åŠ ï¼›åˆ©ç”¨CountDownLatchï¼Œä½¿å¾—æ‰€æœ‰çº¿ç¨‹æ‰§è¡Œå®Œåï¼Œåœ¨å¯¹å„ä¸ªçº¿ç¨‹çš„ç®—å‡ºçš„å€¼åšç´¯åŠ ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mutilThreadTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    CountDownLatch countDownLatch = <span class="keyword">new</span> CountDownLatch(<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">long</span> startTime = System.currentTimeMillis();</span><br><span class="line">    <span class="keyword">long</span> result = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;indexs.length;j++)&#123;</span><br><span class="line">        <span class="keyword">new</span> TestThread(countDownLatch,j).start();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        countDownLatch.await();</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        System.out.println(<span class="string">"error == "</span> + e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i &lt; indexs.length; i++)&#123;</span><br><span class="line">        result += indexs[i];</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">"result == "</span> + result);</span><br><span class="line">    System.out.println(<span class="string">"consume time : "</span> + (System.currentTimeMillis()-startTime));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç»“æœ<br><br> result == 899943289<br><br> consume time : 10852 ms</p></blockquote><p>ä»æ‰§è¡Œç»“æœçœ‹å‡ºï¼Œæ²¡ç”¨å¤šçº¿ç¨‹æ‰§è¡Œçš„ä»£ç ï¼Œæ¶ˆè€—æ—¶é—´æ›´çŸ­ï¼›</p><p>å¤šçº¿ç¨‹çš„ä½¿ç”¨ä¸ºçš„æ˜¯æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œä½†æ˜¯é’ˆå¯¹æ­¤é¢˜è¿™æ ·çš„å¤šçº¿ç¨‹æ“ä½œæ€è·¯å´å¹¶æ²¡æœ‰å¸¦æ¥æ›´é«˜çš„æ•ˆç‡ï¼Œåè€Œæ›´æ…¢äº†ã€‚å¤šçº¿ç¨‹ç«äº‰æ•°ç»„ã€çº¿ç¨‹çš„åŒæ­¥ç­‰å¾…ï¼Œéƒ½ä½¿å¾—æ€§èƒ½æ›´ä½äº†ï¼›æ¢ä¸ªæ€è·¯ï¼Œè‹¥å°†é•¿æ•°ç»„è¿›è¡Œé¢„å…ˆåˆ†æ®µï¼Œæ¯ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ªåˆ†æ®µçš„ç´¯åŠ ï¼Œçº¿ç¨‹ä¸åœ¨ç«äº‰è€Œæ˜¯ç›´æ¥æ‰§è¡Œï¼Œæ•ˆç‡ä¼šæ›´å¥½ï¼ˆè¿™éƒ¨åˆ†æ€è·¯çš„ä»£ç æš‚æ—¶ä¸å†™å’¯~ï¼‰</p><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š~<br>åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰ä¸€ä¸ªè¶…é•¿çš„æ•°ç»„ï¼Œç°è¦å¯¹æ•°ç»„ä¸­æ•°å­—è¿›è¡Œæ±‚å’Œï¼Œè‹¥ä½¿ç”¨å¤šçº¿ç¨‹~&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://tigutf.github.io/categories/Java/"/>
    
    
      <category term="å¤šçº¿ç¨‹" scheme="http://tigutf.github.io/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>è®°ä¸€æ¬¡å†…å­˜æ³„æ¼é—®é¢˜</title>
    <link href="http://tigutf.github.io/2019/04/17/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E9%97%AE%E9%A2%98/"/>
    <id>http://tigutf.github.io/2019/04/17/è®°ä¸€æ¬¡å†…å­˜æ³„æ¼é—®é¢˜/</id>
    <published>2019-04-16T16:57:11.000Z</published>
    <updated>2019-04-16T16:57:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>Esl ä¸€ä¸ªFreeSwitchå¤–å‘¼ç³»ç»Ÿè¿æ¥çš„å®¢æˆ·ç«¯ï¼Œç”±äºæ²¡æœ‰äººç»´æŠ¤æ›´æ–°è€Œå¯¼è‡´çš„è¡€æ¡ˆã€‚<br><a id="more"></a></p><p>æœ€è¿‘æ–°æ¥æ‰‹äº†ä¸€ä¸ªè€ç³»ç»Ÿâ€”â€”æ™ºèƒ½å¤–å‘¼ç³»ç»Ÿï¼Œåˆ†äº†ä¸¤ä¸ªåº”ç”¨ï¼Œä¸€ä¸ªå¯¹æ¥çš„æ˜¯è€çš„å¤–å‘¼ç³»ç»ŸIVRï¼ˆåä¸ºçš„ä¸€å¥—ï¼‰ï¼Œä¸€ä¸ªåˆ™æ˜¯é€šè¿‡freeswitchå¤–å‘¼ï¼›ç”±äºIVRè€çš„ä¸€å¥—æ‰€ç”¨è¯­è¨€è¾ƒè€ï¼Œéƒ¨é—¨å†…æ²¡æœ‰äººæ‡‚ï¼Œæ‰€ä»¥æƒ³å¾€FSè¿ç§»ï¼›ä¹‹å‰çš„åŒäº‹é€šè¿‡ESLå®¢æˆ·ç«¯ï¼Œå¯¹æ¥FSæœåŠ¡å™¨ï¼Œç„¶åé€šè¿‡ç›¸å…³æŒ‡ä»¤ä½œå¤–å‘¼ç®¡ç†ï¼Œå®ç°äº†å¤§æ¦‚åŠŸèƒ½ï¼Œç„¶è€Œå­˜åœ¨é—®é¢˜ï¼Œæ›¾åœ¨ç”Ÿäº§ä¸Šè·‘ç€è·‘ç€å†…å­˜æ³„æ¼äº†ğŸ˜“ï¼Œæ²¡è§£å†³ã€‚ã€‚ã€‚æ¥æ‰‹è¿‡æ¥ï¼Œä¹Ÿå°±è½®åˆ°æˆ‘ä»¬æ¥è§£å†³é—®é¢˜äº†ã€‚ã€‚</p><h3 id="é—®é¢˜é‡ç°"><a href="#é—®é¢˜é‡ç°" class="headerlink" title="é—®é¢˜é‡ç°"></a>é—®é¢˜é‡ç°</h3><p>è°ƒä½JVMç›¸å…³å‚æ•°é…ç½®ï¼šå †å†…å­˜å¤§å°å’Œç›´æ¥å†…å­˜å¤§å°ï¼›æ‰‹åŠ¨æ·»åŠ å¤–å‘¼ä»»åŠ¡æ‰§è¡Œã€‚ç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œfailed to allocate 64(bytes) of direct memoryå’Œ OutOfDirectMemoryErroré—®é¢˜ä¾¿å‡ºç°äº†ã€‚</p><h3 id="é—®é¢˜å¯»æ‰¾å®šä½"><a href="#é—®é¢˜å¯»æ‰¾å®šä½" class="headerlink" title="é—®é¢˜å¯»æ‰¾å®šä½"></a>é—®é¢˜å¯»æ‰¾å®šä½</h3><p>é—®é¢˜æ’æŸ¥å‚è€ƒï¼š<a href="https://www.jianshu.com/p/4e96beb37935" target="_blank" rel="noopener">https://www.jianshu.com/p/4e96beb37935</a></p><p>nettyå†…éƒ¨æœ‰å¯¹å †å¤–å†…å­˜è¿›è¡Œè®¡æ•°çš„ä¸€ä¸ªå‚æ•°ï¼šè®¡æ•°å™¨ä¸º DIRECT_MEMORY_COUNTERï¼Œå•ä½B;åœ¨ nettyæ¯æ¬¡åˆ†é…å †å¤–å†…å­˜ä¹‹å‰ï¼Œéƒ½ä¼šè®¡æ•°.</p><p>è·Ÿè¸ªeslä»£ç ï¼Œè§‚å¯Ÿè®¡æ•°å™¨å˜åŒ–ï¼›åœ¨eslä¸­æœ‰<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * Specialised &#123;<span class="doctag">@link</span> SimpleChannelInboundHandler&#125; that implements the logic of an ESL connection that</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * is common to both inbound and outbound clients. This</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * handler expects to receive decoded &#123;<span class="doctag">@link</span> EslMessage&#125; or &#123;<span class="doctag">@link</span> EslEvent&#125; objects.</span></span><br><span class="line"><span class="comment"> ...</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractEslClientHandler</span> <span class="keyword">extends</span> <span class="title">SimpleChannelInboundHandler</span>&lt;<span class="title">EslMessage</span>&gt;</span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>EslMessageä¸ºeslä¸­å¯¹ä¼ è¾“ä¿¡æ¯çš„ä¸€ä¸ªå°è£…ï¼Œä½†å®ƒå¹¶æ²¡æœ‰å®ç°ç»§æ‰¿ReferenceCountedï¼Œnetty 4 ä¹‹åï¼Œå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸç”±å®ƒä»¬çš„å¼•ç”¨è®¡æ•°ï¼ˆreference countsï¼‰ç®¡ç†ï¼Œè€Œä¸æ˜¯ç”±åƒåœ¾æ”¶é›†å™¨ï¼ˆgarbage collectorï¼‰ç®¡ç†ï¼›æ‰€ä»¥å¯¼è‡´æœ€ååˆ†é…çš„å†…å­˜ï¼Œå¯¹è±¡å¼•ç”¨æ˜¯EslMessageï¼Œä½†æ˜¯å› ä¸ºæ²¡æœ‰å®ç°ReferenceCountedï¼Œæ‰€ä»¥æœ€åæ²¡æœ‰é€šè¿‡nettyé‡Šæ”¾å‡ºå†…å­˜ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EslFrameDecoder</span> <span class="keyword">extends</span> <span class="title">ReplayingDecoder</span>&lt;<span class="title">EslFrameDecoder</span>.<span class="title">State</span>&gt; </span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * Line feed character</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">byte</span> LF = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">enum</span> State &#123;</span><br><span class="line"></span><br><span class="line">READ_HEADER,</span><br><span class="line"></span><br><span class="line">READ_BODY,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> maxHeaderSize;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> EslMessage currentMessage;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> treatUnknownHeadersAsBody = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">EslFrameDecoder</span><span class="params">(<span class="keyword">int</span> maxHeaderSize)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">super</span>(State.READ_HEADER);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (maxHeaderSize &lt;= <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(</span><br><span class="line"></span><br><span class="line"><span class="string">"maxHeaderSize must be a positive integer: "</span> +</span><br><span class="line"></span><br><span class="line">maxHeaderSize);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.maxHeaderSize = maxHeaderSize;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">EslFrameDecoder</span><span class="params">(<span class="keyword">int</span> maxHeaderSize, <span class="keyword">boolean</span> treatUnknownHeadersAsBody)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>(maxHeaderSize);</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>.treatUnknownHeadersAsBody = treatUnknownHeadersAsBody;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">decode</span><span class="params">(ChannelHandlerContext ctx, ByteBuf buffer, List&lt;Object&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">State state = state();</span><br><span class="line"></span><br><span class="line">log.trace(<span class="string">"decode() : state [&#123;&#125;]"</span>, state);</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (state) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> READ_HEADER:</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (currentMessage == <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line">currentMessage = <span class="keyword">new</span> EslMessage();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*  read '\n' terminated lines until reach a single '\n'</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> reachedDoubleLF = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (!reachedDoubleLF) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// this will read or fail</span></span><br><span class="line"></span><br><span class="line">String headerLine = readToLineFeedOrFail(buffer, maxHeaderSize);</span><br><span class="line"></span><br><span class="line">log.debug(<span class="string">"read header line [&#123;&#125;]"</span>, headerLine);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!headerLine.isEmpty()) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// split the header line</span></span><br><span class="line"></span><br><span class="line">String[] headerParts = HeaderParser.splitHeader(headerLine);</span><br><span class="line"></span><br><span class="line">Name headerName = Name.fromLiteral(headerParts[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (headerName == <span class="keyword">null</span>) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (treatUnknownHeadersAsBody) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// cache this 'header' as a body line &lt;-- useful for Outbound client mode</span></span><br><span class="line"></span><br><span class="line">currentMessage.addBodyLine(headerLine);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"Unhandled ESL header ["</span> + headerParts[<span class="number">0</span>] + <span class="string">']'</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">currentMessage.addHeader(headerName, headerParts[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">reachedDoubleLF = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// do not read in this line again</span></span><br><span class="line"></span><br><span class="line">checkpoint();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// have read all headers - check for content-length</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (currentMessage.hasContentLength()) &#123;</span><br><span class="line"></span><br><span class="line">checkpoint(State.READ_BODY);</span><br><span class="line"></span><br><span class="line">log.debug(<span class="string">"have content-length, decoding body .."</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  force the next section</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// end of message</span></span><br><span class="line"></span><br><span class="line">checkpoint(State.READ_HEADER);</span><br><span class="line"></span><br><span class="line"><span class="comment">// send message upstream</span></span><br><span class="line"></span><br><span class="line">EslMessage decodedMessage = currentMessage;</span><br><span class="line"></span><br><span class="line">currentMessage = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">out.add(decodedMessage);</span><br><span class="line"></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> READ_BODY:</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*   read the content-length specified</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> contentLength = currentMessage.getContentLength();</span><br><span class="line"></span><br><span class="line">ByteBuf bodyBytes = buffer.readBytes(contentLength);</span><br><span class="line"></span><br><span class="line">log.debug(<span class="string">"read [&#123;&#125;] body bytes"</span>, bodyBytes.writerIndex());</span><br><span class="line"></span><br><span class="line"><span class="comment">// most bodies are line based, so split on LF</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (bodyBytes.isReadable()) &#123;</span><br><span class="line"></span><br><span class="line">String bodyLine = readLine(bodyBytes, contentLength);</span><br><span class="line"></span><br><span class="line">log.debug(<span class="string">"read body line [&#123;&#125;]"</span>, bodyLine);</span><br><span class="line"></span><br><span class="line">currentMessage.addBodyLine(bodyLine);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// end of message</span></span><br><span class="line"></span><br><span class="line">checkpoint(State.READ_HEADER);</span><br><span class="line"></span><br><span class="line"><span class="comment">// send message upstream</span></span><br><span class="line"></span><br><span class="line">EslMessage decodedMessage = currentMessage;</span><br><span class="line"></span><br><span class="line">currentMessage = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">out.add(decodedMessage);</span><br><span class="line"></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> Error(<span class="string">"Illegal state: ["</span> + state + <span class="string">']'</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">readToLineFeedOrFail</span><span class="params">(ByteBuf buffer, <span class="keyword">int</span> maxLineLegth)</span> <span class="keyword">throws</span> TooLongFrameException </span>&#123;</span><br><span class="line"></span><br><span class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder(<span class="number">64</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// this read might fail</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span> nextByte = buffer.readByte();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (nextByte == LF) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> sb.toString();</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Abort decoding if the decoded line is too large.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (sb.length() &gt;= maxLineLegth) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> TooLongFrameException(</span><br><span class="line"></span><br><span class="line"><span class="string">"ESL header line is longer than "</span> + maxLineLegth + <span class="string">" bytes."</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sb.append((<span class="keyword">char</span>) nextByte);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">private</span> String <span class="title">readLine</span><span class="params">(ByteBuf buffer, <span class="keyword">int</span> maxLineLength)</span> <span class="keyword">throws</span> TooLongFrameException </span>&#123;</span><br><span class="line"></span><br><span class="line">StringBuilder sb = <span class="keyword">new</span> StringBuilder(<span class="number">64</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (buffer.isReadable()) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// this read should always succeed</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">byte</span> nextByte = buffer.readByte();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (nextByte == LF) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> sb.toString();</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Abort decoding if the decoded line is too large.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (sb.length() &gt;= maxLineLength) &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> TooLongFrameException(</span><br><span class="line"></span><br><span class="line"><span class="string">"ESL message line is longer than "</span> + maxLineLength + <span class="string">" bytes."</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sb.append((<span class="keyword">char</span>) nextByte);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sb.toString();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š~<br>åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Esl ä¸€ä¸ªFreeSwitchå¤–å‘¼ç³»ç»Ÿè¿æ¥çš„å®¢æˆ·ç«¯ï¼Œç”±äºæ²¡æœ‰äººç»´æŠ¤æ›´æ–°è€Œå¯¼è‡´çš„è¡€æ¡ˆã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Java" scheme="http://tigutf.github.io/categories/Java/"/>
    
    
      <category term="å†…å­˜æ³„æ¼" scheme="http://tigutf.github.io/tags/%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>é¢è¯•æ€»ç»“ä¸€</title>
    <link href="http://tigutf.github.io/2019/04/02/%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93%E4%B8%80/"/>
    <id>http://tigutf.github.io/2019/04/02/é¢è¯•æ€»ç»“ä¸€/</id>
    <published>2019-04-01T16:51:26.000Z</published>
    <updated>2019-04-01T16:51:26.000Z</updated>
    
    <content type="html"><![CDATA[<a id="more"></a><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š~<br>åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      
      
        &lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;!-- end --&gt;
&lt;font color=&quot;blue&quot; face=&quot;æ¥·ä½“&quot;&gt;&lt;br&gt;å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š~&lt;br&gt;åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~&lt;br&gt;&lt;/font&gt;



      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>linuxå¸¸ç”¨å‘½ä»¤</title>
    <link href="http://tigutf.github.io/2019/02/28/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>http://tigutf.github.io/2019/02/28/linuxå¸¸ç”¨å‘½ä»¤/</id>
    <published>2019-02-28T14:07:35.000Z</published>
    <updated>2019-02-28T14:07:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>å·¥ä½œä¸­å¸¸ç”¨å‘½ä»¤æ±‡æ€»</p><a id="more"></a><h2 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h2><ol><li><p>ls  list åˆ—ä¸¾</p><blockquote><p>-a åˆ—å‡ºç›®å½•æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…å«éšè—æ–‡ä»¶ <br><br>-l åˆ—å‡ºæ–‡ä»¶å¹¶åŒ…å«æ–‡ä»¶çš„æƒé™ã€æ‰€æœ‰è€…ã€æ–‡ä»¶å¤§å°ç­‰è¯¦ç»†ä¿¡æ¯ <br><br>ll ç­‰ä»·äº ls -l</p></blockquote></li><li><p>cd change Directoryåˆ‡æ¢ç›®å½•</p><blockquote><p>cd /  rootç›®å½• <br><br>cd ~  homeç›®å½• <br><br>cd .. è¿”å›ä¸Šä¸€å±‚ <br><br>cd -  è¿›å…¥ä¸Šä¸€æ¬¡å·¥ä½œè·¯å¾„ <br></p></blockquote></li><li>pwd æŸ¥çœ‹å½“å‰å·¥ä½œç›®å½•è·¯å¾„</li><li>mkdir åˆ›å»ºæ–‡ä»¶å¤¹<blockquote><p>mkdir -p è·¯å¾„å æ­¤æ—¶è‹¥è·¯å¾„ä¸­çš„æŸäº›ç›®å½•å°šä¸å­˜åœ¨,åŠ ä¸Šæ­¤é€‰é¡¹å,ç³»ç»Ÿå°†è‡ªåŠ¨å»ºç«‹å¥½é‚£äº›å°šä¸åœ¨çš„ç›®å½•,å³ä¸€æ¬¡å¯ä»¥å»ºç«‹å¤šä¸ªç›®å½•;</p></blockquote></li><li><p>rm [é€‰é¡¹] æ–‡ä»¶ åˆ é™¤ä¸€ä¸ªç›®å½•ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æˆ–ç›®å½•ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ -r é€‰é¡¹ï¼Œåˆ™rmä¸ä¼šåˆ é™¤ç›®å½•ã€‚å¦‚æœä½¿ç”¨rmæ¥åˆ é™¤æ–‡ä»¶ï¼Œé€šå¸¸ä»å¯ä»¥å°†è¯¥æ–‡ä»¶æ¢å¤åŸçŠ¶</p><blockquote><p>rm -i *.log åˆ é™¤ä»»ä½•.logæ–‡ä»¶ï¼›åˆ é™¤å‰é€ä¸€è¯¢é—®ç¡®è®¤ï¼› <br><br>rm -rf test åˆ é™¤testå­ç›®å½•åŠå…¶ç›®å½•ä¸­æ‰€æœ‰æ–‡ä»¶,å¹¶ä¸”ä¸ç”¨ä¸€ä¸€ç¡®è®¤ï¼›</p></blockquote></li><li><p>rmdir åˆ é™¤ç›®å½•</p></li><li><p>mv ç§»åŠ¨æ–‡ä»¶æˆ–ä¿®æ”¹æ–‡ä»¶åï¼Œæ ¹æ®ç¬¬äºŒå‚æ•°ç±»å‹å†³å®š</p><blockquote><p>mv test.log test1.txt é‡å‘½åä¸ºtest1.txt  <br><br>mv test1.log test2.log /dir ç§»åŠ¨ä¸¤ä¸ªæ–‡ä»¶åˆ°dirç›®å½•</p></blockquote></li><li><p>cp å¤åˆ¶</p><blockquote><p>-i æç¤ºï¼Œæç¤ºæ˜¯å¦è¦†ç›– <br><br>-r å¤åˆ¶ç›®å½•åŠç›®å½•å†…æ‰€æœ‰é¡¹ç›® <br><br>cp -ai test.txt /test/dist å¤åˆ¶test.txtåˆ°/test/distç›®å½•ä¸‹,ä¿æŒæºæ–‡ä»¶æ—¶é—´</p></blockquote></li><li>cat ï¼šä¸€æ¬¡æ˜¾ç¤ºæ•´ä¸ªæ–‡ä»¶ï¼›ä»é”®ç›˜åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ cat &gt; filenameï¼› å°†å‡ ä¸ªæ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶ã€‚<blockquote><p>cat -n a.log b.log  æŠŠa.logçš„æ–‡ä»¶å†…å®¹åŠ ä¸Šè¡Œå·åè¾“å…¥b.logè¿™ä¸ªæ–‡ä»¶é‡Œ</p></blockquote></li><li>more and less æ˜¾ç¤ºå†…å®¹<blockquote><p>more +3 text.txt æ˜¾ç¤ºæ–‡ä»¶ä¸­ä»ç¬¬3è¡Œèµ·çš„å†…å®¹ <br><br>ls -l | more -5 æ‰€åˆ—å‡ºæ–‡ä»¶ç›®å½•è¯¦ç»†ä¿¡æ¯ï¼Œå€ŸåŠ©ç®¡é“ä½¿æ¯æ¬¡æ˜¾ç¤º5è¡Œ,æŒ‰ç©ºæ ¼é”®æ˜¾ç¤ºä¸‹5è¡Œ <br><br>ps -aux | less -N psæŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯å¹¶é€šè¿‡lessåˆ†é¡µæ˜¾ç¤º,æ˜¾ç¤ºè¡Œæ•°</p></blockquote></li><li><p>tail æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æœ«å°¾å†…å®¹ï¼Œå¸¸ç”¨æŸ¥çœ‹æ—¥å¿—</p><blockquote><p> tail -100 -f -n test.log ä»ååˆ°å‰è¯»å–100è¡Œï¼Œä¸”å¾ªç¯è¯»å–ï¼Œæ˜¾ç¤ºè¡Œæ•°</p></blockquote></li><li><p>whereis æŸ¥çœ‹æ–‡ä»¶ä½ç½®ï¼Œç”¨äºç¨‹åºåçš„æœç´¢</p></li><li><p>locate é€šè¿‡æœå¯»ç³»ç»Ÿå†…å»ºæ–‡æ¡£æ•°æ®åº“è¾¾åˆ°å¿«é€Ÿæ‰¾åˆ°æ¡£æ¡ˆ</p><blockquote><p>-r ä½¿ç”¨æ­£åˆ™è¿ç®—å¼åšä¸ºå¯»æ‰¾æ¡ä»¶ <br><br>locate /etc/sh æœç´¢etcç›®å½•ä¸‹æ‰€æœ‰ä»¥shå¼€å¤´çš„æ–‡ä»¶</p></blockquote></li><li><p>find ç”¨äºåœ¨æ–‡ä»¶æ ‘ä¸­æŸ¥æ‰¾æ–‡ä»¶</p></li><li>chmod ä¿®æ”¹æƒé™<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">æƒé™ä»£å·ï¼š</span><br><span class="line">         r ï¼šè¯»æƒé™ï¼Œç”¨æ•°å­—4è¡¨ç¤º</span><br><span class="line">         w ï¼šå†™æƒé™ï¼Œç”¨æ•°å­—2è¡¨ç¤º</span><br><span class="line">         x ï¼šæ‰§è¡Œæƒé™ï¼Œç”¨æ•°å­—1è¡¨ç¤º</span><br><span class="line">         - ï¼šåˆ é™¤æƒé™ï¼Œç”¨æ•°å­—0è¡¨ç¤º</span><br><span class="line">         s ï¼šç‰¹æ®Šæƒé™</span><br><span class="line">æƒé™èŒƒå›´ï¼š</span><br><span class="line">        u ï¼šç›®å½•æˆ–è€…æ–‡ä»¶çš„å½“å‰çš„ç”¨æˆ·</span><br><span class="line">        g ï¼šç›®å½•æˆ–è€…æ–‡ä»¶çš„å½“å‰çš„ç¾¤ç»„</span><br><span class="line">        o ï¼šé™¤äº†ç›®å½•æˆ–è€…æ–‡ä»¶çš„å½“å‰ç”¨æˆ·æˆ–ç¾¤ç»„ä¹‹å¤–çš„ç”¨æˆ·æˆ–è€…ç¾¤ç»„</span><br><span class="line">        a ï¼šæ‰€æœ‰çš„ç”¨æˆ·åŠç¾¤ç»„</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>-rw-râ€“râ€“ 10ä¸ªä½ç½®ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºæ–‡ä»¶ç±»å‹ï¼Œ-è¡¨ç¤ºéç›®å½•ï¼Œdè¡¨ç¤ºç›®å½•ï¼›ä»ç¬¬äºŒä¸ªå­—ç¬¦å¼€å§‹åˆ°ç¬¬åä¸ªå…±9ä¸ªå­—ç¬¦ï¼Œ3ä¸ªå­—ç¬¦ä¸€ç»„ï¼Œåˆ†åˆ«è¡¨ç¤ºäº†3ç»„ç”¨æˆ·å¯¹æ–‡ä»¶æˆ–è€…ç›®å½•çš„æƒé™ã€‚æƒé™å­—ç¬¦ç”¨æ¨ªçº¿ä»£è¡¨ç©ºè®¸å¯ï¼Œrä»£è¡¨åªè¯»ï¼Œwä»£è¡¨å†™ï¼Œxä»£è¡¨å¯æ‰§è¡Œã€‚ <br><br>-c å½“å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒæŠ¥å‘Šå¤„ç†ä¿¡æ¯ <br><br>  -R å¤„ç†æŒ‡å®šç›®å½•ä»¥åŠå…¶å­ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶<br>  chmod a+x t.log å¢åŠ æ–‡ä»¶t.logæ‰€æœ‰ç”¨æˆ·å¯æ‰§è¡Œæƒé™ <br><br>  chmod 751 t.log -c ç»™fileçš„å±ä¸»åˆ†é…è¯»ã€å†™ã€æ‰§è¡Œ(7)çš„æƒé™ï¼Œç»™fileçš„æ‰€åœ¨ç»„åˆ†é…è¯»ã€æ‰§è¡Œ(5)çš„æƒé™ï¼Œç»™å…¶ä»–ç”¨æˆ·åˆ†é…æ‰§è¡Œ(1)çš„æƒé™</p></blockquote><ol><li><p>chown å°†æŒ‡å®šæ–‡ä»¶çš„æ‹¥æœ‰è€…æ”¹ä¸ºæŒ‡å®šçš„ç”¨æˆ·æˆ–ç»„</p><blockquote><p>chown -c mail:mail test.log æ”¹å˜æ‹¥æœ‰è€…å’Œç¾¤ç»„,å¹¶æ˜¾ç¤ºæ”¹å˜ä¿¡æ¯</p></blockquote></li><li><p>grep æ–‡æœ¬æœç´¢å‘½ä»¤</p><blockquote><p>grep -aR -100 â€œabcâ€ test.log é€’å½’å¾ªç¯æŸ¥æ‰¾æ–‡ä»¶ä¸­åŒ…å«å…³é”®å­—çš„å†…å®¹ï¼Œæ˜¾ç¤ºåŒ¹é…å­—ç¬¦åçš„100è¡Œ</p></blockquote></li><li><p>ps æŸ¥çœ‹å½“å‰è¿è¡Œçš„è¿›ç¨‹çŠ¶æ€</p><blockquote><p>ps -ef æ˜¾ç¤ºå½“å‰æ‰€æœ‰è¿›ç¨‹ç¯å¢ƒå˜é‡åŠè¿›ç¨‹é—´å…³ç³»</p></blockquote></li><li><p>kill æ€æ­»è¿›ç¨‹</p></li><li>free æ˜¾ç¤ºç³»ç»Ÿå†…å­˜ä½¿ç”¨æƒ…å†µ</li><li>curl é“¾æ¥è°ƒç”¨ï¼Œhttpå‘½ä»¤è¡Œå·¥å…·<blockquote><p>curl -o linux.html <a href="http://www.linux.com" target="_blank" rel="noopener">http://www.linux.com</a> ä¿å­˜ç½‘é¡µ <br><br>curl -O <a href="http://www.baidu.com/page/2/" target="_blank" rel="noopener">http://www.baidu.com/page/2/</a> -O <a href="http://www.baidu.com/page/3/" target="_blank" rel="noopener">http://www.baidu.com/page/3/</a> ä¿å­˜é“¾æ¥ç½‘é¡µçš„æ–‡ä»¶ <br><br>curl -H è‡ªå®šä¹‰ header -A è‡ªå®šä¹‰User-Agentç”¨æˆ·ä»£ç† ä½¿ç”¨ -d å‘é€ POST è¯·æ±‚ã€‚</p></blockquote></li></ol><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š~<br>åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å·¥ä½œä¸­å¸¸ç”¨å‘½ä»¤æ±‡æ€»&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://tigutf.github.io/categories/linux/"/>
    
    
      <category term="linux" scheme="http://tigutf.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>æ–°å¹´2019ç¯‡</title>
    <link href="http://tigutf.github.io/2019/02/05/%E6%96%B0%E5%B9%B42019%E7%AF%87/"/>
    <id>http://tigutf.github.io/2019/02/05/æ–°å¹´2019ç¯‡/</id>
    <published>2019-02-05T09:12:41.000Z</published>
    <updated>2019-02-05T09:12:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¹´å‘³ä¼¼ä¹è¶Šæ¥è¶Šæ·¡ï¼Œä½†æ—¶é—´çš„è·¯ä¸Šå´è¶Šæ¥è¶Šå¤šæ»‹å‘³ã€‚<br><a id="more"></a></p><ul><li><p>2019 æ–°çš„ä¸€å¹´ï¼Œè€äº†ä¸€å²ï¼›</p></li><li><p>çŸ³åº§å‰ï¼Œé—¨æ å¤–ï¼ŒæŸ´ç«æ½‡æ½‡å´”æ±—ï¼›</p></li><li><p>å±‹æªåï¼Œçª—å¸˜å†…ï¼ŒèŒ¶æ°´å™œå™œè§£é†‰ã€‚</p></li></ul><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š~<br>åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¹´å‘³ä¼¼ä¹è¶Šæ¥è¶Šæ·¡ï¼Œä½†æ—¶é—´çš„è·¯ä¸Šå´è¶Šæ¥è¶Šå¤šæ»‹å‘³ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="æ•£è°ˆ" scheme="http://tigutf.github.io/categories/%E6%95%A3%E8%B0%88/"/>
    
    
  </entry>
  
  <entry>
    <title>Git å¸¸ç”¨å‘½ä»¤</title>
    <link href="http://tigutf.github.io/2019/01/20/Git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>http://tigutf.github.io/2019/01/20/Gitå¸¸ç”¨å‘½ä»¤/</id>
    <published>2019-01-20T15:35:19.000Z</published>
    <updated>2019-01-21T15:45:45.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"><a href="#Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ" class="headerlink" title="Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ"></a>Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</h2><p>å…¶ç‰ˆæœ¬ç®¡ç†çš„æ€æƒ³ï¼Œç±»æ¯”æ ‘æï¼Œæœ‰æ ‘å¹²ï¼Œæ ‘å¹²å¯ä»¥è¡ç”Ÿå‡ºå¤šä¸ªæå¹²ï¼Œæ¯ä¸ªæå¹²å¯ä»¥æ˜¯ä¸åŒçš„ç‰ˆæœ¬ä¸»é¢˜ï¼Œè€Œæå¹²å†…å®¹ä¹Ÿå¯ä»¥æ±‡æµåˆ°ä¸»æ ‘å¹²ä¸­ã€‚<br><a id="more"></a></p><h2 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h2><p>é¡¹ç›®å·¥ä½œä¸­å¸¸ç”¨å‘½ä»¤</p><h3 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h3><ul><li>åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ä¸ºgité¡¹ç›®ï¼Œåœ¨æ‰§è¡Œå‘½ä»¤çš„ç›®å½•ä¸‹ä¼šç”Ÿæˆ.gitéšè—çš„é…ç½®ç®¡ç†æ–‡ä»¶å¤¹</li></ul><h3 id="git-config-â€“global-user-name-â€œusernameâ€"><a href="#git-config-â€“global-user-name-â€œusernameâ€" class="headerlink" title="git config â€“global user.name â€œusernameâ€"></a>git config â€“global user.name â€œusernameâ€</h3><ul><li>è®¾ç½®ç”¨æˆ·å</li></ul><h3 id="git-config-â€“global-user-email-â€œuseremailâ€"><a href="#git-config-â€“global-user-email-â€œuseremailâ€" class="headerlink" title="git config â€“global user.email â€œuseremailâ€"></a>git config â€“global user.email â€œuseremailâ€</h3><ul><li>è®¾ç½®é‚®ç®±åœ°å€(å»ºè®®ç”¨æ³¨å†Œgiuhubçš„é‚®ç®±)</li></ul><h3 id="git-clone-url"><a href="#git-clone-url" class="headerlink" title="git clone url"></a>git clone url</h3><ul><li>å°†å·²çŸ¥é¡¹ç›®ä»“åº“å…‹éš†åˆ°æœ¬åœ°</li></ul><h3 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h3><ul><li>æŸ¥çœ‹å½“å‰é¡¹ç›®åˆ†æ”¯çš„çŠ¶æ€ï¼ˆæœ‰æ²¡æœ‰ä¿®æ”¹æ–°å¢çš„æ–‡ä»¶å†…å®¹ï¼‰</li></ul><h3 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h3><ul><li>æ˜¾ç¤ºåˆ†æ”¯åˆ—è¡¨ï¼ŒåŒæ—¶ç¡®è®¤å½“å‰æ‰€åœ¨çš„åˆ†æ”¯</li></ul><h3 id="git-check"><a href="#git-check" class="headerlink" title="git check"></a>git check</h3><ul><li><p>åé¢è·Ÿåˆ†æ”¯åï¼Œåˆ™æ˜¯åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯</p></li><li><p>åé¢è·Ÿ -b åˆ†æ”¯åxxx ï¼Œåˆ›å»ºåä¸ºxxxçš„åˆ†æ”¯ï¼Œå¹¶ä¸”åˆ‡æ¢åˆ°xxxåˆ†æ”¯</p></li><li><p>åé¢è·Ÿ â€“ [file] è¿˜åŸå¯¹filenameçš„æ–‡ä»¶çš„ä¿®æ”¹</p></li></ul><h3 id="git-add-filename"><a href="#git-add-filename" class="headerlink" title="git add [filename]"></a>git add [filename]</h3><ul><li>æ·»åŠ ä¿®æ”¹æˆ–æ–°å¢çš„æ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œä¸ºæäº¤åšå‡†å¤‡</li><li>åé¢è·Ÿ . è¡¨ç¤ºæ·»åŠ å…¨éƒ¨æ–‡ä»¶</li></ul><h3 id="git-commit-m-â€œå¤‡æ³¨â€"><a href="#git-commit-m-â€œå¤‡æ³¨â€" class="headerlink" title="git commit -m â€œå¤‡æ³¨â€"></a>git commit -m â€œå¤‡æ³¨â€</h3><ul><li>æäº¤æš‚å­˜åŒºçš„å†…å®¹åˆ°å½“å‰åˆ†æ”¯</li></ul><h3 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h3><ul><li>æŸ¥çœ‹æäº¤æ—¥å¿—</li></ul><h3 id="git-reflog"><a href="#git-reflog" class="headerlink" title="git reflog"></a>git reflog</h3><ul><li>æŸ¥çœ‹ä»“åº“çš„æ“ä½œæ—¥å¿—</li></ul><h3 id="git-reset-â€“hrad-commitId"><a href="#git-reset-â€“hrad-commitId" class="headerlink" title="git reset â€“hrad commitId"></a>git reset â€“hrad commitId</h3><ul><li>å›æº¯åˆ°æŒ‡å®šç‰ˆæœ¬çŠ¶æ€ï¼Œæ¯æ¬¡commitä¹‹åéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„æäº¤IDä½œä¸ºä¸€ä¸ªè®°å·ï¼Œåˆ¶å®šæŸä¸ªè®°å·ï¼Œå³å¯å›æ»šåˆ°é‚£ä¸ªè®°å·å¯¹åº”çš„çŠ¶æ€ã€‚</li></ul><h3 id="git-fetch"><a href="#git-fetch" class="headerlink" title="git fetch"></a>git fetch</h3><ul><li>æŠ“å–åŒæ­¥è¿œç¨‹åˆ†æ”¯çš„åˆ†æ”¯ä¿¡æ¯</li></ul><h3 id="git-pull-origin-xxx"><a href="#git-pull-origin-xxx" class="headerlink" title="git pull origin xxx"></a>git pull origin xxx</h3><ul><li>æ‹‰å»è¿œç¨‹åˆ†æ”¯xxxçš„å†…å®¹åˆ°å½“å‰åˆ†æ”¯</li></ul><h3 id="git-push-origin-åˆ†æ”¯åxxx"><a href="#git-push-origin-åˆ†æ”¯åxxx" class="headerlink" title="git push origin åˆ†æ”¯åxxx"></a>git push origin åˆ†æ”¯åxxx</h3><ul><li>æ¨é€å½“å‰åˆ†æ”¯å†…å®¹çŠ¶æ€åˆ°è¿œç¨‹åˆ†æ”¯xxx</li></ul><h3 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h3><ul><li>ä¿å­˜å½“å‰åˆ†æ”¯çš„ä¿®æ”¹å†…å®¹åˆ°å·¥ä½œåŒº,ä¸€ä¸ªæ ˆå†…</li><li>åé¢è·Ÿ pop ï¼Œå°†å·¥ä½œåŒºæœ€ä¸Šå±‚çš„ä¿å­˜çš„çŠ¶æ€ï¼ˆä¿®æ”¹å†…å®¹ï¼‰åŒæ­¥åˆ°å½“å‰åˆ†æ”¯</li><li>åé¢è·Ÿ list ï¼Œå°†ä¿å­˜çš„æ ˆå†…å®¹ç½—åˆ—å‡ºæ¥</li><li>åé¢è·Ÿ apply [commitId] æ¢å¤æŒ‡å®šidè®°å½•çš„çŠ¶æ€</li><li>åé¢è·Ÿ drop [commitId] åˆ é™¤æŒ‡å®šidçš„çŠ¶æ€è®°å½•</li></ul><h3 id="git-cherry-pick-options-commitId"><a href="#git-cherry-pick-options-commitId" class="headerlink" title="git cherry-pick [options] [commitId]"></a>git cherry-pick [options] [commitId]</h3><ul><li><p>git cherry-pick commitid æŠŠaåˆ†æ”¯æäº¤çš„ä¸€ä¸ªcommitIdå†…å®¹ï¼Œæäº¤åˆ°båˆ†æ”¯ï¼›</p></li><li><p>å¸¸ç”¨options:<br>  â€“quit                é€€å‡ºå½“å‰çš„chery-pickåºåˆ—;<br>  â€“continue            ç»§ç»­å½“å‰çš„chery-pickåºåˆ—;<br>  â€“abort               å–æ¶ˆå½“å‰çš„chery-pickåºåˆ—ï¼Œæ¢å¤å½“å‰åˆ†æ”¯;<br>  -n, â€“no-commit       ä¸è‡ªåŠ¨æäº¤;<br>  -e, â€“edit            ç¼–è¾‘æäº¤ä¿¡æ¯;</p></li></ul><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ&quot;&gt;&lt;a href=&quot;#Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ&quot; class=&quot;headerlink&quot; title=&quot;Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ&quot;&gt;&lt;/a&gt;Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ&lt;/h2&gt;&lt;p&gt;å…¶ç‰ˆæœ¬ç®¡ç†çš„æ€æƒ³ï¼Œç±»æ¯”æ ‘æï¼Œæœ‰æ ‘å¹²ï¼Œæ ‘å¹²å¯ä»¥è¡ç”Ÿå‡ºå¤šä¸ªæå¹²ï¼Œæ¯ä¸ªæå¹²å¯ä»¥æ˜¯ä¸åŒçš„ç‰ˆæœ¬ä¸»é¢˜ï¼Œè€Œæå¹²å†…å®¹ä¹Ÿå¯ä»¥æ±‡æµåˆ°ä¸»æ ‘å¹²ä¸­ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="Github" scheme="http://tigutf.github.io/categories/Github/"/>
    
    
      <category term="git" scheme="http://tigutf.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>å…³é”®å¯¹è¯</title>
    <link href="http://tigutf.github.io/2019/01/20/%E5%85%B3%E9%94%AE%E5%AF%B9%E8%AF%9D/"/>
    <id>http://tigutf.github.io/2019/01/20/å…³é”®å¯¹è¯/</id>
    <published>2019-01-20T15:35:19.000Z</published>
    <updated>2019-01-20T15:35:19.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å…³é”®å¯¹è¯"><a href="#å…³é”®å¯¹è¯" class="headerlink" title="å…³é”®å¯¹è¯"></a>å…³é”®å¯¹è¯</h2><p>ç”Ÿæ´»å·¥ä½œï¼Œäººä¸äººçš„å…³ç³»å°±å»ºç«‹åœ¨ä¸€æ¬¡æ¬¡çš„æ²Ÿé€šå¯¹è¯ä¸­ã€‚<br>å½“å¯¹è¯çš„ä½ ä»¬åŒæ–¹è§‚ç‚¹å­˜åœ¨å¾ˆå¤§çš„å·®è·ï¼›å½“å¯¹è¯å­˜åœ¨å¾ˆå¤§çš„é£é™©ï¼Œå¯¹ä½ å¯èƒ½äº§ç”Ÿè«å¤§å½±å“ï¼›å½“å¯¹è¯çš„åŒæ–¹æƒ…ç»ªæ¿€çƒˆï¼›è¿™éƒ½æ˜¯å…³é”®çš„å¯¹è¯ã€‚<br><a id="more"></a></p><h3 id="é¢å¯¹å…³é”®å¯¹è¯çš„æ€åº¦"><a href="#é¢å¯¹å…³é”®å¯¹è¯çš„æ€åº¦" class="headerlink" title="é¢å¯¹å…³é”®å¯¹è¯çš„æ€åº¦"></a>é¢å¯¹å…³é”®å¯¹è¯çš„æ€åº¦</h3><blockquote><p>å¸¸è§çš„å…³é”®å¯¹è¯ï¼šç»“æŸä¸€æ®µæ„Ÿæƒ…ï¼›å’Œæ€»æ˜¯å†’çŠ¯ä½ çš„åŒäº‹äº¤è°ˆï¼›è®©æœ‹å‹è¿˜é’±ï¼›æŒ‡å‡ºè€æ¿ä¸€äº›ä¸å¯¹çš„åœ°æ–¹ï¼›å‘è¨€è¡Œä¸ä¸€çš„è€æ¿æå»ºè®®ï¼›æ‰¹è¯„åŒäº‹çš„å·¥ä½œè¡¨ç°ï¼›åº”å¯¹å¤„äºé’æ˜¥æœŸçš„å›é€†å„¿å¥³ï¼›æ¢è®¨å…³äºå‡ºè½¨çš„é—®é¢˜ï¼›åº”å¯¹é…å¶ä¸¥é‡çš„å®¶åº­æš´åŠ›é—®é¢˜ï¼›å’Œå–œæ¬¢æ‰“å¬å°é“æ¶ˆæ¯çš„åŒäº‹äº¤è°ˆï¼›è¦æ±‚å‡èŒåŠ è–ªâ€¦</p></blockquote><p>åç„¡ä¸¤æ—¶ï¼Œæˆ‘ä»¬å°±é¢å¯¹ç€å…³é”®çš„å¯¹è¯ï¼Œé€ƒé¿oræƒ…ç»ªåŒ–çš„åº”å¯¹ï¼Œéƒ½ä¸ç¬¦åˆæˆ‘ä»¬æœ€åˆçš„è®¾æƒ³ï¼Œé‚£å°±å¦è¯šçš„é¢å¯¹å§ã€‚</p><ul><li><strong>100%çš„å¦è¯šï¼ŒåŒæ—¶100%çš„å°Šé‡å¯¹æ–¹</strong></li></ul><p>ä»è‡ªå·±åšèµ·ã€‚å¿§è™‘ä¸è‹¦æ¼ï¼Œå¾€å¾€æ— åŠ©äºäº‹æƒ…å‘å±•ï¼Œä¿æŒè‡ªå·±å¿ƒæƒ…çš„ç§¯æï¼Œæ›´èƒ½è®©è‡ªå·±å……æ²›ç²¾åŠ›å»è§£å†³é—®é¢˜ã€‚æƒ…ç»ªæ˜¯æ§åˆ¶åœ¨è‡ªå·±æ‰‹é‡Œçš„ï¼Œæ²¡æœ‰äººèƒ½å¤Ÿä¼¤å®³ä½ ï¼Œé™¤éä½ è‡ªå·±å…è®¸ï¼Œè§£å†³é—®é¢˜çš„æ–¹æ³•ä»ä¸æ˜¯ä¼¤å®³æˆ–è€…è¢«ä¼¤å®³ã€‚</p><p>æˆ˜èƒœå¯¹æ–¹ã€æƒ©ç½šå¯¹æ–¹ã€ä¿æŒä¸€å›¢å’Œæ°”ï¼Œè¿™ä¸‰ç§æƒ³æ³•éƒ½æ˜¯é˜»æ­¢ä½ è¾¾æˆåŒèµ¢æ²Ÿé€šçš„éšœç¢ã€‚</p><ul><li><strong>å…³æ³¨ä½ çš„çœŸå®ç›®çš„</strong></li></ul><p>1.å­¦ä¼šåœ¨å¯¹è¯å‰å’Œå¯¹è¯ä¸­é—®è‡ªå·±é—®é¢˜</p><blockquote><p>æˆ‘å¸Œæœ›ä¸ºè‡ªå·±å®ç°ä»€ä¹ˆç›®æ ‡;<br>æˆ‘å¸Œæœ›ä¸ºå¯¹æ–¹å®ç°ä»€ä¹ˆç›®æ ‡;<br>æˆ‘å¸Œæœ›ä¸ºæˆ‘ä»¬ä¹‹é—´çš„å…³ç³»å®ç°ä»€ä¹ˆç›®æ ‡;<br>è¦å®ç°è¿™äº›ç›®æ ‡æˆ‘è¯¥æ€ä¹ˆåš;</p></blockquote><p>2.ä¸ºä»€ä¹ˆè¦é—®è‡ªå·±é—®é¢˜</p><blockquote><p>â‘ ä¸ºå¯¹è¯å¯»æ‰¾æ„ä¹‰ã€‚<br>åœ¨è°ˆè¯ä¸­å¤±æ§çš„äººï¼Œéƒ½æ˜¯å› ä¸ºå·²ç»å¿˜è®°äº†è°ˆè¯çš„åˆè¡·ã€‚æƒ³æƒ³çœ‹ï¼Œä¸€ä¸ªä¸ºäº†æŒ½æ•‘å­©å­çš„çˆ¶äº²ï¼Œçªç„¶å‘é£™ï¼Œè¯´éšä½ çš„ä¾¿å§ï¼è¿™æ—¶å€™ä»–å·²ç»å¿˜è®°äº†è°ˆè¯çš„ç›®æ ‡ï¼Œæˆä¸ºäº†è‡ªå·±æƒ…ç»ªçš„å¥´éš¶ã€‚åªè¦è®°å¾—è°ˆè¯çš„ç›®æ ‡ï¼Œä½ çš„æƒ…ç»ªå°±ä¸å®¹æ˜“å¤±æ§ã€‚</p><p>â‘¡æ§åˆ¶å¥½è‡ªå·±çš„èº«ä½“ã€‚<br>åšè‡ªå·±çš„è§‚å¯Ÿè€…ï¼Œä½ çš„èº«ä½“å’Œæ€æƒ³æ‰ä¼šå—æ§ã€‚åœ¨ç´§å¼ çš„æ—¶å€™ï¼Œè§‚å¯Ÿè‡ªå·±ï¼Œå’Œè‡ªå·±å¯¹è¯ï¼Œèƒ½å¤Ÿè®©è‡ªå·±å¾ˆå¿«æ”¾æ¾ä¸‹æ¥ã€‚</p></blockquote><h3 id="å…³é”®å¯¹è¯æ€ç»´æŠ€å·§"><a href="#å…³é”®å¯¹è¯æ€ç»´æŠ€å·§" class="headerlink" title="å…³é”®å¯¹è¯æ€ç»´æŠ€å·§"></a>å…³é”®å¯¹è¯æ€ç»´æŠ€å·§</h3><ol><li><p>å­¦ä¼šå¯¹æ¯”è¯´æ˜ï¼š</p><blockquote><p>-é˜æ˜è‡ªå·±çš„ç›®çš„ -ä¸æƒ³çœ‹åˆ°çš„ç»“æœ -æœ‰æ²¡æœ‰ä¸¤å…¨å…¶ç¾çš„æ–¹æ³•</p></blockquote></li><li><p>å­¦ä¼šæ³¨æ„è§‚å¯Ÿå¯¹è¯æ°›å›´</p><blockquote><p>å­¦ä¼šåŒæ ¸è§‚å¯Ÿï¼ˆæ³¨æ„å¯¹è¯å†…å®¹ï¼ŒåŒæ—¶æ³¨æ„å¯¹è¯æ°›å›´ï¼‰ã€‚å¾ˆå¤šå¯¹è¯çš„å¤±è´¥ï¼Œå°±æ˜¯å› ä¸ºæ²¡æœ‰å…³æ³¨æ°›å›´ã€‚å½“ä½ å‘ç°å¯¹æ–¹æƒ…ç»ªä¸å¯¹æˆ–è€…æ°”æ°›å‡ºç°ä¸åˆ©äºå¯¹è¯çš„å˜åŒ–æ—¶ï¼Œè¦åœæ­¢å†…å®¹æ–¹é¢çš„æ²Ÿé€šï¼Œè½¬è€Œä¿®å¤æ°›å›´ã€‚å¯ä»¥ç”¨æˆ‘ä»¬å‰é¢è®²åˆ°çš„å¯¹æ¯”è¯´æ˜çš„æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥ç›´æ¥è¡¨ç¤ºä½ ç†è§£å¯¹æ–¹çš„æƒ…ç»ªã€‚ç”šè‡³è¦æ±‚æŠŠå¯¹è¯åœä¸€åœï¼ŒåŒæ–¹å†·é™ä¸€ç‚¹å†ç»§ç»­è°ˆã€‚</p></blockquote></li><li><p>å°Šé‡ï¼Œä¿æŒå¯¹è¯å®‰å…¨</p><blockquote><p>å¼ºè°ƒå…±åŒç›®çš„ï¼Œä¿æŒå°Šé‡ã€‚å°Šé‡å°±åƒç©ºæ°”ã€‚å®ƒå­˜åœ¨çš„æ—¶å€™ï¼Œä½ æ„Ÿè§‰ä¸åˆ°å®ƒï¼›ä½†ä¸€æ—¦å®ƒä¸å­˜åœ¨äº†ï¼Œä½ å°±ç«‹åˆ»ä¼šæ„Ÿå—åˆ°çª’æ¯ã€‚å°Šé‡æœ‰æ—¶ä¸æ˜¯è¯­è¨€çš„é—®é¢˜ã€‚ä½ çš„å¿ƒé‡Œä¸å°Šé‡ä¸€ä¸ªäººï¼Œä½ ä¼šé€šè¿‡ä½ çš„è‚¢ä½“è¯­è¨€å’Œçœ¼ç¥è¡¨è¾¾å‡ºæ¥ã€‚ç”šè‡³ä½ ä¸‹æ„è¯†çš„åŠ¨ä½œéƒ½ä¼šè¢«å¯¹æ–¹æ„Ÿè§‰ã€‚å½“æ°›å›´ä¸å¯¹æ—¶ï¼Œæ‡‚å¾—é“æ­‰ï¼Œå¯¹æ¯”è¯´æ˜ä¿®å¤ä¸»é¢˜ã€‚</p></blockquote></li><li><p>æ§åˆ¶å¥½è‡ªå·±çš„æƒ…ç»ª</p><blockquote><p>ç•™æ„ä¸‰ç§å¸¸è§çš„å°èªæ˜:<br>å—å®³è€…æƒ³æ³•ï¼šè¿™å¯ä¸æ˜¯æˆ‘çš„é”™;<br>å¤§åæ´¾æƒ³æ³•ï¼šè¿™éƒ½æ˜¯ä½ é€ æˆçš„;<br>æ— åŠ©è€…æƒ³æ³•ï¼šè¿™äº‹æˆ‘ä¹Ÿæ²¡åŠæ³•ã€‚</p></blockquote></li></ol><h3 id="å…³é”®å¯¹è¯æ­¥éª¤"><a href="#å…³é”®å¯¹è¯æ­¥éª¤" class="headerlink" title="å…³é”®å¯¹è¯æ­¥éª¤"></a>å…³é”®å¯¹è¯æ­¥éª¤</h3><ol><li><p>åˆ†äº«äº‹å®ç»è¿‡</p><p>äº‹å®æ˜¯æœ€ä¸ä¼šå¼•èµ·äº‰è®®ï¼Œæœ€å…·è¯´æœåŠ›ï¼Œæœ€ä¸ä¼šä»¤äººåæ„Ÿçš„å†…å®¹ï¼Œæˆ‘ä»¬è¦å­¦ä¼šä»äº‹å®å‡ºå‘ã€‚</p></li><li><p>è¯´å‡ºä½ çš„æƒ³æ³•</p><p>a.ä¸è¦å †ç§¯é—®é¢˜ï¼Œè‡ªä¿¡åœ°è¯´å‡ºä½ çš„æƒ³æ³•<br>b.æ³¨æ„æ°”æ°›å®‰å…¨</p></li><li>å¾è¯¢å¯¹æ–¹è§‚ç‚¹ï¼Œæ³¨æ„å€¾å¬ï¼Œä¸ºå½¼æ­¤å¯»æ‰¾å…±åŒç‚¹</li></ol><blockquote><p>æ¯”å¦‚ï¼šæˆ‘æƒ³å¬å¬æ‚¨çš„æƒ³æ³•ï¼›æˆ‘æƒ³çŸ¥é“æ‚¨å¯¹æˆ‘çš„çœ‹æ³•ï¼›æˆ‘å¸Œæœ›å¬æ‚¨å¦è¯šåœ°è®²è®²å¯¹æˆ‘çš„æ„è§å’Œå»ºè®®</p></blockquote><ol><li><p>åšå‡ºè¯•æ¢è¡¨è¿°</p></li><li><p>é¼“åŠ±åšå‡ºå°è¯•</p></li></ol><h3 id="ä¸ºä¸‹ä¸€æ¬¡å…³é”®å¯¹è¯åšå‡†å¤‡"><a href="#ä¸ºä¸‹ä¸€æ¬¡å…³é”®å¯¹è¯åšå‡†å¤‡" class="headerlink" title="ä¸ºä¸‹ä¸€æ¬¡å…³é”®å¯¹è¯åšå‡†å¤‡"></a>ä¸ºä¸‹ä¸€æ¬¡å…³é”®å¯¹è¯åšå‡†å¤‡</h3><ul><li><p>ä»å¿ƒå¼€å§‹ï¼ˆè°ƒæ•´å¿ƒæ€ï¼Œè‡ªå·±é¦–å…ˆæ‘†è„±æš´åŠ›æˆ–æ²‰é»˜çš„çŠ¶æ€ï¼Œå¯»æ‰¾åŒèµ¢çš„å¯èƒ½ï¼‰</p></li><li><p>æ³¨æ„è§‚å¯Ÿï¼ˆé™¤äº†å†…å®¹ï¼Œè¿˜è¦å…³æ³¨è°ˆè¯çš„æ°›å›´ï¼‰</p></li><li><p>ä¿è¯å®‰å…¨ï¼ˆå¦‚æœå¯¹æ–¹æƒ…ç»ªå‡ºç°é—®é¢˜ï¼Œæƒ³åŠæ³•è®©å¯¹æ–¹è§‰å¾—å®‰å…¨ï¼‰</p></li><li><p>æ§åˆ¶æƒ³æ³•ï¼ˆä¸è¦è½»æ˜“åœ°è§‰å¾—å—åˆ°å†’çŠ¯æˆ–è€…ä¸å…¬å¹³ï¼Œå…¬å¹³ä¸é‡è¦ï¼Œè§£å†³é—®é¢˜æ‰é‡è¦ï¼‰</p></li><li><p>é™ˆè¿°è§‚ç‚¹ï¼ˆè¯´å‡ºäº‹å®ï¼Œè¡¨è¾¾è§‚ç‚¹ï¼Œå¯¹æ¯”è¯´æ˜ï¼‰</p></li><li><p>äº†è§£åŠ¨æœºï¼ˆå¸®åŠ©å¯¹æ–¹è°ƒæ•´æƒ…ç»ªï¼‰</p></li></ul><p><strong>å¬æ¨Šç™»è¯»ä¹¦â€“ã€Šå…³é”®å¯¹è¯ã€‹ç¬”è®°</strong></p><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š~<br>åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å…³é”®å¯¹è¯&quot;&gt;&lt;a href=&quot;#å…³é”®å¯¹è¯&quot; class=&quot;headerlink&quot; title=&quot;å…³é”®å¯¹è¯&quot;&gt;&lt;/a&gt;å…³é”®å¯¹è¯&lt;/h2&gt;&lt;p&gt;ç”Ÿæ´»å·¥ä½œï¼Œäººä¸äººçš„å…³ç³»å°±å»ºç«‹åœ¨ä¸€æ¬¡æ¬¡çš„æ²Ÿé€šå¯¹è¯ä¸­ã€‚&lt;br&gt;å½“å¯¹è¯çš„ä½ ä»¬åŒæ–¹è§‚ç‚¹å­˜åœ¨å¾ˆå¤§çš„å·®è·ï¼›å½“å¯¹è¯å­˜åœ¨å¾ˆå¤§çš„é£é™©ï¼Œå¯¹ä½ å¯èƒ½äº§ç”Ÿè«å¤§å½±å“ï¼›å½“å¯¹è¯çš„åŒæ–¹æƒ…ç»ªæ¿€çƒˆï¼›è¿™éƒ½æ˜¯å…³é”®çš„å¯¹è¯ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="è¯»ä¹¦" scheme="http://tigutf.github.io/categories/%E8%AF%BB%E4%B9%A6/"/>
    
    
  </entry>
  
  <entry>
    <title>cccpç³»ç»Ÿè®¾è®¡-å¼‚å¸¸é‡è¯•-åˆ†ç‰‡åº”ç”¨</title>
    <link href="http://tigutf.github.io/2018/12/23/cccp%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1-%E5%BC%82%E5%B8%B8%E9%87%8D%E8%AF%95-%E5%88%86%E7%89%87%E5%BA%94%E7%94%A8/"/>
    <id>http://tigutf.github.io/2018/12/23/cccpç³»ç»Ÿè®¾è®¡-å¼‚å¸¸é‡è¯•-åˆ†ç‰‡åº”ç”¨/</id>
    <published>2018-12-23T15:57:33.000Z</published>
    <updated>2019-03-23T14:50:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»»åŠ¡å¤„ç†å¼‚å¸¸é‡è¯•æœºåˆ¶<br><a id="more"></a></p><p>é’ˆå¯¹ä»»åŠ¡å¤„ç†åº”ç”¨ï¼Œè‹¥å‡ºç°ä»»åŠ¡çŠ¶æ€ä¸º-1ï¼ˆè¡¨ç¤ºå¼‚å¸¸ï¼‰ï¼Œæˆ–è€…çŠ¶æ€ä¸º0ï¼ˆå‡†å¤‡çŠ¶æ€ï¼‰ä¸”è¶…å‡ºä¸€å®šå¤„ç†æ—¶é•¿çš„ï¼Œæˆ‘ä»¬å³è®¤ä¸ºè¯¥ä»»åŠ¡å¤„ç†å‡ºç°é—®é¢˜ï¼Œéœ€è¦é‡æ–°å°è¯•å¤„ç†ã€‚</p><p>å®šä¹‰ä¸€ä¸ªå¼‚å¸¸å¤„ç†æ¨¡å—ï¼Œé’ˆå¯¹ä¸åŒä»»åŠ¡è®¾ç½®å¯¹åº”çš„å®šæ—¶ä»»åŠ¡â€”â€”æ‰«ææ•°æ®åº“ä»»åŠ¡è¡¨ï¼Œè‹¥æ‰«æåˆ°ä»¥ä¸ŠçŠ¶æ€çš„ä»»åŠ¡ï¼Œåˆ™é‡æ–°å‘åˆ°kafkaé˜Ÿåˆ—ä¸Šï¼Œç­‰å¾…ä»»åŠ¡çš„é‡è¯•ã€‚</p><p>é€šè¿‡ä»¥ä¸Šæ–¹å¼ä¿è¯äº†ä»»åŠ¡å¤„ç†çš„å¥å£®ï¼Œç„¶è€Œä¹Ÿè¡ç”Ÿäº†å‡ ä¸ªé—®é¢˜ï¼š</p><ul><li><p>ç”Ÿäº§é›†ç¾¤ç¯å¢ƒä¸‹ï¼Œå¤šä¸ªå¼‚å¸¸å¤„ç†çš„èŠ‚ç‚¹ï¼ŒåŒæ—¶æ‰«æåˆ°å¯¹åº”çš„æ•°æ®ä¿¡æ¯ã€‚</p><blockquote><p>ä¸ºé˜²æ­¢ä»»åŠ¡ä¿¡æ¯çš„é‡å¤æ‰«æå¤„ç†ï¼Œåˆ©ç”¨redisæ·»åŠ ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Œå¾—åˆ°é”çš„åº”ç”¨æ‰è¿›è¡Œæ•°æ®æ‰«æå’Œå¤„ç†ï¼Œé™åˆ¶å¤„ç†çš„æ•°é‡ï¼Œä¿è¯åº”ç”¨å¯åŠæ—¶å¤„ç†ã€‚</p></blockquote></li><li><p>æŸäº›ä»»åŠ¡ç”±äºå»¶æ—¶æœªåŠæ—¶å¤„ç†ï¼Œè€Œå¼‚å¸¸æ¨¡å—åˆæ¨é€ç›¸åŒä»»åŠ¡è¿‡æ¥ï¼Œå¯¼è‡´ä»»åŠ¡å¤„ç†åº”ç”¨å¹‚ç­‰æ€§é—®é¢˜</p><blockquote><p>é’ˆå¯¹ä»»åŠ¡å¤„ç†ç»“æœâ€”â€”æˆ‘ä»¬ä¼šç”Ÿæˆå¯¹åº”çš„æ¶ˆæ¯æ•°æ®ï¼Œé€šè¿‡ç›¸å…³ä¸šåŠ¡å­—æ®µç»™æ¶ˆæ¯æ•°æ®æ·»åŠ äº†å”¯ä¸€ç´¢å¼•ï¼Œä¿è¯ç›¸åŒä»»åŠ¡åªç”Ÿæˆä¸€æ¡æ¶ˆæ¯ï¼›è¿™æ ·å­é¿å…äº†æ¶ˆæ¯çš„é‡å¤ç”Ÿæˆï¼Œä½†éƒ½æ˜¯ä¾é æ•°æ®åº“æŠ›å‡ºé‡å¤ä¸»é”®çš„å¼‚å¸¸æ¥å¤„ç†ï¼Œå¯¹æ•°æ®åº“å½¢æˆäº†ä¸å°çš„å‹åŠ›ï¼Œæ‰€ä»¥é’ˆå¯¹ä»»åŠ¡ï¼Œå½“è¿›å…¥å¤„ç†æ—¶ï¼Œä¾¿ç»™è¯¥ä»»åŠ¡åœ¨redisç¼“å­˜é‡Œé¢å®‰ç½®ä¸€ä¸ªå¤„ç†ä¸­çš„æ ‡å¿—ï¼Œå¤„ç†å®Œæˆååˆ é™¤ï¼Œé‡å¤ä»»åŠ¡è¿›å…¥æ—¶ï¼Œè‹¥åœ¨ç¼“å­˜ä¸­å­˜åœ¨è¯¥æ ‡å¿—åˆ™ä¸å†è¿›è¡Œå¤„ç†ã€‚</p></blockquote></li></ul><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»»åŠ¡å¤„ç†å¼‚å¸¸é‡è¯•æœºåˆ¶&lt;br&gt;
    
    </summary>
    
      <category term="ç³»ç»Ÿè®¾è®¡" scheme="http://tigutf.github.io/categories/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/"/>
    
    
      <category term="å¼‚å¸¸å¤„ç†" scheme="http://tigutf.github.io/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>æ•£è°ˆäºŒ-ç¼“å­˜</title>
    <link href="http://tigutf.github.io/2018/12/23/cccp%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1-%E7%BC%93%E5%AD%98/"/>
    <id>http://tigutf.github.io/2018/12/23/cccpç³»ç»Ÿè®¾è®¡-ç¼“å­˜/</id>
    <published>2018-12-23T15:54:19.000Z</published>
    <updated>2018-12-23T15:54:19.000Z</updated>
    
    <content type="html"><![CDATA[<p><em>åœ¨ç³»ç»Ÿé¡¹ç›®çš„è®¾è®¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é¿å…ä¸äº†éœ€è¦åˆ°ä¸€äº›æ•°æ®å­—å…¸ã€å‚æ•°é…ç½®ã€çŠ¶æ€å¸¸æ•°ç­‰ï¼Œå®æ—¶çš„æ€»æ˜¯ä»æ•°æ®åº“æˆ–è€…æ–‡ä»¶ä¸­è¯»å–ï¼Œæ˜¯å¾ˆè€—æ€§èƒ½çš„ï¼Œè€Œä¸”é€Ÿåº¦ä¹Ÿæ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥ä½¿ç”¨ç¼“å­˜ï¼Œå½“ç„¶æ˜¯æœ€ä½³çš„é€‰æ‹©ã€‚</em><br><a id="more"></a></p><h2 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h2><blockquote><p>Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache and message broker.</p></blockquote><ul><li><p>Redisæ˜¯ä¸€ä¸ªå¼€æºçš„å†…å­˜æ•°æ®å­˜å‚¨ï¼Œå¯è¢«ç”¨äºåšæ•°æ®åº“ã€ç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—ã€‚å®˜æ–¹æ–‡æ¡£ä¸­redisæ˜¯å¯ç”¨åšæ•°æ®åº“ï¼Œä½†å®é™…åº”ç”¨ä¸­ï¼Œredisç”¨çš„æ˜¯å†…å­˜å­˜å‚¨ï¼Œå½“ä½œæ•°æ®åº“å¹¶å­˜å‚¨åˆ°ä¸€åŠå®¹é‡ä»¥ä¸Šæ—¶ï¼Œå…¶æ€§èƒ½æ˜¯å¾ˆå·®çš„ï¼Œæ‰€ä»¥æ›´å¤šçš„æ˜¯ç”¨ä½œç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—ã€‚</p></li><li><p>æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨redisåšç¼“å­˜ä¸­é—´ä»¶ï¼Œåº”ç”¨å¯åŠ¨åŠ è½½æ—¶ä¼šå…ˆå°†ç³»ç»Ÿç›¸åº”æ•°æ®å­—å…¸ã€å‚æ•°é…ç½®ç­‰åŠ å…¥redisç¼“å­˜ä¸­ï¼Œå½“æ¯ä¸ªåº”ç”¨éœ€è¦ç”¨åˆ°æ—¶ï¼Œå†ä»redisä¸­è¯»å–ï¼Œå› ä¸ºå‚¨å­˜äºå†…å­˜ï¼Œå“åº”éå¸¸å¿«ã€‚åœ¨é¡¹ç›®ä¸­é‡‡ç”¨ä¸¤ä¸»ä¸¤ä»ä¸‰å“¨å…µçš„æ¨¡å¼ï¼Œå› ä¸ºé¡¹ç›®é‡çº§æå‡ï¼Œä»å•èŠ‚ç‚¹è½¬å˜æˆå¤šèŠ‚ç‚¹ï¼ˆé›†ç¾¤æ¨¡å¼ï¼‰ï¼Œæ‰€ä»¥åŸæœ¬åªæ˜¯Jedisï¼ˆJedisPoolï¼‰æ¥è¿æ¥redisè¿›è¡Œæ“ä½œï¼Œåé¢æ”¹é€ ä¸ºSharedJedisï¼Œå®ç°redisçš„åˆ†ç‰‡ï¼Œæ ¹æ®ä¸€è‡´æ€§Hash IDè®¡ç®—ååˆ†é…åˆ°ä¸åŒçš„åˆ†ç‰‡ä¸Šï¼ˆå³ä¸åŒçš„èŠ‚ç‚¹redisï¼‰ã€‚</p></li><li><p>SharedJedisæ˜¯jedisçš„jaråŒ…ä¸­æä¾›çš„åŸºäºå®¢æˆ·ç«¯åˆ†ç‰‡çš„å®ç°ã€‚<br>SharedJedisåˆ†ç‰‡ç›¸å…³çš„ä»£ç åŸºæœ¬éƒ½åœ¨redis.clients.util.Shardedç±»ä¸­ã€‚<br>ä¸‹é¢æ˜¯Shardedç±»çš„æ„é€ å‡½æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"><span class="doctag">@param</span> shardsï¼ŒredisæœåŠ¡ä¿¡æ¯å¯¹è±¡çš„listé›†åˆï¼ˆShardInfoçš„å­ç±»ï¼Œå¦‚JedisShardInfoï¼Œå­˜æ”¾äº†rediså­èŠ‚ç‚¹çš„ipã€ç«¯å£ã€weightç­‰ä¿¡æ¯ï¼‰ã€‚</span></span><br><span class="line"><span class="comment"><span class="doctag">@param</span> hashç®—æ³•ï¼ˆé»˜è®¤ä¸€è‡´æ€§hashï¼‰ï¼Œjedisä¸­æŒ‡å®šäº†ä¸¤ç§hashå®ç°ï¼Œä¸€ç§æ˜¯ä¸€è‡´æ€§hashï¼Œä¸€ç§æ˜¯åŸºäºmd5çš„å®ç°ï¼Œåœ¨redis.clients.util.Hashingä¸­æŒ‡å®šçš„ã€‚</span></span><br><span class="line"><span class="comment"><span class="doctag">@param</span> tagPatternï¼Œå¯ä»¥æŒ‡å®šæŒ‰ç…§keyçš„æŸä¸€éƒ¨åˆ†è¿›è¡Œhashåˆ†ç‰‡ï¼ˆæ¯”å¦‚æˆ‘ä»¬å¯ä»¥å°†ä»¥orderå¼€å¤´çš„keyåˆ†é…åˆ°redisèŠ‚ç‚¹1ä¸Šï¼Œå¯ä»¥å°†ä»¥productå¼€å¤´çš„keyåˆ†é…åˆ°redisèŠ‚ç‚¹2ä¸Šï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯æ ¹æ®æ•´ä¸ªkeyè¿›è¡Œhashåˆ†ç‰‡çš„ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Sharded</span><span class="params">(List&lt;S&gt; shards, Hashing algo, Pattern tagPattern)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.algo = algo;</span><br><span class="line">    <span class="keyword">this</span>.tagPattern = tagPattern;</span><br><span class="line">    initialize(shards);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨Shardedæ„é€ å‡½æ•°ä¸­è°ƒç”¨äº†initializeæ–¹æ³•å®Œæˆåˆ†ç‰‡çš„ä¸€äº›åˆå§‹åŒ–æ“ä½œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">private void initialize(List&lt;S&gt; shards) &#123;</span><br><span class="line">    nodes = new TreeMap&lt;Long, S&gt;();</span><br><span class="line"></span><br><span class="line">    for (int i = 0; i != shards.size(); ++i) &#123;</span><br><span class="line">      final S shardInfo = shards.get(i);</span><br><span class="line">      if (shardInfo.getName() == null) for (int n = 0; n &lt; 160 * shardInfo.getWeight(); n++) &#123;</span><br><span class="line">        nodes.put(this.algo.hash(&quot;SHARD-&quot; + i + &quot;-NODE-&quot; + n), shardInfo);</span><br><span class="line">      &#125;</span><br><span class="line">      else for (int n = 0; n &lt; 160 * shardInfo.getWeight(); n++) &#123;</span><br><span class="line">        nodes.put(this.algo.hash(shardInfo.getName() + &quot;*&quot; + n), shardInfo);</span><br><span class="line">      &#125;</span><br><span class="line">      resources.put(shardInfo, shardInfo.createResource());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>é¦–å…ˆæ ¹æ®redisèŠ‚ç‚¹é›†åˆä¿¡æ¯åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹ï¼ˆä¸€è‡´æ€§hashä¸Š0~2^32ä¹‹é—´çš„ç‚¹ï¼‰ï¼Œé€šè¿‡ä¸Šé¢çš„æºç å¯ä»¥çœ‹å‡ºï¼Œæ ¹æ®æ¯ä¸ªredisèŠ‚ç‚¹çš„nameè®¡ç®—å‡ºå¯¹åº”çš„hashå€¼ï¼ˆå¦‚æœæ²¡æœ‰é…ç½®èŠ‚ç‚¹åç§°ï¼Œå°±æ˜¯ç”¨é»˜è®¤çš„åå­—ï¼‰ï¼Œå¹¶åˆ›å»ºäº†160<em>weightä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œweighté»˜è®¤æƒ…å†µä¸‹ç­‰äº1ï¼Œå¦‚æœæŸä¸ªèŠ‚ç‚¹çš„é…ç½®è¾ƒé«˜ï¼Œå¯ä»¥é€‚å½“çš„æé«˜è™šæ‹ŸèŠ‚ç‚¹çš„ä¸ªæ•°ï¼Œå°†æ›´å¤šçš„è¯·æ±‚æ‰“åˆ°è¿™ä¸ªèŠ‚ç‚¹ä¸Šã€‚SharedJediså¹¶ä¸æ”¯æŒå¤šä¸ªkeyçš„æ“ä½œï¼Œä¾‹å¦‚ keys </em> ï¼›å› ä¸ºå¤šä¸ªkeyè®¡ç®—å‡ºæ¥çš„åˆ†ç‰‡å¯èƒ½ä¸ä¸€æ ·ï¼Œè¯»éœ€è¦å¤šä¸ªèŠ‚ç‚¹åŒæ—¶è®¡ç®—ååšå½’å¹¶äº¤é›†æ‰èƒ½å¾—åˆ°ç»“æœï¼Œå†™çš„æ—¶å€™æ— æ³•åˆ¤æ–­æ‰€æœ‰keyæ˜¯å¦éƒ½å†™æˆåŠŸï¼Œä¸€è‡´æ€§å¾—ä¸åˆ°ä¿éšœã€‚</p></blockquote><ul><li>SharedJedisçš„è¿™ä¸ªå®ç°ï¼Œå‚ç…§äº†ä¸€è‡´æ€§Hashç®—æ³•(consistent hashing)ã€‚<br>å¯å‚è€ƒï¼š<br><a href="http://blog.csdn.net/cywosp/article/details/23397179" target="_blank" rel="noopener">http://blog.csdn.net/cywosp/article/details/23397179</a></li></ul><h2 id="Guava-cacheLoader"><a href="#Guava-cacheLoader" class="headerlink" title="Guava cacheLoader"></a>Guava cacheLoader</h2><p><strong><font color="blue"><br>Guavaæ˜¯ä¸€ä¸ªè¶…æ£’çš„å·¥å…·ç±»åº“~<br>Guavaå·¥ç¨‹åŒ…å«äº†è‹¥å¹²è¢«Googleçš„Javaé¡¹ç›®å¹¿æ³›ä¾èµ–çš„æ ¸å¿ƒåº“ï¼Œä¾‹å¦‚ï¼šé›†åˆ [collections] ã€ç¼“å­˜ [caching] ã€åŸç”Ÿç±»å‹æ”¯æŒ [primitives support] ã€å¹¶å‘åº“ [concurrency libraries] ã€é€šç”¨æ³¨è§£ [common annotations] ã€å­—ç¬¦ä¸²å¤„ç† [string processing] ã€I/O ç­‰ç­‰ã€‚</font></strong></p><p>LocalCacheæ˜¯ä¸€ç§å¾ˆå¥½çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥æˆå€çš„æé«˜å¤„ç†æ•ˆç‡ã€‚Guava cacheåªæ˜¯å®ƒå…¶ä¸­ä¸€ç§æ–¹æ¡ˆé€‰æ‹©ã€‚åœ¨æˆ‘ä»¬çš„ç³»ç»ŸåŠŸèƒ½è®¾è®¡ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°çš„æ˜¯LoadingCache<k,t>ã€‚è‹¥è¯´Redisä¸ºä¸€çº§ç¼“å­˜ï¼ŒCacheLoaderåˆ™æ˜¯äºŒçº§ç¼“å­˜ï¼›</k,t></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ•°æ®åŠ è½½å™¨</span></span><br><span class="line">CacheLoader&lt;K, T&gt; loader = <span class="keyword">new</span> CacheLoader&lt;K, T&gt; () &#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> T <span class="title">load</span><span class="params">(K Key)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// TODO load data.</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//Guava cache çš„åˆ›å»º</span></span><br><span class="line"><span class="keyword">return</span> CacheBuilder.newBuilder()</span><br><span class="line">  .maximumSize(<span class="number">1000</span>)<span class="comment">//æœ€å¤§å®¹é‡</span></span><br><span class="line">  .expireAfterWrite(<span class="number">2</span>, TimeUnit.MINUTES)<span class="comment">//ç¼“å­˜å†™å…¥åçš„è¿‡æœŸæ—¶é—´2min</span></span><br><span class="line">  .build(loader);</span><br></pre></td></tr></table></figure><ul><li>æˆ‘æ˜¯ç”¨çš„CacheLoaderçš„æ–¹å¼ï¼Œå…ˆå®šä¹‰ä¸€ä¸ªCacheLoaderåŠ è½½å™¨,ç„¶åç”¨CacheBuilderè¿›è¡Œæ„å»ºï¼Œæµå¼å®šä¹‰ç¼“å­˜å¤§å°ã€ç¼“å­˜å¤±æ•ˆæ—¶é—´ã€ç¼“å­˜åˆ·æ–°æ—¶é—´ç­‰ç­‰ï¼ˆGuava Cacheæä¾›äº†å¤šç§ç¼“å­˜æœºåˆ¶ï¼‰ã€‚LoadingCacheæ‰§è¡Œæ—¶ï¼Œå…ˆä»å·²æœ‰ç¼“å­˜ä¸­é€šè¿‡keyæŸ¥æ‰¾ï¼Œè‹¥æ²¡æœ‰åˆ™æ‰§è¡Œloadæ–¹æ³•åŠ è½½ä¸€ékeyçš„å€¼ã€‚<font color="Orange"><strong>æ³¨æ„ï¼šå½“æ‰§è¡ŒloadæŸ¥è¯¢åŠ è½½æ•°æ®ä¹Ÿéƒ½æŸ¥è¯¢ä¸åˆ°æ—¶ï¼ŒLoading Cacheçš„getæ–¹æ³•ä¼šç›´æ¥æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œè¿™æ˜¯éœ€è¦é˜²èŒƒçš„ã€‚å»ºè®®å¯ä»¥é…åˆOption<t>ä¸€èµ·ä½¿ç”¨ï¼Œå³CacheLoader&lt;K,Option<t>&gt;è¿™æ ·å­å®šä¹‰ã€‚Guavaå¯¹NPEæœ‰å…¶ä¸¥è°¨çš„è§„èŒƒã€‚</t></t></strong></font></li></ul><p>LoadingCacheæœ‰å¦ä¸€ç§å®ç°æ–¹å¼â€”â€”Callable</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testcallableCache</span><span class="params">()</span><span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">    Cache&lt;String, String&gt; cache = CacheBuilder.newBuilder().maximumSize(<span class="number">1000</span>).build();  </span><br><span class="line">    String resultVal = cache.get(<span class="string">"Hello"</span>, <span class="keyword">new</span> Callable&lt;String&gt;() &#123;  </span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">            <span class="comment">//TODO è·å–å€¼  </span></span><br><span class="line">            System.out.println(<span class="string">"Hello "</span>);            </span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;);  </span><br><span class="line">    System.out.println(<span class="string">"Hello "</span> + resultVal);</span><br><span class="line"></span><br><span class="line">    resultVal = cache.get(<span class="string">"test"</span>, <span class="keyword">new</span> Callable&lt;String&gt;() &#123;  </span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">call</span><span class="params">()</span> </span>&#123;             </span><br><span class="line">            <span class="comment">//TODO è·å–å€¼</span></span><br><span class="line">            System.out.println(<span class="string">"Test"</span>);</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;);  </span><br><span class="line">    System.out.println(<span class="string">"test value : "</span> + resultVal);  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;em&gt;åœ¨ç³»ç»Ÿé¡¹ç›®çš„è®¾è®¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é¿å…ä¸äº†éœ€è¦åˆ°ä¸€äº›æ•°æ®å­—å…¸ã€å‚æ•°é…ç½®ã€çŠ¶æ€å¸¸æ•°ç­‰ï¼Œå®æ—¶çš„æ€»æ˜¯ä»æ•°æ®åº“æˆ–è€…æ–‡ä»¶ä¸­è¯»å–ï¼Œæ˜¯å¾ˆè€—æ€§èƒ½çš„ï¼Œè€Œä¸”é€Ÿåº¦ä¹Ÿæ¯”è¾ƒæ…¢ï¼Œæ‰€ä»¥ä½¿ç”¨ç¼“å­˜ï¼Œå½“ç„¶æ˜¯æœ€ä½³çš„é€‰æ‹©ã€‚
&lt;/em&gt;&lt;br&gt;
    
    </summary>
    
      <category term="ç¼“å­˜" scheme="http://tigutf.github.io/categories/%E7%BC%93%E5%AD%98/"/>
    
    
      <category term="redis|" scheme="http://tigutf.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>æ•£è°ˆä¸€-å¤šæ•°æ®æº</title>
    <link href="http://tigutf.github.io/2018/12/23/cccp%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1-%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90/"/>
    <id>http://tigutf.github.io/2018/12/23/cccpç³»ç»Ÿè®¾è®¡-å¤šæ•°æ®æº/</id>
    <published>2018-12-23T15:53:51.000Z</published>
    <updated>2018-12-23T15:53:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºé¡¹ç›®å¼€å‘ä¸­æ¶‰åŠå¤šä¸ªæ•°æ®åº“ï¼Œæ¯ä¸ªæœåŠ¡åˆéœ€è¦è¿æ¥å¤šä¸ªæ•°æ®åº“ï¼Œæ‰€ä»¥è¿™å°±éœ€è¦å¤šæ•°æ®æºåˆ‡æ¢äº†ã€‚</p><a id="more"></a><h2 id="AbstractRoutingDataSourceå®ç°å¤šæ•°æ®æºåˆ‡æ¢"><a href="#AbstractRoutingDataSourceå®ç°å¤šæ•°æ®æºåˆ‡æ¢" class="headerlink" title="AbstractRoutingDataSourceå®ç°å¤šæ•°æ®æºåˆ‡æ¢"></a>AbstractRoutingDataSourceå®ç°å¤šæ•°æ®æºåˆ‡æ¢</h2><p>  åœ¨springä¸‹æˆ‘ä»¬è¦è¿›è¡Œæ•°æ®æ“ä½œï¼š</p><ol><li>sessionFactoryä¼šè¯å·¥å‚ã€transactionManageräº‹åŠ¡ç®¡ç†å™¨è®¾ç½®dataSourceï¼Œæ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼›</li><li>è·å–æ•°æ®åº“çš„è¿æ¥ä¼šè¯session,é€šè¿‡sessionFactoryè·å–ï¼›</li><li>é€šè¿‡ä¼šè¯sessionè¿æ¥ï¼Œä¸äº‹åŠ¡ç®¡ç†å™¨ï¼Œå®ç°æ•°æ®åº“æ“ä½œï¼Œå¹¶ä¿è¯äº‹åŠ¡å®Œæ•´ã€‚</li></ol><p>ç”±æ­¤å¯è§ï¼Œè¦å®ç°æ•°æ®æºåˆ‡æ¢ï¼Œä¸»è¦æ˜¯èƒ½å®ç°dataSourceçš„åŠ¨æ€æ›´æ”¹;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Abstract &#123;@link javax.sql.DataSource&#125; implementation that routes &#123;@link #getConnection()&#125;</span><br><span class="line">calls to one of various target DataSources based on a lookup key. The latter is usually</span><br><span class="line">(but not necessarily) determined through some thread-bound transaction context.</span><br></pre></td></tr></table></figure></p><p> AbstractRoutingDataSourceâ€“ç›´è¯‘ä¸ºæŠ½è±¡è·¯ç”±æ•°æ®æºï¼Œä»¥ä¸Šæ˜¯springä¸­å¯¹å®ƒçš„è§£é‡Šï¼šå½“è·å–æŸä¸ªæ•°æ®åº“è¿æ¥æ—¶ï¼Œæ˜¯åŸºäºlookup keyæ¥ç¡®å®šçš„ã€‚</p><ul><li>å¤šæ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼ŒæŠŠæ•°æ®æºæ•°æ®æºåŠ¨æ€æ¤å…¥åˆ°ç¨‹åºä¸­ï¼Œçµæ´»çš„è¿›è¡Œæ•°æ®æºåˆ‡æ¢ã€‚</li><li>åŸºäºå¤šæ•°æ®æºçš„åŠ¨æ€åˆ‡æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°è¯»å†™åˆ†ç¦»ï¼Œè¿™ä¹ˆåšç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæ— æ³•åŠ¨æ€çš„å¢åŠ æ•°æ®æºã€‚</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//1ï¼‰åŠ¨æ€DataSource ,ç»§æ‰¿AbstractRoutingDataSource</span><br><span class="line">class DynamicDataSource extends AbstractRoutingDataSource &#123;</span><br><span class="line">   protected Object determineCurrentLookupKey() &#123;</span><br><span class="line">       return DynamicDataSourceContextHolder.getDataSourceType();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨springbootä¸­ç”¨ä»£ç æ¥é…ç½®åŠ¨æ€çš„æ•°æ®æºï¼Œå®ç°ImportBeanDefinitionRegistraræ¥å£ï¼Œåº”ç”¨åŠ è½½æ—¶æ³¨å†Œå¯¼å…¥beançš„å®šä¹‰ï¼Œå®ç°EnvironmentAwareæ¥å£æ˜¯ä¸ºäº†è·å–ç³»ç»Ÿç¯å¢ƒä¿¡æ¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@Description</span> åŠ¨æ€æ³¨å†Œæ•°æ®æºåŠ å…¥springå®¹å™¨ä¸­ç®¡ç†</span></span><br><span class="line"><span class="comment">* åˆå§‹åŒ–æ•°æ®æºå’Œæä¾›äº†æ‰§è¡ŒåŠ¨æ€åˆ‡æ¢æ•°æ®æºçš„å·¥å…·ç±»</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@Slf</span>4j</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicDataSourceRegister</span> <span class="keyword">implements</span> <span class="title">ImportBeanDefinitionRegistrar</span>, <span class="title">EnvironmentAware</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æŒ‡å®šé»˜è®¤æ•°æ®æº(springboot2.0é»˜è®¤æ•°æ®æºæ˜¯hikariå¦‚ä½•æƒ³ä½¿ç”¨å…¶ä»–æ•°æ®æºå¯ä»¥è‡ªå·±é…ç½®)</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String DATASOURCE_TYPE_DEFAULT = <span class="string">"com.zaxxer.hikari.HikariDataSource"</span>;</span><br><span class="line">  <span class="comment">//é»˜è®¤æ•°æ®æº</span></span><br><span class="line">  <span class="keyword">private</span> DataSource defaultDataSource;</span><br><span class="line">  <span class="comment">//ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®æº</span></span><br><span class="line">  <span class="keyword">private</span> Map&lt;String, DataSource&gt; customDataSources = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEnvironment</span><span class="params">(Environment environment)</span> </span>&#123;</span><br><span class="line">      initDefaultDataSource(environment);</span><br><span class="line">      initCustomDataSources(environment);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initDefaultDataSource</span><span class="params">(Environment env)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// è¯»å–ä¸»æ•°æ®æº</span></span><br><span class="line">      Map&lt;String, Object&gt; dsMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">      dsMap.put(<span class="string">"driver"</span>, env.getProperty(<span class="string">"spring.datasource.hikari.driver-class-name"</span>));</span><br><span class="line">      dsMap.put(<span class="string">"url"</span>, env.getProperty(<span class="string">"spring.datasource.hikari.jdbc-url"</span>));</span><br><span class="line">      dsMap.put(<span class="string">"username"</span>, env.getProperty(<span class="string">"spring.datasource.hikari.username"</span>));</span><br><span class="line">      dsMap.put(<span class="string">"password"</span>, env.getProperty(<span class="string">"spring.datasource.hikari.password"</span>));</span><br><span class="line">      defaultDataSource = buildDataSource(dsMap);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initCustomDataSources</span><span class="params">(Environment env)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// è¯»å–é…ç½®æ–‡ä»¶è·å–æ›´å¤šæ•°æ®æº</span></span><br><span class="line">      String dsPrefixs = env.getProperty(<span class="string">"spring.datasource.names"</span>);</span><br><span class="line">      <span class="keyword">for</span> (String dsPrefix : dsPrefixs.split(<span class="string">","</span>)) &#123;</span><br><span class="line">          <span class="comment">// å¤šä¸ªæ•°æ®æº</span></span><br><span class="line">          Map&lt;String, Object&gt; dsMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">          String firstStr = <span class="string">"spring.datasource."</span>;</span><br><span class="line">          dsMap.put(<span class="string">"driver"</span>, env.getProperty(firstStr + dsPrefix + <span class="string">".hikari.driver-class-name"</span>));</span><br><span class="line">          dsMap.put(<span class="string">"url"</span>, env.getProperty(firstStr + dsPrefix + <span class="string">".hikari.jdbc-url"</span>));</span><br><span class="line">          dsMap.put(<span class="string">"username"</span>, env.getProperty(firstStr + dsPrefix + <span class="string">".hikari.username"</span>));</span><br><span class="line">          dsMap.put(<span class="string">"password"</span>, env.getProperty(firstStr + dsPrefix + <span class="string">".hikari.password"</span>));</span><br><span class="line">          DataSource ds = buildDataSource(dsMap);</span><br><span class="line">          customDataSources.put(dsPrefix, ds);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> DataSource <span class="title">buildDataSource</span><span class="params">(Map&lt;String, Object&gt; dataSourceMap)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">          Object type = dataSourceMap.get(<span class="string">"type"</span>);</span><br><span class="line">          <span class="keyword">if</span> (type == <span class="keyword">null</span>) &#123;</span><br><span class="line">              type = DATASOURCE_TYPE_DEFAULT;<span class="comment">// é»˜è®¤DataSource</span></span><br><span class="line">          &#125;</span><br><span class="line">          Class&lt;? extends DataSource&gt; dataSourceType;</span><br><span class="line">          dataSourceType = (Class&lt;? extends DataSource&gt;) Class.forName((String) type);</span><br><span class="line">          String driverClassName = dataSourceMap.get(<span class="string">"driver"</span>).toString();</span><br><span class="line">          String url = dataSourceMap.get(<span class="string">"url"</span>).toString();</span><br><span class="line">          String username = dataSourceMap.get(<span class="string">"username"</span>).toString();</span><br><span class="line">          String password = dataSourceMap.get(<span class="string">"password"</span>).toString();</span><br><span class="line">          <span class="comment">// è‡ªå®šä¹‰DataSourceé…ç½®</span></span><br><span class="line">          DataSourceBuilder factory = DataSourceBuilder.create().driverClassName(driverClassName).url(url)</span><br><span class="line">                  .username(username).password(password).type(dataSourceType);</span><br><span class="line">          <span class="keyword">return</span> factory.build();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">registerBeanDefinitions</span><span class="params">(AnnotationMetadata annotationMetadata, BeanDefinitionRegistry beanDefinitionRegistry)</span> </span>&#123;</span><br><span class="line">      Map&lt;Object, Object&gt; targetDataSources = <span class="keyword">new</span> HashMap&lt;Object, Object&gt;();</span><br><span class="line">      <span class="comment">//æ·»åŠ é»˜è®¤æ•°æ®æº</span></span><br><span class="line">      targetDataSources.put(<span class="string">"main"</span>, <span class="keyword">this</span>.defaultDataSource);</span><br><span class="line">      DynamicDataSourceContextHolder.dataSourceIds.add(<span class="string">"main"</span>);</span><br><span class="line">      <span class="comment">//æ·»åŠ å…¶ä»–æ•°æ®æº</span></span><br><span class="line">      targetDataSources.putAll(customDataSources);</span><br><span class="line">      <span class="keyword">for</span> (String key : customDataSources.keySet()) &#123;</span><br><span class="line">          DynamicDataSourceContextHolder.dataSourceIds.add(key);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//åˆ›å»ºDynamicDataSource</span></span><br><span class="line">      GenericBeanDefinition beanDefinition = <span class="keyword">new</span> GenericBeanDefinition();</span><br><span class="line">      beanDefinition.setBeanClass(DynamicDataSource.class);</span><br><span class="line">      beanDefinition.setSynthetic(<span class="keyword">true</span>);</span><br><span class="line">      MutablePropertyValues mpv = beanDefinition.getPropertyValues();</span><br><span class="line">      mpv.addPropertyValue(<span class="string">"defaultTargetDataSource"</span>, defaultDataSource);</span><br><span class="line">      mpv.addPropertyValue(<span class="string">"targetDataSources"</span>, targetDataSources);</span><br><span class="line">      <span class="comment">//æ³¨å†Œ - BeanDefinitionRegistry</span></span><br><span class="line">      beanDefinitionRegistry.registerBeanDefinition(<span class="string">"dataSource"</span>, beanDefinition);</span><br><span class="line">      log.info(<span class="string">"Dynamic DataSource Registry"</span>);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>å½“ä»£ç†ç±»-åŠ¨æ€æ•°æ®æºDynamicDataSourceå®šä¹‰å¥½ï¼Œå…·ä½“å„ä¸ªdataSourceä¹ŸåŠ¨æ€æ³¨å…¥springä¸­ï¼Œç°åœ¨éœ€è¦å®ç°å¦‚ä½•æ›´æ”¹DynamicDataSourceçš„looku keyçš„å˜åŒ–ï¼Œç”¨ThreadLocalæ¥ä¿è¯çº¿ç¨‹å®‰å…¨,å­˜å‚¨å¯¹åº”dataSourceçš„å…³é”®å­—ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">public class DynamicDataSourceContextHolder &#123;</span><br><span class="line"></span><br><span class="line">    //å­˜æ”¾å½“å‰çº¿ç¨‹ä½¿ç”¨çš„æ•°æ®æºç±»å‹ä¿¡æ¯</span><br><span class="line">    private static final ThreadLocal&lt;String&gt; contextHolder = new ThreadLocal&lt;String&gt;();</span><br><span class="line">    //å­˜æ”¾æ•°æ®æºid</span><br><span class="line">    public static List&lt;String&gt; dataSourceIds = new ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    //è®¾ç½®æ•°æ®æº</span><br><span class="line">    public static void setDataSourceType(String dataSourceType) &#123;</span><br><span class="line">        contextHolder.set(dataSourceType);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //è·å–æ•°æ®æº</span><br><span class="line">    public static String getDataSourceType() &#123;</span><br><span class="line">        return contextHolder.get();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //æ¸…é™¤æ•°æ®æº</span><br><span class="line">    public static void clearDataSourceType() &#123;</span><br><span class="line">        contextHolder.remove();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //åˆ¤æ–­å½“å‰æ•°æ®æºæ˜¯å¦å­˜åœ¨</span><br><span class="line">    public static boolean isContainsDataSource(String dataSourceId) &#123;</span><br><span class="line">        return dataSourceIds.contains(dataSourceId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¤šä¸ªSessionFactoryå®ç°æ•°æ®æºåˆ‡æ¢"><a href="#å¤šä¸ªSessionFactoryå®ç°æ•°æ®æºåˆ‡æ¢" class="headerlink" title="å¤šä¸ªSessionFactoryå®ç°æ•°æ®æºåˆ‡æ¢"></a>å¤šä¸ªSessionFactoryå®ç°æ•°æ®æºåˆ‡æ¢</h2><blockquote><p>åœ¨é«˜å¹¶å‘ï¼Œä¸€ä¸ªæ–¹æ³•ä¸­éœ€è¦åˆ‡æ¢å¤šä¸ªæ•°æ®è¿›è¡Œæ“ä½œï¼Œè¿˜è¦ä¿è¯äº‹åŠ¡ç®¡ç†çš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ç§æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é¢‘ç¹çš„ä¿®æ”¹threadLocalä¸­çš„å€¼ï¼ŒåŠæ—¶è°ƒæ•´ThreadLocalä¸­çš„å€¼ï¼Œå¦åˆ™å½“çº¿ç¨‹ä¾æ—§ç»‘å®šç€ä¸Šä¸€ä¸ªkeyæ—¶ï¼Œå®¹æ˜“å‘ç”ŸTable not existçš„å¼‚å¸¸ï¼Œä»£ç é€»è¾‘ä¹Ÿå°±å˜å¾—ç›¸å¯¹å¤æ‚ã€‚</p></blockquote><p>åœ¨spring4ç‰ˆæœ¬ä¸­ä¹Ÿæ˜¯æ”¯æŒå¤šæ•°æ®åº“åˆ‡æ¢çš„ï¼Œè®¾ç½®å¤šä¸ªSessionFactoryå’ŒtransactionManagerï¼Œå¯¹åº”å¤šä¸ªdataSourceï¼›ä¸»è¦ä¹Ÿæ˜¯ä»¥ç©ºé—´æ¢å–çš„åŠŸèƒ½å®ç°ï¼›é€šè¿‡äº‹åŠ¡æ³¨è§£å³å¯åˆ‡æ¢å¯¹åº”çš„æ•°æ®æºï¼Œå¹¶ä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ã€‚</p><blockquote><p>ä»£ç å°±ä¸è´´äº†ï¼ŒDataSourceã€SessionFactoryå’ŒtransactionManageråˆ†åˆ«å®šä¹‰å¤šä¸ªï¼Œä¸€ä¸€å¯¹åº”ã€‚<br><!-- end --></p><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”±äºé¡¹ç›®å¼€å‘ä¸­æ¶‰åŠå¤šä¸ªæ•°æ®åº“ï¼Œæ¯ä¸ªæœåŠ¡åˆéœ€è¦è¿æ¥å¤šä¸ªæ•°æ®åº“ï¼Œæ‰€ä»¥è¿™å°±éœ€è¦å¤šæ•°æ®æºåˆ‡æ¢äº†ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç³»ç»Ÿè®¾è®¡|æ•°æ®åº“" scheme="http://tigutf.github.io/categories/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1-%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="å¤šæ•°æ®æº|mysql" scheme="http://tigutf.github.io/tags/%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90-mysql/"/>
    
  </entry>
  
  <entry>
    <title>Javaåºåˆ—åŒ–</title>
    <link href="http://tigutf.github.io/2018/12/21/%E5%BA%8F%E5%88%97%E5%8C%961/"/>
    <id>http://tigutf.github.io/2018/12/21/åºåˆ—åŒ–1/</id>
    <published>2018-12-20T17:32:02.000Z</published>
    <updated>2018-12-20T17:32:02.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JavaåŸç”Ÿæµçš„æ–¹æ³•è¿›è¡Œçš„åºåˆ—åŒ–"><a href="#JavaåŸç”Ÿæµçš„æ–¹æ³•è¿›è¡Œçš„åºåˆ—åŒ–" class="headerlink" title="JavaåŸç”Ÿæµçš„æ–¹æ³•è¿›è¡Œçš„åºåˆ—åŒ–"></a>JavaåŸç”Ÿæµçš„æ–¹æ³•è¿›è¡Œçš„åºåˆ—åŒ–</h2><p>ç±»å®ç°Serializableæ¥å£ï¼Œæ ‡è®°è¯¥ç±»å¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–ã€‚æ­¤æ—¶ï¼ŒJavaåºåˆ—åŒ–å†™å…¥ä¸ä»…æ˜¯å®Œæ•´çš„ç±»åï¼Œä¹ŸåŒ…å«æ•´ä¸ªç±»çš„å®šä¹‰ï¼ŒåŒ…å«æ‰€æœ‰è¢«å¼•ç”¨çš„ç±»ï¼Œå½±å“æ€§èƒ½å’Œæ•ˆç‡ï¼›<br>é€šè¿‡å®ç°Externalizableæ¥å£ï¼Œè¿™æ˜¯å¯èƒ½ä¼˜åŒ–Javaåºåˆ—åŒ–çš„ã€‚å®ç°æ­¤æ¥å£ï¼Œé¿å…å†™å‡ºæ•´ä¸ªç±»å®šä¹‰ï¼Œåªæ˜¯ç±»åè¢«å†™å…¥ã€‚å®ƒéœ€è¦ä½ å®æ–½readExternalå’ŒwriteExternalæ–¹æ³•æ–¹æ³•çš„ï¼Œæ‰€ä»¥éœ€è¦åšä¸€äº›å·¥ä½œï¼Œä½†ç›¸æ¯”ä»…ä»…æ˜¯å®ç°Serializableæ›´å¿«ï¼Œæ›´é«˜æ•ˆã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//å¯¹è±¡è½¬æˆå­—èŠ‚ç       </span><br><span class="line">ByteArrayOutputStream byteArrayOutputStream = new  ByteArrayOutputStream();</span><br><span class="line">ObjectOutputStream outputStream = new ObjectOutputStream(byteArrayOutputStream);</span><br><span class="line">outputStream.writeObject(GetUser());</span><br><span class="line">byte[] bytes = byteArrayOutputStream.toByteArray();</span><br><span class="line">outputStream.close();      //å­—èŠ‚ç è½¬æ¢æˆå¯¹è±¡     </span><br><span class="line">ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(bytes);      </span><br><span class="line">ObjectInputStream inputStream = new ObjectInputStream(byteArrayInputStream);                       User result = (User) inputStream.readObject();      inputStream.close();</span><br></pre></td></tr></table></figure></p><h2 id="Jsonåºåˆ—åŒ–"><a href="#Jsonåºåˆ—åŒ–" class="headerlink" title="Jsonåºåˆ—åŒ–"></a>Jsonåºåˆ—åŒ–</h2><h2 id="FastJsonåºåˆ—åŒ–"><a href="#FastJsonåºåˆ—åŒ–" class="headerlink" title="FastJsonåºåˆ—åŒ–"></a>FastJsonåºåˆ—åŒ–</h2><h2 id="Protobuffåºåˆ—åŒ–"><a href="#Protobuffåºåˆ—åŒ–" class="headerlink" title="Protobuffåºåˆ—åŒ–"></a>Protobuffåºåˆ—åŒ–</h2><a id="more"></a><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;JavaåŸç”Ÿæµçš„æ–¹æ³•è¿›è¡Œçš„åºåˆ—åŒ–&quot;&gt;&lt;a href=&quot;#JavaåŸç”Ÿæµçš„æ–¹æ³•è¿›è¡Œçš„åºåˆ—åŒ–&quot; class=&quot;headerlink&quot; title=&quot;JavaåŸç”Ÿæµçš„æ–¹æ³•è¿›è¡Œçš„åºåˆ—åŒ–&quot;&gt;&lt;/a&gt;JavaåŸç”Ÿæµçš„æ–¹æ³•è¿›è¡Œçš„åºåˆ—åŒ–&lt;/h2&gt;&lt;p&gt;ç±»å®ç°Serializableæ¥å£ï¼Œæ ‡è®°è¯¥ç±»å¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–ã€‚æ­¤æ—¶ï¼ŒJavaåºåˆ—åŒ–å†™å…¥ä¸ä»…æ˜¯å®Œæ•´çš„ç±»åï¼Œä¹ŸåŒ…å«æ•´ä¸ªç±»çš„å®šä¹‰ï¼ŒåŒ…å«æ‰€æœ‰è¢«å¼•ç”¨çš„ç±»ï¼Œå½±å“æ€§èƒ½å’Œæ•ˆç‡ï¼›&lt;br&gt;é€šè¿‡å®ç°Externalizableæ¥å£ï¼Œè¿™æ˜¯å¯èƒ½ä¼˜åŒ–Javaåºåˆ—åŒ–çš„ã€‚å®ç°æ­¤æ¥å£ï¼Œé¿å…å†™å‡ºæ•´ä¸ªç±»å®šä¹‰ï¼Œåªæ˜¯ç±»åè¢«å†™å…¥ã€‚å®ƒéœ€è¦ä½ å®æ–½readExternalå’ŒwriteExternalæ–¹æ³•æ–¹æ³•çš„ï¼Œæ‰€ä»¥éœ€è¦åšä¸€äº›å·¥ä½œï¼Œä½†ç›¸æ¯”ä»…ä»…æ˜¯å®ç°Serializableæ›´å¿«ï¼Œæ›´é«˜æ•ˆã€‚&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;//å¯¹è±¡è½¬æˆå­—èŠ‚ç       &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ByteArrayOutputStream byteArrayOutputStream = new  ByteArrayOutputStream();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ObjectOutputStream outputStream = new ObjectOutputStream(byteArrayOutputStream);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;outputStream.writeObject(GetUser());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;byte[] bytes = byteArrayOutputStream.toByteArray();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;outputStream.close();      //å­—èŠ‚ç è½¬æ¢æˆå¯¹è±¡     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(bytes);      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ObjectInputStream inputStream = new ObjectInputStream(byteArrayInputStream);                       User result = (User) inputStream.readObject();      inputStream.close();&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2 id=&quot;Jsonåºåˆ—åŒ–&quot;&gt;&lt;a href=&quot;#Jsonåºåˆ—åŒ–&quot; class=&quot;headerlink&quot; title=&quot;Jsonåºåˆ—åŒ–&quot;&gt;&lt;/a&gt;Jsonåºåˆ—åŒ–&lt;/h2&gt;&lt;h2 id=&quot;FastJsonåºåˆ—åŒ–&quot;&gt;&lt;a href=&quot;#FastJsonåºåˆ—åŒ–&quot; class=&quot;headerlink&quot; title=&quot;FastJsonåºåˆ—åŒ–&quot;&gt;&lt;/a&gt;FastJsonåºåˆ—åŒ–&lt;/h2&gt;&lt;h2 id=&quot;Protobuffåºåˆ—åŒ–&quot;&gt;&lt;a href=&quot;#Protobuffåºåˆ—åŒ–&quot; class=&quot;headerlink&quot; title=&quot;Protobuffåºåˆ—åŒ–&quot;&gt;&lt;/a&gt;Protobuffåºåˆ—åŒ–&lt;/h2&gt;
    
    </summary>
    
      <category term="åºåˆ—åŒ–" scheme="http://tigutf.github.io/categories/%E5%BA%8F%E5%88%97%E5%8C%96/"/>
    
    
      <category term="Java|åºåˆ—åŒ–" scheme="http://tigutf.github.io/tags/Java-%E5%BA%8F%E5%88%97%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>è¯»ä¹¦-è§£å¿§æ‚è´§åº—</title>
    <link href="http://tigutf.github.io/2018/12/10/%E8%A7%A3%E5%BF%A7%E6%9D%82%E8%B4%A7%E5%BA%97/"/>
    <id>http://tigutf.github.io/2018/12/10/è§£å¿§æ‚è´§åº—/</id>
    <published>2018-12-09T17:10:48.000Z</published>
    <updated>2019-01-14T15:36:34.007Z</updated>
    
    <content type="html"><![CDATA[<p>çœ‹è¿‡ä¸å°‘æ—¥æœ¬åŠ¨æ¼«ï¼Œä½†å¾ˆå°‘è¯»è¿‡æ—¥æœ¬ä½œè€…çš„ä¹¦ç±ï¼Œçœ‹äº†ä¸€åŠã€Šè§£å¿§æ‚è´§åº—ã€‹ï¼Œæˆ‘å·²ç»è¢«ä¸œé‡åœ­å¾çš„æ–‡å­—æŠ“è¿›å»äº†ã€‚<br><a id="more"></a></p><blockquote><p>19ä¸–çºªä¸ƒå…«åå¹´ä»£ä¸ç°ä»£ï¼Œç›¸å·®34å¹´çš„æ—¶ç©ºäº¤é”™ï¼›</p><p>æ‚è´§åº—è€æ¿â€“ä¸€ä½å¹´è¿ˆçš„è€äººæµªçŸ¢é›„æ²»ï¼Œä¸ºå‘¨è¾¹çš„å°å­©å¤§äººæä¾›ç­”ç–‘è§£å¿§ï¼Œä»ä¸æ•·è¡äº†äº‹ã€‚å·é“é—¨æ—çš„é‚®ç®±â€“æ”¶å–æ¥å’¨è¯¢çš„ä¿¡å°ï¼Œåé—¨ç‰›å¥¶ç®±åˆ™æ”¾ç½®å›ä¿¡ã€‚<br>è€äººå‘¨è€Œå¤å§‹çš„æ€è€ƒæ¯ä½æ¥å’¨è¯¢çš„é—®é¢˜ï¼Œç»å°½è„‘æ±åœ°å†™ä¸‹å›ä¿¡ã€‚</p><p>äº¤é”™çš„æ—¶ç©ºï¼Œç¥å¥‡çš„æ¢¦å¢ƒï¼Œè®©è€äººå¾—ä»¥çŸ¥é“ä»–çš„å›å¤ï¼Œå½±å“äº†å“ªäº›äººï¼Œäº§ç”Ÿäº†å“ªäº›æ„ä¹‰ï¼›æˆ–è®¸è¨€è€…æ— æ„ï¼Œç„¶å¬è€…æœ‰å¿ƒï¼›è€äººå¿ƒé‡Œå§‹ç»ˆè°¦é€Šï¼Œè®¤çœŸçš„å¯¹å¾…æ¯ä¸ªé—®é¢˜ã€‚<br>ä»–çŸ¥é“ï¼Œæ¯ä¸ªçƒ¦æ¼å¿§æ„çš„å’¨è¯¢åé¢ï¼Œå½“äº‹è€…éƒ½æœ‰äº†ç¡®å®šçš„é€‰æ‹©ï¼Œç„¶è€Œä»–ä»¬è¿˜æ˜¯éœ€è¦æœ‰ä¸€ä¸ªå¯ä»¥å•†é‡çš„å¯¹è±¡ï¼Œè¿™æ˜¯å¿ƒé‡Œç²¾ç¥ä¸Šçš„éœ€æ±‚ã€‚ã€‚</p><p>æœ€åçš„å’¨è¯¢ï¼Œä¸€å¼ ç©ºç™½çš„ä¿¡çº¸ï¼Œè¿™æ˜¯è€çˆ·å­é‡åˆ°çš„æœ€éš¾çš„ä¸€æ¬¡å’¨è¯¢ï¼Œä¹Ÿæ˜¯æœ€åçš„ä¸€æ¬¡~ä¹‹å‰æ‰€æœ‰å’¨è¯¢çš„ä¿¡ï¼Œéƒ½æè¿°äº†å„ä¸ªå’¨è¯¢è€…çš„é—®é¢˜ã€çƒ¦æ¼ï¼Œæˆ–è€…è¿™å°±æ˜¯ä¸€å¼ åœ°å›¾ï¼Œæœ‰çº¿æœ‰æ–¹å‘ä¹Ÿæœ‰ç‚¹ï¼Œåªæ˜¯å’¨è¯¢çš„ä¸»äººå…¬ä¸çŸ¥é“æ€ä¹ˆèµ°ï¼ŒæŠ‘æˆ–æ˜¯ä¸çŸ¥é“å¾€å“ªèµ°ï¼›è€Œè¿™ç©ºç™½çš„ä¿¡çº¸ï¼Œä¸»äººå…¬å¯èƒ½è¿·èŒ«ç€ä¸çŸ¥é“è¯¥å’¨è¯¢ä»€ä¹ˆï¼Œä¸çŸ¥é“è‡ªå·±æœ‰ä»€ä¹ˆæ–¹å‘å¯å¯»ï¼Œåœ¨è€äººçœ‹æ¥ï¼Œæˆ–è®¸è¿™ç™½çº¸ï¼Œæ›´å±•ç°ç€æ›´å¤§çš„å¯èƒ½æ€§ï¼Œæ›´å¤§çš„è‡ªç”±ï¼Œä¸ºè‡ªå·±çš„ç”Ÿæ´»å»åŠªåŠ›ï¼Œé‚£å°±å¥½ã€‚</p><p>å½“æ‰€æœ‰å’¨è¯¢ä¸çƒ¦æ¼çš„æƒ…èŠ‚ä¸²è”äº†èµ·æ¥ï¼Œæ•…äº‹çš„ç„å¦™ç²¾å½©ä¸è¨€è€Œå–»ã€‚<br>ç”Ÿæ´»ä¹Ÿå¥½ï¼Œå·¥ä½œä¹Ÿç½¢ï¼Œæ¢¦æƒ³ç†æƒ³ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥å°½è‡ªå·±æœ€å¤§åŠªåŠ›çš„å®ç°ï¼Œå»è·µè¡Œ~<br>å­˜åœ¨å³æ˜¯åˆç†ï¼Œä¸å¿…å¤ªè¿‡æ‰§ç€å¿§æ„ï¼Œçæƒœå½“ä¸‹ï¼Œçæƒœçœ¼å‰äººï¼Œæˆ‘ä»¬éƒ½éœ€è¦æœ‰æ›´å¤§çš„èƒ¸æ€€å»åˆ†äº«/å»äº¤æµï¼<br><!-- end --></p><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;çœ‹è¿‡ä¸å°‘æ—¥æœ¬åŠ¨æ¼«ï¼Œä½†å¾ˆå°‘è¯»è¿‡æ—¥æœ¬ä½œè€…çš„ä¹¦ç±ï¼Œçœ‹äº†ä¸€åŠã€Šè§£å¿§æ‚è´§åº—ã€‹ï¼Œæˆ‘å·²ç»è¢«ä¸œé‡åœ­å¾çš„æ–‡å­—æŠ“è¿›å»äº†ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="è¯»ä¹¦" scheme="http://tigutf.github.io/categories/%E8%AF%BB%E4%B9%A6/"/>
    
    
      <category term="ä¸œé‡åœ­å¾" scheme="http://tigutf.github.io/tags/%E4%B8%9C%E9%87%8E%E5%9C%AD%E5%90%BE/"/>
    
  </entry>
  
  <entry>
    <title>è®¾è®¡æ¨¡å¼å­¦ä¹ ä¸€</title>
    <link href="http://tigutf.github.io/2018/11/20/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99/"/>
    <id>http://tigutf.github.io/2018/11/20/è®¾è®¡åŸåˆ™/</id>
    <published>2018-11-20T15:22:48.000Z</published>
    <updated>2019-02-01T17:41:54.444Z</updated>
    
    <content type="html"><![CDATA[<p>è¸‰è¸‰è·„è·„codingå‡ å¹´ï¼Œæ‡‚å¾—codingï¼ŒçŸ¥é“OODï¼Œæ‰æ˜ç™½æ›´åº”è¯¥å»ç†è§£é¢å‘å¯¹è±¡è®¾è®¡çš„åŸåˆ™ã€‚</p><blockquote><p>è®¾è®¡æ¨¡å¼ï¼Œæ˜¯å‰è¾ˆå¤§ç¥ä»¬ç»è¿‡å®è·µè€Œæ€»ç»“å‡ºæ¥çš„ç»éªŒã€‚ä»¥è®¾è®¡åŸåˆ™å»è®¾è®¡ç¼–ç¨‹ï¼Œä¸ºçš„å°±æ˜¯è®©ä»£ç æ›´æ˜“äºç†è§£ï¼Œä¿è¯ä»£ç çš„å¯é æ€§ï¼Œç¡®ä¿ç³»ç»Ÿé¡¹ç›®çš„æ‰©å±•æ€§ã€‚~ä»£ç ä¸æ˜¯ä¸€ä¸ªäººçš„ï¼Œè®©å¤šæ•°äººéƒ½èƒ½å»è¯»æ‡‚å’Œç†è§£ï¼Œæ‰æ˜¯å¥½ä»£ç </p></blockquote><a id="more"></a><h1 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" class="headerlink" title="è®¾è®¡åŸåˆ™"></a>è®¾è®¡åŸåˆ™</h1><p>æœ‰è¿™ä¹ˆä¸€æ®µæ¦‚æ‹¬:</p><ol><li>å•ä¸€èŒè´£åŸåˆ™å‘Šè¯‰æˆ‘ä»¬å®ç°ç±»ã€æ¥å£è¦èŒè´£å•ä¸€ï¼›</li><li>é‡Œæ°æ›¿æ¢åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ä¸è¦ç ´åç»§æ‰¿ä½“ç³»ï¼›</li><li>ä¾èµ–å€’ç½®åŸåˆ™å‘Šè¯‰æˆ‘ä»¬è¦é¢å‘æ¥å£ç¼–ç¨‹ï¼›</li><li>æ¥å£éš”ç¦»åŸåˆ™å‘Šè¯‰æˆ‘ä»¬åœ¨è®¾è®¡æ¥å£çš„æ—¶å€™è¦ç²¾ç®€å•ä¸€ï¼›</li><li>è¿ªç±³ç‰¹æ³•åˆ™å‘Šè¯‰æˆ‘ä»¬è¦é™ä½è€¦åˆï¼›</li><li>è€Œå¼€é—­åŸåˆ™æ˜¯æ€»çº²ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬è¦å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚</li></ol><h2 id="å•ä¸€èŒè´£åŸåˆ™"><a href="#å•ä¸€èŒè´£åŸåˆ™" class="headerlink" title="å•ä¸€èŒè´£åŸåˆ™"></a>å•ä¸€èŒè´£åŸåˆ™</h2><blockquote><p>Single Responsibility Principle, ç®€ç§°SRP</p></blockquote><p><strong>å•ä¸€èŒè´£åŸåˆ™çš„å®šä¹‰æ˜¯:åº”è¯¥æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåŸå› å¼•èµ·ç±»çš„å˜æ›´ï¼›</strong><br>ä»ä¸šåŠ¡è§’åº¦æ¥è¯´ï¼Œå¼•èµ·ä¸€ä¸ªæ¥å£orç±»å‘ç”Ÿå˜åŒ–çš„åŸå› ï¼Œåº”è¯¥æ˜¯ä¸€ä¸ªæœ‰é™åˆ¶çš„å•çº¯çš„æœ€å°ä¸šåŠ¡å•å…ƒï¼›</p><blockquote><p>ä¾‹å­1ï¼šRBACæ¨¡å‹ï¼ŒRole-Based Access Control,åŸºäºè§’è‰²çš„çš„è®¿é—®æ§åˆ¶ã€‚ç³»ç»Ÿç”¨æˆ·ä¿¡æ¯å®šä¹‰æ˜¯æˆ‘ä»¬æ€»é‡åˆ°çš„ä¸šåŠ¡ä¹‹ä¸€ã€‚ç”¨æˆ·ä¿¡æ¯æ¥å£ï¼Œè‹¥æˆ‘ä»¬ç›´æ¥å®šä¹‰ç”¨æˆ·å±æ€§ï¼ˆå§“åã€å¯†ç ã€æ‰€åœ¨éƒ¨é—¨ï¼‰+ ç”¨æˆ·è¡Œä¸ºï¼ˆä¿®æ”¹å§“åã€ä¿®æ”¹å¯†ç ç­‰ï¼‰åœ¨ä¸€ä¸ªæ¥å£ä¸­ï¼Œè¯¥æ¥å£åŒæ—¶æ‰¿æ‹…ç”¨æˆ·å±æ€§ä¿¡æ¯å’Œç”¨æˆ·è¡Œä¸ºçš„èŒè´£ï¼Œè¿™æ˜¯å®¹æ˜“å¼•èµ·æ··æ·†çš„ï¼Œè¿™ä¸ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™çš„ã€‚æ‹†åˆ†ä¸ºä¸¤ä¸ªæ¥å£ï¼Œä¸åŒåœºæ™¯ä¸‹ä½¿ç”¨ä¸åŒçš„æ¥å£ï¼ˆä¿¡æ¯çš„æŸ¥è¯¢å’Œæ“ä½œåˆ†å¼€ï¼‰ï¼Œå„å¸å…¶èŒï¼Œä¸€ç›®äº†ç„¶ã€‚</p><p>ä¾‹å­2ï¼šç”µè¯é€šè¯çš„ç”¨ä¾‹å®šä¹‰ï¼šæ‹¨å·ã€é€šè¯ã€å›åº”ã€æŒ‚æœºã€‚ä¸€ä¸ªæ¥å£IMobileå°†ç”µè¯é€šè¯å…¨æ¶µç›–ã€‚çœ‹ä¼¼å¯ä»¥ï¼Œä½†åŒ…å«ä¸¤å±‚èŒè´£ï¼ša.æ‹¨å·å’ŒæŒ‚æ–­ï¼Œè¿™æ˜¯é€šè¯åè®®ç®¡ç†; b.é€šè¯å›åº”åˆ™æ˜¯æ•°æ®ä¼ é€ã€‚å®é™…ä¸šåŠ¡ï¼Œè¿™ä¸¤å±‚èŒè´£ç›¸å…³è”ï¼Œè‹¥ä¸¤ä¸ªæ¥å£ä¸¤ä¸ªç±»ï¼Œä¸€ä¸ªç”µè¯è¦ä¸¤ä¸ªç±»æ¥ç»„åˆå®šä¹‰ï¼Œå¼ºè€¦åˆå…³ç³»ï¼Œå¢åŠ äº†ç±»çš„å¤æ‚åº¦ï¼Œè¿™ä¼¼ä¹ä¹Ÿä¸å¤ªåˆç†ã€‚æ¢ç§è§’åº¦ï¼Œä¸¤ç§èŒè´£ï¼Œå®šä¹‰ä¸¤ä¸ªæ¥å£ï¼Œç”±ä¸€ä¸ªç”µè¯ç±»å®ç°è¿™ä¸¤ä¸ªæ¥å£ï¼Œå°†ä¸¤ä¸ªèŒè´£èåˆåœ¨ä¸€ä¸ªç±»ä¸­ã€‚å¯¹å¤–å‘å¸ƒä»…ä»…æ˜¯æ¥å£ï¼Œè€Œéå®ç°ç±»ï¼Œè¿™æ ·ä¹Ÿä½“ç°äº†æ¥å£çš„å•ä¸€èŒè´£ã€‚</p></blockquote><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹å•ä¸€èŒè´£åŸåˆ™æœ‰ä»€ä¹ˆå¥½å¤„ï¼š</p><ul><li>ç±»çš„å¤æ‚æ€§é™ä½ï¼Œå®ç°ä»€ä¹ˆèŒè´£éƒ½æœ‰æ¸…æ™°æ˜ç¡®çš„å®šä¹‰ï¼›</li><li>å¯è¯»æ€§æé«˜ï¼Œå¤æ‚æ€§é™ä½ï¼Œé‚£å½“ç„¶å¯è¯»æ€§æé«˜äº†ï¼›</li><li>å¯ç»´æŠ¤æ€§æé«˜ï¼Œå¯è¯»æ€§æé«˜ï¼Œé‚£å½“ç„¶æ›´å®¹æ˜“ç»´æŠ¤äº†ï¼›</li><li>å˜æ›´å¼•èµ·çš„é£é™©é™ä½ï¼Œå˜æ›´æ˜¯å¿…ä¸å¯å°‘çš„ï¼Œå¦‚æœæ¥å£çš„å•ä¸€èŒè´£åšå¾—å¥½ï¼Œä¸€ä¸ªæ¥å£ä¿®æ”¹åªå¯¹ç›¸åº”çš„å®ç°ç±»æœ‰å½±å“ï¼Œå¯¹å…¶ä»–çš„æ¥å£æ— å½±å“ï¼Œè¿™å¯¹ç³»ç»Ÿçš„æ‰©å±•æ€§ã€ç»´æŠ¤æ€§éƒ½æœ‰éå¸¸å¤§çš„å¸®åŠ©ã€‚</li></ul><p><strong><em>å•ä¸€èŒè´£åŸåˆ™æå‡ºäº†ä¸€ä¸ªç¼–å†™ç¨‹åºçš„æ ‡å‡†ï¼Œç”¨â€œèŒè´£â€æˆ–â€œå˜åŒ–åŸå› â€æ¥è¡¡é‡æ¥å£æˆ– ç±»è®¾è®¡å¾—æ˜¯å¦ä¼˜è‰¯ï¼Œä½†æ˜¯â€œèŒè´£â€å’Œâ€œå˜åŒ–åŸå› â€éƒ½æ˜¯ä¸å¯åº¦é‡çš„ï¼Œå› é¡¹ç›®è€Œå¼‚ï¼Œå› ç¯å¢ƒè€Œå¼‚ã€‚å…·ä½“ä¸šåŠ¡éœ€æ±‚å…·ä½“åˆ†æï¼Œçµæ´»è½¬å˜ã€‚</em></strong></p><h2 id="é‡Œæ°æ›¿æ¢åŸåˆ™"><a href="#é‡Œæ°æ›¿æ¢åŸåˆ™" class="headerlink" title="é‡Œæ°æ›¿æ¢åŸåˆ™"></a>é‡Œæ°æ›¿æ¢åŸåˆ™</h2><blockquote><p>Liskov Substitution Principleï¼ŒLSP</p></blockquote><ul><li><p>ç¬¬ä¸€ç§å®šä¹‰ï¼Œä¹Ÿæ˜¯æœ€æ­£å®—çš„å®šä¹‰ï¼šIf for each object o1 of type S there is an object o2 of type T such that for all programs P defined in terms of T,the behavior of P is unchanged when o1 is substituted for o2 then S is a subtype of T.ï¼ˆå¦‚æœå¯¹æ¯ä¸€ä¸ªç±»å‹ä¸ºSçš„å¯¹è±¡o1ï¼Œéƒ½æœ‰ç±»å‹ä¸ºTçš„å¯¹ è±¡o2ï¼Œä½¿å¾—ä»¥Tå®šä¹‰çš„æ‰€æœ‰ç¨‹åºPåœ¨æ‰€æœ‰çš„å¯¹è±¡o1éƒ½ä»£æ¢æˆo2æ—¶ï¼Œç¨‹åºPçš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç±»å‹Sæ˜¯ç±»å‹Tçš„å­ç±»å‹ã€‚ï¼‰</p></li><li><p>ç¬¬äºŒç§å®šä¹‰ï¼šFunctions that use pointers or references to base classes must be able to use objects of derived classes without knowing it.ï¼ˆæ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°æ–¹å¿…é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„<br>å¯¹è±¡ã€‚ï¼‰</p></li></ul><h2 id="ä¾èµ–å€’ç½®åŸåˆ™"><a href="#ä¾èµ–å€’ç½®åŸåˆ™" class="headerlink" title="ä¾èµ–å€’ç½®åŸåˆ™"></a>ä¾èµ–å€’ç½®åŸåˆ™</h2><h2 id="æ¥å£éš”ç¦»åŸåˆ™"><a href="#æ¥å£éš”ç¦»åŸåˆ™" class="headerlink" title="æ¥å£éš”ç¦»åŸåˆ™"></a>æ¥å£éš”ç¦»åŸåˆ™</h2><h2 id="è¿ªç±³ç‰¹æ³•åˆ™"><a href="#è¿ªç±³ç‰¹æ³•åˆ™" class="headerlink" title="è¿ªç±³ç‰¹æ³•åˆ™"></a>è¿ªç±³ç‰¹æ³•åˆ™</h2><h2 id="å¼€é—­åŸåˆ™"><a href="#å¼€é—­åŸåˆ™" class="headerlink" title="å¼€é—­åŸåˆ™"></a>å¼€é—­åŸåˆ™</h2><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¸‰è¸‰è·„è·„codingå‡ å¹´ï¼Œæ‡‚å¾—codingï¼ŒçŸ¥é“OODï¼Œæ‰æ˜ç™½æ›´åº”è¯¥å»ç†è§£é¢å‘å¯¹è±¡è®¾è®¡çš„åŸåˆ™ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è®¾è®¡æ¨¡å¼ï¼Œæ˜¯å‰è¾ˆå¤§ç¥ä»¬ç»è¿‡å®è·µè€Œæ€»ç»“å‡ºæ¥çš„ç»éªŒã€‚ä»¥è®¾è®¡åŸåˆ™å»è®¾è®¡ç¼–ç¨‹ï¼Œä¸ºçš„å°±æ˜¯è®©ä»£ç æ›´æ˜“äºç†è§£ï¼Œä¿è¯ä»£ç çš„å¯é æ€§ï¼Œç¡®ä¿ç³»ç»Ÿé¡¹ç›®çš„æ‰©å±•æ€§ã€‚~ä»£ç ä¸æ˜¯ä¸€ä¸ªäººçš„ï¼Œè®©å¤šæ•°äººéƒ½èƒ½å»è¯»æ‡‚å’Œç†è§£ï¼Œæ‰æ˜¯å¥½ä»£ç &lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Design pattern" scheme="http://tigutf.github.io/categories/Design-pattern/"/>
    
    
      <category term="è®¾è®¡åŸåˆ™|é¢å‘å¯¹è±¡" scheme="http://tigutf.github.io/tags/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"/>
    
  </entry>
  
  <entry>
    <title>ç­–ç•¥æ¨¡å¼--å®ç°è§„åˆ™é…ç½®ä»¥å¤„ç†ä»»åŠ¡</title>
    <link href="http://tigutf.github.io/2018/11/05/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F-%E5%AE%9E%E7%8E%B0%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE%E5%A4%84%E7%90%86/"/>
    <id>http://tigutf.github.io/2018/11/05/ç­–ç•¥æ¨¡å¼-å®ç°è§„åˆ™é…ç½®å¤„ç†/</id>
    <published>2018-11-05T15:22:48.000Z</published>
    <updated>2019-01-14T15:35:15.523Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to my T-SPACE~</p><p>ç”±äºä¸šåŠ¡éœ€æ±‚ï¼Œä¼šæœ‰ä¸åŒæ¸ é“çš„ä¿¡æ¯ç»„åˆï¼Œç°æœ‰ç³»ç»Ÿè®¾è®¡è€¦åˆåº¦å¤ªé«˜ï¼Œä¸å¥½æ‰©å±•ã€‚æ‰€ä»¥å¯¹æ­¤è¿›è¡Œé‡æ„ï¼Œæ·»åŠ è§„åˆ™é…ç½®ï¼Œä»¥åº”å¯¹ä¸åŒç»„åˆçš„éœ€æ±‚ä¿¡æ¯è·å–å’Œæ‰§è¡Œã€‚è¿™é‡Œè¾¹ç”¨åˆ°äº†ç­–ç•¥æ¨¡å¼ã€‚</p><a id="more"></a><h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><h3 id="ç­–ç•¥æ¨¡å¼çš„æ¦‚å¿µ"><a href="#ç­–ç•¥æ¨¡å¼çš„æ¦‚å¿µ" class="headerlink" title="ç­–ç•¥æ¨¡å¼çš„æ¦‚å¿µ"></a>ç­–ç•¥æ¨¡å¼çš„æ¦‚å¿µ</h3><p>å¼•ç”¨é˜å®åšå£«çš„ã€ŠJAVAä¸æ¨¡å¼ã€‹ä¸€ä¹¦æè¿°ï¼šç­–ç•¥æ¨¡å¼å±äºå¯¹è±¡çš„è¡Œä¸ºæ¨¡å¼ã€‚å…¶ç”¨æ„æ˜¯é’ˆå¯¹ä¸€ç»„ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…åˆ°å…·æœ‰å…±åŒæ¥å£çš„ç‹¬ç«‹çš„ç±»ä¸­ï¼Œä»è€Œä½¿å¾—å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼ä½¿å¾—ç®—æ³•å¯ä»¥åœ¨ä¸å½±å“åˆ°å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹å‘ç”Ÿå˜åŒ–ã€‚</p><h3 id="å®ç°åŸç†"><a href="#å®ç°åŸç†" class="headerlink" title="å®ç°åŸç†"></a>å®ç°åŸç†</h3><p>é¢å‘å¯¹è±¡ç¼–ç¨‹æœ‰ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€‚</p><ol><li>å°è£…â€“éšè—äº†ç±»çš„å†…éƒ¨å®ç°æœºåˆ¶ï¼Œå¯¹å¤–åªæš´éœ²ç›¸å…³çš„è®¿é—®æ–¹æ³•ï¼Œå†…éƒ¨å®ç°ç»†èŠ‚å¯¹å¤–æ˜¯ä¸å¯çŸ¥çš„ã€‚</li><li>ç»§æ‰¿â€“å¯¹çˆ¶ç±»ä»£ç çš„é‡ç”¨ã€‚</li><li>å¤šæ€â€“åœ¨ç¨‹åºä¸­å®šä¹‰çš„å¼•ç”¨å˜é‡æ‰€æŒ‡å‘çš„å…·ä½“ç±»å‹ï¼Œä»¥åŠé€šè¿‡è¯¥å˜é‡è€ŒæŒ‡å‘çš„æ–¹æ³•è°ƒç”¨æœ‰ä¸åŒç§ç±»å‹/å®ç°ï¼ˆå¤šç§å½¢æ€ï¼‰ï¼Œå…·ä½“å¼•ç”¨äº†ä»€ä¹ˆæ–¹æ³•è¦åœ¨ç¨‹åºè¿è¡Œæ—¶ä¾æ®å…·ä½“æŒ‡å‘çš„å®ä¾‹å¯¹è±¡æ¥å†³å®šã€‚å› ä¸ºåœ¨ç¨‹åºè¿è¡Œæ—¶æ‰ç¡®å®šå…·ä½“çš„ç±»ï¼Œè¿™æ ·ï¼Œä¸ç”¨ä¿®æ”¹æºç¨‹åºä»£ç ï¼Œå°±å¯ä»¥è®©å¼•ç”¨å˜é‡ç»‘å®šåˆ°å„ç§ä¸åŒçš„ç±»å®ç°ä¸Šï¼Œä»è€Œå¯¼è‡´è¯¥å¼•ç”¨è°ƒç”¨çš„å…·ä½“æ–¹æ³•éšä¹‹æ”¹å˜ï¼Œå³ä¸ä¿®æ”¹ç¨‹åºä»£ç å°±å¯ä»¥æ”¹å˜ç¨‹åºè¿è¡Œæ—¶æ‰€ç»‘å®šçš„å…·ä½“ä»£ç ï¼Œè®©ç¨‹åºå¯ä»¥é€‰æ‹©å¤šä¸ªè¿è¡ŒçŠ¶æ€ï¼Œè¿™å°±æ˜¯å¤šæ€æ€§ã€‚</li></ol><p>è¯¥ç­–ç•¥æ¨¡å¼çš„å®ç°ä¹Ÿæ˜¯åˆ©ç”¨äº†å¤šæ€çš„è¿™ä¸€ç‰¹æ€§ã€‚</p><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><h3 id="æ¥å£ç±»"><a href="#æ¥å£ç±»" class="headerlink" title="æ¥å£ç±»"></a>æ¥å£ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProcessStrategy</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> result ç»“æœé›†</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> params å‚æ•°é›†</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key ç»“æœé›†æ˜ å°„key</span></span><br><span class="line"><span class="comment">     * */</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">operate</span><span class="params">(Map result, List&lt;T&gt; params, String key)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">`</span><br></pre></td></tr></table></figure><h3 id="æ¥å£å®ç°"><a href="#æ¥å£å®ç°" class="headerlink" title="æ¥å£å®ç°"></a>æ¥å£å®ç°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AtestProcess</span> <span class="keyword">implements</span> <span class="title">ProcessStrategy</span>&lt;<span class="title">String</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operate</span><span class="params">(Map result, List&lt;String&gt; params, String key)</span> </span>&#123;</span><br><span class="line">        System.out.println(params.get(<span class="number">0</span>));</span><br><span class="line">        <span class="comment">//TODO ç®—æ³•é€»è¾‘</span></span><br><span class="line">        result.put(key,<span class="string">"A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AtestProcess</span> <span class="keyword">implements</span> <span class="title">ProcessStrategy</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">operate</span><span class="params">(Map result, List&lt;Integer&gt; params, String key)</span> </span>&#123;</span><br><span class="line">        System.out.println(params.get(<span class="number">0</span>));</span><br><span class="line">        <span class="comment">//TODO ç®—æ³•é€»è¾‘</span></span><br><span class="line">        result.put(key,<span class="string">"B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®šä¹‰å·¥å‚ç±»"><a href="#å®šä¹‰å·¥å‚ç±»" class="headerlink" title="å®šä¹‰å·¥å‚ç±»"></a>å®šä¹‰å·¥å‚ç±»</h3><p>å®šä¹‰Factoryï¼Œç¨‹åºè¿è¡Œä¸­é€šè¿‡è¯¥ç±»è·å–å…·ä½“å®ä¾‹å¯¹è±¡ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProcessFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ProcessStrategy instance = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ProcessStrategy <span class="title">getInstance</span><span class="params">(String clzName)</span></span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            instance = (ProcessStrategy)Class.forName(clzName).newInstance();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            System.out.println(<span class="string">"Class not found.check the param 'clzName'. "</span>);</span><br><span class="line">            <span class="keyword">return</span>  <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="æšä¸¾é…ç½®"><a href="#æšä¸¾é…ç½®" class="headerlink" title="æšä¸¾é…ç½®"></a>æšä¸¾é…ç½®</h3><p>é€šè¿‡ä»¥ä¸Šä»£ç ï¼Œç­–ç•¥æ¨¡å¼ç›¸å…³çš„å®ç°å¤§è‡´å®Œæˆï¼Œå…·ä½“ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ProcessFactoryå³å¯è·å–ä¸åŒç­–ç•¥çš„å®ç°æ–¹æ³•ï¼Œè€Œè¦å®ç°é…ç½®åŒ–ï¼Œè‡ªåŠ¨è£…è½½é…ç½®ä»¥åº”å¯¹ä¸åŒçš„åœºæ™¯é€»è¾‘ï¼Œè¿˜éœ€è¦å®ç°å®šä¹‰å¥½æˆ‘ä»¬çš„é…ç½®æšä¸¾ç±»ï¼ˆé…ç½®è¡¨ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> TypeEnum &#123;</span><br><span class="line"></span><br><span class="line">    TYPE_ENUM_A(<span class="string">"A"</span>,<span class="string">"com..impl.AtestProcess"</span>),</span><br><span class="line">    TYPE_ENUM_B(<span class="string">"B"</span>,<span class="string">"com..impl.BtestProcess"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String key ;</span><br><span class="line">    <span class="keyword">private</span>  String value;</span><br><span class="line"></span><br><span class="line">    TypeEnum(String key, String value) &#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getValue</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (TypeEnum typeEnum : TypeEnum.values())&#123;</span><br><span class="line">            <span class="keyword">if</span> (typeEnum.key.equalsIgnoreCase(key))&#123;</span><br><span class="line">                <span class="keyword">return</span> typeEnum.value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">HelloTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">        Map&lt;String,Object&gt; result = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        List params = Arrays.asList(<span class="string">"1"</span>,<span class="string">"3"</span>,<span class="string">"12"</span>);</span><br><span class="line">        String className = TypeEnum.getValue(<span class="string">"A"</span>);</span><br><span class="line">        ProcessStrategy ps = ProcessFactory.getInstance(className);</span><br><span class="line">        ps.operate(result, params, <span class="string">"testA"</span>);</span><br><span class="line">        String className = TypeEnum.getValue(<span class="string">"B"</span>);</span><br><span class="line">        ps = ProcessFactory.getInstance(className);</span><br><span class="line">        ps.operate(result, params, <span class="string">"testB"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>ä¸šåŠ¡åœºæ™¯ä¸­éœ€è¦èµ°Aè¿˜æ˜¯èµ°Bï¼Œå°†æ¡ä»¶è®°å½•äºæ•°æ®åº“/ç¼“å­˜redis/propertyæ–‡ä»¶ä¸­ï¼Œå½“ç¨‹åºè¿è¡Œæ—¶å†å’ŒTypeEnumä¸­åŒ¹é…ï¼Œé€šè¿‡ProcessFactoryæ•è·ç›¸åº”çš„å®ä¾‹å¯¹è±¡æ¥å¤„ç†ã€‚å½“ä¸šåŠ¡æ‰©å±•ï¼Œç­–ç•¥å¢å¤šï¼Œæˆ‘ä»¬åªéœ€è¦æ·»åŠ å…·ä½“çš„æ¥å£å®ç°ï¼Œå¦å¤–é…ç½®æšä¸¾å¯¹åº”ï¼Œè€Œä¸å½±å“åŸæ¥ä»£ç çš„ä¸»ä¸šåŠ¡æ‰§è¡Œã€‚</p><p><strong>ç­–ç•¥æ¨¡å¼ä¸€æ–¹é¢ä¹Ÿå¸®æˆ‘ä»¬å‡å°‘äº†if/elseä»£ç å—è¿‡å¤šè€Œå¸¦æ¥çš„sonaré—®é¢˜ã€‚</strong></p><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to my T-SPACE~&lt;/p&gt;
&lt;p&gt;ç”±äºä¸šåŠ¡éœ€æ±‚ï¼Œä¼šæœ‰ä¸åŒæ¸ é“çš„ä¿¡æ¯ç»„åˆï¼Œç°æœ‰ç³»ç»Ÿè®¾è®¡è€¦åˆåº¦å¤ªé«˜ï¼Œä¸å¥½æ‰©å±•ã€‚æ‰€ä»¥å¯¹æ­¤è¿›è¡Œé‡æ„ï¼Œæ·»åŠ è§„åˆ™é…ç½®ï¼Œä»¥åº”å¯¹ä¸åŒç»„åˆçš„éœ€æ±‚ä¿¡æ¯è·å–å’Œæ‰§è¡Œã€‚è¿™é‡Œè¾¹ç”¨åˆ°äº†ç­–ç•¥æ¨¡å¼ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Design pattern" scheme="http://tigutf.github.io/categories/Design-pattern/"/>
    
    
      <category term="Java|æ¨¡å¼|å¤šæ€" scheme="http://tigutf.github.io/tags/Java-%E6%A8%A1%E5%BC%8F-%E5%A4%9A%E6%80%81/"/>
    
  </entry>
  
  <entry>
    <title>ä»0å¼€å§‹çš„å°ç¨‹åºä¹‹æ—…</title>
    <link href="http://tigutf.github.io/2018/10/18/%E4%BB%8E0%E5%BC%80%E5%A7%8B%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8B%E6%97%85/"/>
    <id>http://tigutf.github.io/2018/10/18/ä»0å¼€å§‹å°ç¨‹åºä¹‹æ—…/</id>
    <published>2018-10-18T14:49:48.000Z</published>
    <updated>2019-01-14T15:34:02.344Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to T-SPACE~<br>æœ¬æ–‡å°†ä»‹ç»å°ç¨‹åºçš„å°ç™½å…¥æ‰‹ï¼Œä»å°ç¨‹åºçš„ç”³è¯·åˆ°å°ç¨‹åºçš„å¼€å‘ï¼Œä¸€èµ·å…¥é—¨ï¼</p><a id="more"></a><h3 id="å¼€å‘å·¥å…·"><a href="#å¼€å‘å·¥å…·" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h3><p><img src="https://i.imgur.com/yUH2STN.png" alt=""></p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html?t=18092022" target="_blank" rel="noopener">å¼€å‘è€…å·¥å…·</a></p><ol><li>å¾®ä¿¡çš„å¼€å‘è€…å·¥å…·éœ€è¦å¾®ä¿¡æ‰«æç™»é™†åæ‰èƒ½æ‰“å¼€ã€‚</li><li>æ–°å»ºé¡¹ç›®é€‰æ‹©å°ç¨‹åºé¡¹ç›®ï¼Œé€‰æ‹©ä»£ç å­˜æ”¾çš„ç¡¬ç›˜è·¯å¾„ï¼Œå¡«å…¥åˆšåˆšç”³è¯·åˆ°çš„å°ç¨‹åºçš„ AppIDï¼Œç»™ä½ çš„é¡¹ç›®èµ·ä¸ªåå­—ï¼Œæœ€åï¼Œå‹¾é€‰ â€œåˆ›å»º QuickStart é¡¹ç›®â€ ï¼ˆæ³¨æ„: ä½ è¦é€‰æ‹©ä¸€ä¸ªç©ºçš„ç›®å½•æ‰ä¼šæœ‰è¿™ä¸ªé€‰é¡¹ï¼‰ï¼Œç‚¹å‡»ç¡®å®šï¼Œä½ å°±å¾—åˆ°äº†ä½ çš„ç¬¬ä¸€ä¸ªå°ç¨‹åºäº†ã€‚</li><li>ç‚¹å‡»å·¥å…·ä¸Šçš„ç¼–è¯‘æŒ‰é’®ï¼Œå¯ä»¥åœ¨å·¥å…·çš„å·¦ä¾§æ¨¡æ‹Ÿå™¨ç•Œé¢çœ‹åˆ°è¿™ä¸ªå°ç¨‹åºçš„è¡¨ç°ï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»é¢„è§ˆæŒ‰é’®ï¼Œé€šè¿‡å¾®ä¿¡çš„æ‰«ä¸€æ‰«åœ¨æ‰‹æœºä¸Šä½“éªŒä½ çš„ç¬¬ä¸€ä¸ªå°ç¨‹åºã€‚</li></ol><h3 id="å°ç¨‹åºç»“æ„"><a href="#å°ç¨‹åºç»“æ„" class="headerlink" title="å°ç¨‹åºç»“æ„"></a>å°ç¨‹åºç»“æ„</h3><p><img src="https://i.imgur.com/cLt5aLE.png" alt=""></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- pages --&gt; å°ç¨‹åºæ‰€æœ‰é¡µé¢å­˜æ”¾çš„æ–‡ä»¶å¤¹</span><br><span class="line">- libs  --&gt; å¼•è¿›çš„jsåº“</span><br><span class="line">- img   --&gt; å›¾ç‰‡æ–‡ä»¶å¤¹</span><br><span class="line"><span class="number">1.</span> app.json // åç¼€çš„ JSON é…ç½®æ–‡ä»¶</span><br><span class="line"><span class="number">2.</span> app.wxml // åç¼€çš„ WXML æ¨¡æ¿æ–‡ä»¶</span><br><span class="line"><span class="number">3.</span> app.wxss // åç¼€çš„ WXSS æ ·å¼æ–‡ä»¶</span><br><span class="line"><span class="number">4.</span> app.js   // åç¼€çš„ JS è„šæœ¬é€»è¾‘æ–‡ä»¶</span><br></pre></td></tr></table></figure><h4 id="å°ç¨‹åºé…ç½®-app-json"><a href="#å°ç¨‹åºé…ç½®-app-json" class="headerlink" title="å°ç¨‹åºé…ç½® app.json"></a>å°ç¨‹åºé…ç½® app.json</h4><p>app.json æ˜¯å½“å‰å°ç¨‹åºçš„å…¨å±€é…ç½®ï¼ŒåŒ…æ‹¬äº†å°ç¨‹åºçš„æ‰€æœ‰é¡µé¢è·¯å¾„ã€ç•Œé¢è¡¨ç°ã€ç½‘ç»œè¶…æ—¶æ—¶é—´ã€åº•éƒ¨ tab ç­‰ã€‚QuickStart é¡¹ç›®é‡Œè¾¹çš„ app.json é…ç½®å†…å®¹å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&amp;#123;</span><br><span class="line">  &quot;pages&quot;:[</span><br><span class="line">    &quot;pages/index/index&quot;,</span><br><span class="line">    &quot;pages/logs/logs&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;window&quot;:&amp;#123;</span><br><span class="line">    &quot;backgroundTextStyle&quot;:&quot;light&quot;,</span><br><span class="line">    &quot;navigationBarBackgroundColor&quot;: &quot;#fff&quot;,</span><br><span class="line">    &quot;navigationBarTitleText&quot;: &quot;WeChat&quot;,</span><br><span class="line">    &quot;navigationBarTextStyle&quot;:&quot;black&quot;</span><br><span class="line">  &amp;#125;</span><br><span class="line">&amp;#125;</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬ç®€å•è¯´ä¸€ä¸‹è¿™ä¸ªé…ç½®å„ä¸ªé¡¹çš„å«ä¹‰:</p><ul><li>pageså­—æ®µ â€”â€” ç”¨äºæè¿°å½“å‰å°ç¨‹åºæ‰€æœ‰é¡µé¢è·¯å¾„ï¼Œè¿™æ˜¯ä¸ºäº†è®©å¾®ä¿¡å®¢æˆ·ç«¯çŸ¥é“å½“å‰ä½ çš„å°ç¨‹åºé¡µé¢å®šä¹‰åœ¨å“ªä¸ªç›®å½•ã€‚</li><li>windowå­—æ®µ â€”â€” å®šä¹‰å°ç¨‹åºæ‰€æœ‰é¡µé¢çš„é¡¶éƒ¨èƒŒæ™¯é¢œè‰²ï¼Œæ–‡å­—é¢œè‰²å®šä¹‰ç­‰ã€‚<br>å…¶ä»–é…ç½®é¡¹ç»†èŠ‚å¯ä»¥å‚è€ƒ<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/config.html" target="_blank" rel="noopener">å°ç¨‹åºçš„é…ç½® app.json</a>ã€‚</li></ul><h4 id="å·¥å…·é…ç½®-project-config-json"><a href="#å·¥å…·é…ç½®-project-config-json" class="headerlink" title="å·¥å…·é…ç½® project.config.json"></a>å·¥å…·é…ç½® project.config.json</h4><p>é€šå¸¸å¤§å®¶åœ¨ä½¿ç”¨ä¸€ä¸ªå·¥å…·çš„æ—¶å€™ï¼Œéƒ½ä¼šé’ˆå¯¹å„è‡ªå–œå¥½åšä¸€äº›ä¸ªæ€§åŒ–é…ç½®ï¼Œä¾‹å¦‚ç•Œé¢é¢œè‰²ã€ç¼–è¯‘é…ç½®ç­‰ç­‰ï¼Œå½“ä½ æ¢äº†å¦å¤–ä¸€å°ç”µè„‘é‡æ–°å®‰è£…å·¥å…·çš„æ—¶å€™ï¼Œä½ è¿˜è¦é‡æ–°é…ç½®ã€‚<br>è€ƒè™‘åˆ°è¿™ç‚¹ï¼Œå°ç¨‹åºå¼€å‘è€…å·¥å…·åœ¨æ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•éƒ½ä¼šç”Ÿæˆä¸€ä¸ª project.config.jsonï¼Œä½ åœ¨å·¥å…·ä¸Šåšçš„ä»»ä½•é…ç½®éƒ½ä¼šå†™å…¥åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå½“ä½ é‡æ–°å®‰è£…å·¥å…·æˆ–è€…æ¢ç”µè„‘å·¥ä½œæ—¶ï¼Œä½ åªè¦è½½å…¥åŒä¸€ä¸ªé¡¹ç›®çš„ä»£ç åŒ…ï¼Œå¼€å‘è€…å·¥å…·å°±è‡ªåŠ¨ä¼šå¸®ä½ æ¢å¤åˆ°å½“æ—¶ä½ å¼€å‘é¡¹ç›®æ—¶çš„ä¸ªæ€§åŒ–é…ç½®ï¼Œå…¶ä¸­ä¼šåŒ…æ‹¬ç¼–è¾‘å™¨çš„é¢œè‰²ã€ä»£ç ä¸Šä¼ æ—¶è‡ªåŠ¨å‹ç¼©ç­‰ç­‰ä¸€ç³»åˆ—é€‰é¡¹ã€‚</p><h4 id="é¡µé¢é…ç½®-page-json"><a href="#é¡µé¢é…ç½®-page-json" class="headerlink" title="é¡µé¢é…ç½® page.json"></a>é¡µé¢é…ç½® page.json</h4><p>ä¸ä¸Šé¢çš„app.jsonç±»ä¼¼ï¼Œä½†æ˜¯æ˜¯é’ˆå¯¹å…·ä½“æŸä¸€ä¸ªé¡µé¢çš„ï¼Œè®©å¼€å‘è€…å¯ä»¥ç‹¬ç«‹å®šä¹‰æ¯ä¸ªé¡µé¢çš„ä¸€äº›å±æ€§ã€‚</p><h4 id="WXML-æ¨¡æ¿"><a href="#WXML-æ¨¡æ¿" class="headerlink" title="WXML æ¨¡æ¿"></a>WXML æ¨¡æ¿</h4><ol><li>ç¼–å†™ç½‘é¡µæ—¶æˆ‘ä»¬ç»å¸¸éƒ½æ˜¯é‡‡ç”¨HTML+CSS+JSçš„ç»„åˆï¼Œè€ŒWXMLå°±ç›¸å½“äºhtmlï¼Œç”¨æ¥æè¿°å½“å‰è¿™ä¸ªé¡µé¢çš„ç»“æ„ã€‚</li><li>åœ¨ç½‘é¡µçš„ä¸€èˆ¬å¼€å‘æµç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€šè¿‡ JS æ“ä½œ DOM (å¯¹åº” HTML çš„æè¿°äº§ç”Ÿçš„æ ‘)ï¼Œä»¥å¼•èµ·ç•Œé¢çš„ä¸€äº›å˜åŒ–å“åº”ç”¨æˆ·çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·ç‚¹å‡»æŸä¸ªæŒ‰é’®çš„æ—¶å€™ï¼ŒJS ä¼šè®°å½•ä¸€äº›çŠ¶æ€åˆ° JS å˜é‡é‡Œè¾¹ï¼ŒåŒæ—¶é€šè¿‡ DOM API æ“æ§ DOM çš„å±æ€§æˆ–è€…è¡Œä¸ºï¼Œè¿›è€Œå¼•èµ·ç•Œé¢ä¸€äº›å˜åŒ–ã€‚å½“é¡¹ç›®è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œä½ çš„ä»£ç ä¼šå……æ–¥ç€éå¸¸å¤šçš„ç•Œé¢äº¤äº’é€»è¾‘å’Œç¨‹åºçš„å„ç§çŠ¶æ€å˜é‡ï¼Œæ˜¾ç„¶è¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€å‘æ¨¡å¼ï¼Œå› æ­¤å°±æœ‰äº† MVVM çš„å¼€å‘æ¨¡å¼ï¼ˆä¾‹å¦‚ React, Vueï¼‰ï¼Œæå€¡æŠŠæ¸²æŸ“å’Œé€»è¾‘åˆ†ç¦»ã€‚ç®€å•æ¥è¯´å°±æ˜¯ä¸è¦å†è®© JS ç›´æ¥æ“æ§ DOMï¼ŒJS åªéœ€è¦ç®¡ç†çŠ¶æ€å³å¯ï¼Œç„¶åå†é€šè¿‡ä¸€ç§æ¨¡æ¿è¯­æ³•æ¥æè¿°çŠ¶æ€å’Œç•Œé¢ç»“æ„çš„å…³ç³»å³å¯ã€‚<br>å°ç¨‹åºçš„æ¡†æ¶ä¹Ÿæ˜¯ç”¨åˆ°äº†è¿™ä¸ªæ€è·¯ï¼Œå¦‚æœä½ éœ€è¦æŠŠä¸€ä¸ª Hello World çš„å­—ç¬¦ä¸²æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šã€‚<br>WXML æ˜¯è¿™ä¹ˆå†™ :<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;text&gt;&amp;#123;&amp;#123;msg&amp;#125;&amp;#125;&lt;/text&gt;</span><br></pre></td></tr></table></figure></li></ol><p>JS åªéœ€è¦ç®¡ç†çŠ¶æ€å³å¯:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.setData(&amp;#123; msg: &quot;Hello World&quot; &amp;#125;)</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡ &#123;&#123; &#125;&#125; çš„è¯­æ³•æŠŠä¸€ä¸ªå˜é‡ç»‘å®šåˆ°ç•Œé¢ä¸Šï¼Œæˆ‘ä»¬ç§°ä¸ºæ•°æ®ç»‘å®šã€‚ä»…ä»…é€šè¿‡æ•°æ®ç»‘å®šè¿˜ä¸å¤Ÿå®Œæ•´çš„æè¿°çŠ¶æ€å’Œç•Œé¢çš„å…³ç³»ï¼Œè¿˜éœ€è¦ if/else, forç­‰æ§åˆ¶èƒ½åŠ›ï¼Œåœ¨å°ç¨‹åºé‡Œè¾¹ï¼Œè¿™äº›æ§åˆ¶èƒ½åŠ›éƒ½ç”¨ wx: å¼€å¤´çš„å±æ€§æ¥è¡¨è¾¾ã€‚</p><h4 id="WXSS-æ ·å¼"><a href="#WXSS-æ ·å¼" class="headerlink" title="WXSS æ ·å¼"></a>WXSS æ ·å¼</h4><p>WXSS å…·æœ‰ CSS å¤§éƒ¨åˆ†çš„ç‰¹æ€§ï¼Œå°ç¨‹åºåœ¨ WXSS ä¹Ÿåšäº†ä¸€äº›æ‰©å……å’Œä¿®æ”¹ã€‚<br>æ–°å¢äº†å°ºå¯¸å•ä½ã€‚åœ¨å†™ CSS æ ·å¼æ—¶ï¼Œå¼€å‘è€…éœ€è¦è€ƒè™‘åˆ°æ‰‹æœºè®¾å¤‡çš„å±å¹•ä¼šæœ‰ä¸åŒçš„å®½åº¦å’Œè®¾å¤‡åƒç´ æ¯”ï¼Œé‡‡ç”¨ä¸€äº›æŠ€å·§æ¥æ¢ç®—ä¸€äº›åƒç´ å•ä½ã€‚WXSS åœ¨åº•å±‚æ”¯æŒæ–°çš„å°ºå¯¸å•ä½ rpx ï¼Œå¼€å‘è€…å¯ä»¥å…å»æ¢ç®—çš„çƒ¦æ¼ï¼Œåªè¦äº¤ç»™å°ç¨‹åºåº•å±‚æ¥æ¢ç®—å³å¯ï¼Œç”±äºæ¢ç®—é‡‡ç”¨çš„æµ®ç‚¹æ•°è¿ç®—ï¼Œæ‰€ä»¥è¿ç®—ç»“æœä¼šå’Œé¢„æœŸç»“æœæœ‰ä¸€ç‚¹ç‚¹åå·®ã€‚<br>æä¾›äº†å…¨å±€çš„æ ·å¼å’Œå±€éƒ¨æ ·å¼ã€‚å’Œå‰è¾¹ app.json, page.json çš„æ¦‚å¿µç›¸åŒï¼Œä½ å¯ä»¥å†™ä¸€ä¸ª app.wxss ä½œä¸ºå…¨å±€æ ·å¼ï¼Œä¼šä½œç”¨äºå½“å‰å°ç¨‹åºçš„æ‰€æœ‰é¡µé¢ï¼Œå±€éƒ¨é¡µé¢æ ·å¼ page.wxss ä»…å¯¹å½“å‰é¡µé¢ç”Ÿæ•ˆã€‚<br>æ­¤å¤– WXSS ä»…æ”¯æŒéƒ¨åˆ† CSS é€‰æ‹©å™¨</p><h4 id="JS-äº¤äº’é€»è¾‘"><a href="#JS-äº¤äº’é€»è¾‘" class="headerlink" title="JS äº¤äº’é€»è¾‘"></a>JS äº¤äº’é€»è¾‘</h4><p>ä¸€ä¸ªæœåŠ¡ä»…ä»…åªæœ‰ç•Œé¢å±•ç¤ºæ˜¯ä¸å¤Ÿçš„ï¼Œè¿˜éœ€è¦å’Œç”¨æˆ·åšäº¤äº’ï¼šå“åº”ç”¨æˆ·çš„ç‚¹å‡»ã€è·å–ç”¨æˆ·çš„ä½ç½®ç­‰ç­‰ã€‚åœ¨å°ç¨‹åºé‡Œè¾¹ï¼Œæˆ‘ä»¬å°±é€šè¿‡ç¼–å†™ JS è„šæœ¬æ–‡ä»¶æ¥å¤„ç†ç”¨æˆ·çš„æ“ä½œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;view&gt;&amp;#123;&amp;#123; msg &amp;#125;&amp;#125;&lt;/view&gt;</span><br><span class="line">&lt;button bindtap=&quot;clickMe&quot;&gt;ç‚¹å‡»æˆ‘&lt;/button&gt;</span><br></pre></td></tr></table></figure></p><p>ç‚¹å‡» button æŒ‰é’®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›æŠŠç•Œé¢ä¸Š msg æ˜¾ç¤ºæˆ â€œHello Worldâ€ï¼Œäºæ˜¯æˆ‘ä»¬åœ¨ button ä¸Šå£°æ˜ä¸€ä¸ªå±æ€§: bindtap ï¼Œåœ¨ JS æ–‡ä»¶é‡Œè¾¹å£°æ˜äº† clickMe æ–¹æ³•æ¥å“åº”è¿™æ¬¡ç‚¹å‡»æ“ä½œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Page(&amp;#123;</span><br><span class="line">  clickMe: function() &amp;#123;</span><br><span class="line">    this.setData(&amp;#123; msg: &quot;Hello World&quot; &amp;#125;)</span><br><span class="line">  &amp;#125;</span><br><span class="line">&amp;#125;)</span><br></pre></td></tr></table></figure></p><h3 id="é¢„è§ˆ"><a href="#é¢„è§ˆ" class="headerlink" title="é¢„è§ˆ"></a>é¢„è§ˆ</h3><p>ä½¿ç”¨å¼€å‘è€…å·¥å…·å¯ä»¥é¢„è§ˆå°ç¨‹åºï¼Œå¸®åŠ©å¼€å‘è€…æ£€æŸ¥å°ç¨‹åºåœ¨ç§»åŠ¨å®¢æˆ·ç«¯ä¸Šçš„çœŸå®è¡¨ç°ã€‚<br>ç‚¹å‡»å¼€å‘è€…å·¥å…·é¡¶éƒ¨æ“ä½œæ çš„é¢„è§ˆæŒ‰é’®ï¼Œå¼€å‘è€…å·¥å…·ä¼šè‡ªåŠ¨æ‰“åŒ…å½“å‰é¡¹ç›®ï¼Œå¹¶ä¸Šä¼ å°ç¨‹åºä»£ç è‡³å¾®ä¿¡çš„æœåŠ¡å™¨ï¼ŒæˆåŠŸä¹‹åä¼šåœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºä¸€ä¸ªäºŒç»´ç ã€‚ä½¿ç”¨å½“å‰å°ç¨‹åºå¼€å‘è€…çš„å¾®ä¿¡æ‰«ç å³å¯çœ‹åˆ°å°ç¨‹åºåœ¨æ‰‹æœºå®¢æˆ·ç«¯ä¸Šçš„çœŸå®è¡¨ç°ã€‚</p><h3 id="ä¸Šä¼ ä»£ç "><a href="#ä¸Šä¼ ä»£ç " class="headerlink" title="ä¸Šä¼ ä»£ç "></a>ä¸Šä¼ ä»£ç </h3><p>åŒé¢„è§ˆä¸åŒï¼Œä¸Šä¼ ä»£ç æ˜¯ç”¨äºæäº¤ä½“éªŒæˆ–è€…å®¡æ ¸ä½¿ç”¨çš„ã€‚<br>ç‚¹å‡»å¼€å‘è€…å·¥å…·é¡¶éƒ¨æ“ä½œæ çš„ä¸Šä¼ æŒ‰é’®ï¼Œå¡«å†™ç‰ˆæœ¬å·ä»¥åŠé¡¹ç›®å¤‡æ³¨ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œç‰ˆæœ¬å·ä»¥åŠé¡¹ç›®å¤‡æ³¨æ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†å‘˜æ£€æŸ¥ç‰ˆæœ¬ä½¿ç”¨çš„ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…è¦æ±‚æ¥å¡«å†™è¿™ä¸¤ä¸ªå­—æ®µã€‚<br>ä¸Šä¼ æˆåŠŸä¹‹åï¼Œç™»å½•å°ç¨‹åºç®¡ç†åå° - å¼€å‘ç®¡ç† - å¼€å‘ç‰ˆæœ¬ å°±å¯ä»¥æ‰¾åˆ°åˆšæäº¤ä¸Šä¼ çš„ç‰ˆæœ¬äº†ã€‚<br>å¯ä»¥å°†è¿™ä¸ªç‰ˆæœ¬è®¾ç½® ä½“éªŒç‰ˆ æˆ–è€…æ˜¯ æäº¤å®¡æ ¸</p><h3 id="å°ç¨‹åºçš„ç‰ˆæœ¬"><a href="#å°ç¨‹åºçš„ç‰ˆæœ¬" class="headerlink" title="å°ç¨‹åºçš„ç‰ˆæœ¬"></a>å°ç¨‹åºçš„ç‰ˆæœ¬</h3><table><thead><tr><th style="text-align:left">ç‰ˆæœ¬</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left">å¼€å‘ç‰ˆæœ¬</td><td style="text-align:center">ä½¿ç”¨å¼€å‘è€…å·¥å…·ï¼Œå¯å°†ä»£ç ä¸Šä¼ åˆ°å¼€å‘ç‰ˆæœ¬ä¸­ã€‚å¼€å‘ç‰ˆæœ¬åªä¿ç•™æ¯äººæœ€æ–°çš„ä¸€ä»½ä¸Šä¼ çš„ä»£ç ã€‚ç‚¹å‡»æäº¤å®¡æ ¸ï¼Œå¯å°†ä»£ç æäº¤å®¡æ ¸ã€‚å¼€å‘ç‰ˆæœ¬å¯åˆ é™¤ï¼Œä¸å½±å“çº¿ä¸Šç‰ˆæœ¬å’Œå®¡æ ¸ä¸­ç‰ˆæœ¬çš„ä»£ç ã€‚</td></tr><tr><td style="text-align:left">å®¡æ ¸ä¸­ç‰ˆæœ¬</td><td style="text-align:center">åªèƒ½æœ‰ä¸€ä»½ä»£ç å¤„äºå®¡æ ¸ä¸­ã€‚æœ‰å®¡æ ¸ç»“æœåå¯ä»¥å‘å¸ƒåˆ°çº¿ä¸Šï¼Œä¹Ÿå¯ç›´æ¥é‡æ–°æäº¤å®¡æ ¸ï¼Œè¦†ç›–åŸå®¡æ ¸ç‰ˆæœ¬ã€‚</td></tr><tr><td style="text-align:left">çº¿ä¸Šç‰ˆæœ¬</td><td style="text-align:center">çº¿ä¸Šæ‰€æœ‰ç”¨æˆ·ä½¿ç”¨çš„ä»£ç ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬ä»£ç åœ¨æ–°ç‰ˆæœ¬ä»£ç å‘å¸ƒåè¢«è¦†ç›–æ›´æ–°ã€‚</td></tr></tbody></table><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to T-SPACE~&lt;br&gt;æœ¬æ–‡å°†ä»‹ç»å°ç¨‹åºçš„å°ç™½å…¥æ‰‹ï¼Œä»å°ç¨‹åºçš„ç”³è¯·åˆ°å°ç¨‹åºçš„å¼€å‘ï¼Œä¸€èµ·å…¥é—¨ï¼&lt;/p&gt;
    
    </summary>
    
      <category term="å¾®ä¿¡å°ç¨‹åº" scheme="http://tigutf.github.io/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
      <category term="practise|å°ç¨‹åº|å°ç™½" scheme="http://tigutf.github.io/tags/practise-%E5%B0%8F%E7%A8%8B%E5%BA%8F-%E5%B0%8F%E7%99%BD/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ªäººåšå®¢æ­å»º</title>
    <link href="http://tigutf.github.io/2018/08/05/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    <id>http://tigutf.github.io/2018/08/05/ä¸ªäººåšå®¢æ­å»º/</id>
    <published>2018-08-05T08:31:28.000Z</published>
    <updated>2018-12-06T13:31:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>T-Spaceæˆ‘çš„ä¸ªäººåšå®¢ç½‘ç«™æ­å»ºã€‚</p><a id="more"></a><p>æ­å»ºä¸ªäººåšå®¢ç½‘ç«™è‹¥è¦è‡ªå·±è´­ä¹°æœåŠ¡å™¨æ¥æ„å»ºï¼Œç€å®æ¯”è¾ƒéº»çƒ¦ï¼Œä¹Ÿä¸çŸ¥é“èƒ½ä¸èƒ½ç¨³å®šçš„è¿è¡Œã€‚è€ŒGithubæä¾›äº†ä¸€ä¸ªGithub Pagesçš„æœåŠ¡ï¼ŒçœŸçš„è®©äººçœ¼å‰ä¸€äº®ã€‚<br>GitHub Pages is designed to host your personal, organization, or project pages from a GitHub repository.</p><h1 id="Githubé¡¹ç›®æ­å»º"><a href="#Githubé¡¹ç›®æ­å»º" class="headerlink" title="Githubé¡¹ç›®æ­å»º"></a>Githubé¡¹ç›®æ­å»º</h1><p>å°†æˆ‘ä»¬çš„åšå®¢é¡¹ç›®æŒ‚è½½åˆ°Githubä¸Šå»ï¼Œå€Ÿç”±GitHubå°†æˆ‘ä»¬çš„é¡¹ç›®é™æ€é¡µé¢å‘å¸ƒï¼Œä¾¿å¯å®ç°äº†æˆ‘ä»¬çš„åšå®¢ç½‘ç«™ã€‚</p><ol><li>æ³¨å†Œè‡ªå·±çš„GitHubè´¦å·</li><li>ç™»å½•githubä¸Šï¼Œåˆ›å»ºä¸€ä¸ªä»“åº“repositoryï¼Œå­˜æ”¾æˆ‘ä»¬çš„é¡¹ç›®æ–‡ä»¶;</li><li>å¡«å†™ä»“åº“çš„å±æ€§(ä»“åº“åå’Œæè¿°)ï¼Œæ³¨æ„ï¼šè¿™ä¸ªä»“åº“åæ¯”è¾ƒç‰¹æ®Šï¼Œå–åæ ¼å¼å¿…é¡»ä¸ºusername.github.ioï¼Œç”¨æˆ·åä¸ºgithubçš„ç”¨æˆ·å,åˆ›å»ºåçš„ç½‘ç«™è®¿é—®åœ°å€å³ä¸ºæ­¤username.github.ioã€‚</li><li>settingè®¾ç½®ï¼Œåœ¨åˆ›å»ºå¥½ä»“åº“åï¼Œç‚¹å‡»ä»“åº“ä¸­çš„settingï¼Œæ‰¾åˆ°GitHub Pagesï¼Œé€‰æ‹©ä½ è¦æ„å»ºå‘å¸ƒçš„åˆ†æ”¯ã€‚OK~</li></ol><h1 id="Hexoæ­å»º"><a href="#Hexoæ­å»º" class="headerlink" title="Hexoæ­å»º"></a>Hexoæ­å»º</h1><p>Githubä¸Šä¹Ÿæœ‰ç½‘ç«™ä¸»é¢˜çš„ä¸€ä¸ªé€‰æ‹©ï¼ˆJekyllï¼‰ï¼Œä¸è¿‡æˆ‘é€‰ç”¨çš„æ˜¯Hexoâ€”â€”ä¸€ä¸ªå¯ä»¥å¸®æˆ‘ä»¬é€šè¿‡mdæ–‡ä»¶ç”Ÿæˆhtmlé™æ€é¡µé¢ï¼ˆå¯è®¾ç½®ä¸åŒä¸»é¢˜æ¨¡æ¿ï¼‰ï¼Œå¹¶ä¸”æ”¯æŒä¸Šä¼ åˆ°æˆ‘ä»¬å¯¹åº”çš„æœåŠ¡å™¨çš„å¼ºå¤§å·¥å…·ã€‚</p><h2 id="Hexoå®‰è£…"><a href="#Hexoå®‰è£…" class="headerlink" title="Hexoå®‰è£…"></a>Hexoå®‰è£…</h2><ol><li>å®‰è£…gitbashå’Œnodejsï¼›å®‰è£…è¿‡ç¨‹ç•¥â€¦</li><li>é€šè¿‡åœ¨gitbashä¸Šç”¨npmå·¥å…·è¿›è¡Œå®‰è£…hexoï¼š<br><code>npm i -g hexo</code></li><li>è¿›è¡ŒHexoçš„åˆå§‹åŒ–å·¥ä½œï¼š<br><code>hexo init</code></li></ol><p>åˆå§‹åŒ–åå³ä¼šç”Ÿæˆå¦‚ä¸‹æ–‡ä»¶ç»“æ„:</p><table><thead><tr><th>æ–‡ä»¶/æ–‡ä»¶å¤¹</th><th style="text-align:center">è¯´æ˜</th></tr></thead><tbody><tr><td>node_modules</td><td style="text-align:center">ä¾èµ–åŒ…</td></tr><tr><td>public</td><td style="text-align:center">å­˜æ”¾çš„æ˜¯ç”Ÿæˆçš„é¡µé¢ï¼Œè¿™ä¸ªç›®å½•æœ€ç»ˆä¼šå‘å¸ƒåˆ°æœåŠ¡å™¨</td></tr><tr><td>scaffolds</td><td style="text-align:center">å‘½ä»¤ç”Ÿæˆæ–‡ç« ç­‰çš„æ¨¡æ¿ï¼Œä¸€äº›é€šç”¨çš„markdownæ¨¡æ¿</td></tr><tr><td>source</td><td style="text-align:center">ç”¨å‘½ä»¤åˆ›å»ºçš„å„ç§æ–‡ç« </td></tr><tr><td>source/_posts</td><td style="text-align:center">å‘å¸ƒçš„æ–‡ç« </td></tr><tr><td>source/_drafts</td><td style="text-align:center">è‰ç¨¿æ–‡ä»¶</td></tr><tr><td>themes</td><td style="text-align:center">åšå®¢çš„æ¨¡æ¿</td></tr><tr><td>_config.yml</td><td style="text-align:center">é…ç½®æ–‡ä»¶</td></tr><tr><td>themes/landscape/_config.yml</td><td style="text-align:center">landscapeä¸»é¢˜çš„é…ç½®æ–‡ä»¶</td></tr><tr><td>db.json</td><td style="text-align:center">sourceè§£ææ‰€å¾—åˆ°çš„</td></tr><tr><td>package.json</td><td style="text-align:center">é¡¹ç›®æ‰€éœ€æ¨¡å—é¡¹ç›®çš„é…ç½®ä¿¡æ¯</td></tr></tbody></table><!-- __ --><h2 id="Hexo-é…ç½®"><a href="#Hexo-é…ç½®" class="headerlink" title="Hexo é…ç½®"></a>Hexo é…ç½®</h2><p><strong>_config.ymlåˆ†ä¸¤ç§ï¼š1ï¼‰ç½‘ç«™çš„é…ç½®æ–‡ä»¶ï¼›2ï¼‰ä¸»é¢˜çš„é…ç½®æ–‡ä»¶</strong></p><ul><li>åœ¨hexoç›®å½•ä¸‹çš„_config.ymlâ€”â€”ç½‘ç«™é…ç½®</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"># Hexo Configuration</span><br><span class="line">## Docs: https://hexo.io/docs/configuration.html</span><br><span class="line">## Source: https://github.com/hexojs/hexo/</span><br><span class="line"></span><br><span class="line"># Site ä¿¡æ¯</span><br><span class="line">title: T-SPACE</span><br><span class="line">subtitle:</span><br><span class="line">description: tigutfçš„ä¸ªäººåšå®¢</span><br><span class="line">author: Tigutf</span><br><span class="line">language: zh-Hans</span><br><span class="line">timezone:</span><br><span class="line"></span><br><span class="line"># URL ç½‘å€è®¾ç½®</span><br><span class="line">## å¦‚æœç½‘ç«™æ˜¯æ”¾åœ¨å­ç›®å½•ä¸­ï¼Œå°†urlè®¾ç½®æˆ&apos;http://yoursite.com/child&apos;ï¼Œå°†rootè®¾ç½®æˆ&apos;/child/&apos;</span><br><span class="line">url: http://tigutf.github.io</span><br><span class="line">root: /</span><br><span class="line"># æ–‡ç« é“¾æ¥åœ°å€æ ¼å¼ ã€‚å³æ–‡ç« å­˜æ”¾çš„ç›®å½•ã€‚</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line"></span><br><span class="line"># Directory</span><br><span class="line">## èµ„æºæ–‡ä»¶â€”â€”åšå®¢æ–‡ä»¶ï¼Œä¼šè¢«ä¸Šä¼ åˆ°githubä¸Š</span><br><span class="line">source_dir: source</span><br><span class="line">## é™æ€æ–‡ä»¶ç”Ÿæˆåå­˜æ”¾åœ¨å…¬å…±æ–‡ä»¶å¤¹ä¸‹</span><br><span class="line">public_dir: public</span><br><span class="line">## æ ‡ç­¾</span><br><span class="line">tag_dir: tags</span><br><span class="line">## æ¡£æ¡ˆ</span><br><span class="line">archive_dir: archives</span><br><span class="line">## åˆ†ç±»</span><br><span class="line">category_dir: categories</span><br><span class="line">## ä»£ç æ–‡ä»¶å¤¹</span><br><span class="line">code_dir: downloads/code</span><br><span class="line">## å›½é™…åŒ–æ–‡ä»¶å¤¹</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br><span class="line"></span><br><span class="line"># Writing</span><br><span class="line">## æ–°å»ºæ–‡ç« çš„é»˜è®¤åç§°</span><br><span class="line">new_post_name: :title.md # File name of new posts</span><br><span class="line">## é»˜è®¤å¸ƒå±€æ¨¡æ¿æ˜¯postï¼Œè€Œä¸æ˜¯draftå’Œpage</span><br><span class="line">default_layout: post</span><br><span class="line">## æ˜¯å¦å°†æ ‡é¢˜è½¬æ¢æˆæ ‡é¢˜å½¢å¼ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰</span><br><span class="line">titlecase: false # Transform title into titlecase</span><br><span class="line">## åœ¨æ–°æ ‡ç­¾é¡µé¢ä¸­æ‰“å¼€ç½‘é¡µ</span><br><span class="line">external_link: true # Open external links in new tab</span><br><span class="line">filename_case: 0</span><br><span class="line">## æ˜¯å¦æ¸²æŸ“è‰ç¨¿</span><br><span class="line">render_drafts: false</span><br><span class="line">post_asset_folder: false</span><br><span class="line">## æŠŠé“¾æ¥æ”¹ä¸ºä¸æ ¹ç›®å½•çš„ç›¸å¯¹ä½å€</span><br><span class="line">relative_link: false</span><br><span class="line">## æ˜¾ç¤ºæœªæ¥çš„æ–‡ç« </span><br><span class="line">future: true</span><br><span class="line">## é«˜äº®è®¾ç½®</span><br><span class="line">highlight:</span><br><span class="line">  enable: true</span><br><span class="line">  line_number: true</span><br><span class="line">  auto_detect: false ### è‡ªåŠ¨æ£€æµ‹è¯­è¨€</span><br><span class="line">  tab_replace:</span><br><span class="line"></span><br><span class="line"># Home page setting ä¸»é¡µé¡µé¢è®¾ç½®</span><br><span class="line"># path: Root path for your blogs index page. (default = &apos;&apos;) ä½ çš„åšå®¢ç´¢å¼•é¡µæ ¹ç›®å½•</span><br><span class="line"># per_page: Posts displayed per page. (0 = disable pagination) æ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« é‡</span><br><span class="line"># order_by: Posts order. (Order by date descending by default) æ–‡ç« æ’åºä¾æ®ï¼Œé»˜è®¤æŒ‰æ—¥æœŸæ’åº</span><br><span class="line">index_generator:</span><br><span class="line">  path: &apos;&apos;</span><br><span class="line">  per_page: 10</span><br><span class="line">  order_by: -date</span><br><span class="line"></span><br><span class="line"># Category &amp; Tag åˆ†ç±»ä¸æ ‡ç­¾</span><br><span class="line">default_category: uncategorized</span><br><span class="line">## åˆ†ç±»åˆ«å</span><br><span class="line">category_map:</span><br><span class="line">## æ ‡ç­¾åˆ«å</span><br><span class="line">tag_map:</span><br><span class="line"></span><br><span class="line"># Date / Time format æ—¥æœŸæ ¼å¼</span><br><span class="line">## Hexo uses Moment.js to parse and display date</span><br><span class="line">## You can customize the date format as defined in</span><br><span class="line">## http://momentjs.com/docs/#/displaying/format/</span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line"></span><br><span class="line"># Pagination åˆ†é¡µ</span><br><span class="line">## Set per_page to 0 to disable pagination</span><br><span class="line">per_page: 10</span><br><span class="line">pagination_dir: page</span><br><span class="line"></span><br><span class="line"># Extensions æ‹“å±•æ’ä»¶é…ç½®</span><br><span class="line">## Plugins: https://hexo.io/plugins/</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">## ä¸»é¢˜é…ç½®ï¼Œä½¿ç”¨çš„ä¸»é¢˜æ˜¯next</span><br><span class="line">theme: next</span><br><span class="line"></span><br><span class="line"># Deployment éƒ¨ç½²é…ç½®</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:tigutf/tigutf.github.io.git    </span><br><span class="line">  branch: master  ## ç”¨masteråˆ†æ”¯æ‰“åŒ…éƒ¨ç½²</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯æˆ‘Hexoçš„ç½‘ç«™é…ç½®ï¼Œè¯¦ç»†è¯·çœ‹æ³¨é‡Šã€‚</p><ul><li><a href="https://hexo.io/themes/" target="_blank" rel="noopener">hexoå®˜æ–¹ä¸»é¢˜</a>æä¾›äº†è®¸å¤šä¸»é¢˜æ¥ä¸°å¯Œæˆ‘ä»¬çš„åšå®¢ï¼Œå¯æ ¹æ®è‡ªå·±å–œå¥½é€‰æ‹©ä¸åŒçš„ä¸»é¢˜ã€‚è¿™è¾¹ç½‘ç«™ä¸»é¢˜æˆ‘è‡ªå·±é€‰ç”¨çš„æ˜¯<a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">NexT</a>ã€‚æ‰¾åˆ°ä¸»é¢˜æ‰€åœ¨çš„githubåœ°å€urlï¼Œ<strong>git clone url</strong> åˆ° hexo/themes ç›®å½•ä¸‹å³å¯ã€‚</li><li>NexTä¸»é¢˜ä¸‹ä¹Ÿè¿˜æœ‰å¤šç§æ¨¡å¼é¡µé¢ä¾›ä½ é€‰æ‹©ï¼Œæœ‰_config.ymlé…ç½®æ–‡ä»¶å¯è¿›è¡Œè°ƒæ•´ï¼Œå…·ä½“è¯·å‚è€ƒNextä¸»é¢˜å®˜ç½‘<a href="http://theme-next.iissnan.com/theme-settings.html" target="_blank" rel="noopener">ä¸»é¢˜é…ç½®</a>.</li><li>æ‡’å¾—æ›´æ¢ä¸»é¢˜çš„è¯ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤ï¼šlandscapeã€‚</li></ul><h2 id="Hexo-å‘½ä»¤"><a href="#Hexo-å‘½ä»¤" class="headerlink" title="Hexo å‘½ä»¤"></a>Hexo å‘½ä»¤</h2><h4 id="hexo-init-folder"><a href="#hexo-init-folder" class="headerlink" title="hexo init [folder]"></a>hexo init [folder]</h4><blockquote><p>åˆå§‹åŒ–ä¸€ä¸ªç½‘ç«™ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® folder ï¼ŒHexo é»˜è®¤åœ¨ç›®å‰çš„æ–‡ä»¶å¤¹å»ºç«‹ç½‘ç«™.</p></blockquote><h4 id="hexo-new-layout-title"><a href="#hexo-new-layout-title" class="headerlink" title="hexo new [layout] [title]"></a>hexo new [layout] [title]</h4><blockquote><p>æ–°å»ºä¸€ç¯‡æ–‡ç« (.mdæ–‡ä»¶)ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®layoutçš„è¯ï¼Œé»˜è®¤ä½¿ç”¨ config.ymlä¸­çš„ default_layout å‚æ•°ä»£æ›¿ã€‚å¦‚æœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚</p></blockquote><h4 id="hexo-version"><a href="#hexo-version" class="headerlink" title="hexo version"></a>hexo version</h4><blockquote><p>æŸ¥çœ‹ç‰ˆæœ¬</p></blockquote><h4 id="hexo-clean"><a href="#hexo-clean" class="headerlink" title="hexo clean"></a>hexo clean</h4><blockquote><p>æ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)</p></blockquote><h4 id="hexo-g-gt-hexo-generate"><a href="#hexo-g-gt-hexo-generate" class="headerlink" title="hexo g   ==&gt; hexo generate"></a>hexo g   ==&gt; hexo generate</h4><blockquote><p>ç”Ÿæˆé™æ€æ–‡ä»¶</p></blockquote><h4 id="hexo-s-gt-hexo-server"><a href="#hexo-s-gt-hexo-server" class="headerlink" title="hexo s ==&gt; hexo server"></a>hexo s ==&gt; hexo server</h4><blockquote><p>æœ¬åœ°é¢„è§ˆ</p></blockquote><h4 id="hexo-d-gt-hexo-deploy"><a href="#hexo-d-gt-hexo-deploy" class="headerlink" title="hexo d ==&gt; hexo deploy"></a>hexo d ==&gt; hexo deploy</h4><blockquote><p>éƒ¨ç½²ï¼Œå¯ä¸hexo gåˆå¹¶ä¸º hexo d -g</p></blockquote><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;T-Spaceæˆ‘çš„ä¸ªäººåšå®¢ç½‘ç«™æ­å»ºã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="Github" scheme="http://tigutf.github.io/categories/Github/"/>
    
    
      <category term="github|hexo" scheme="http://tigutf.github.io/tags/github-hexo/"/>
    
  </entry>
  
  <entry>
    <title>Hello Hexo</title>
    <link href="http://tigutf.github.io/2018/01/18/hello-world/"/>
    <id>http://tigutf.github.io/2018/01/18/hello-world/</id>
    <published>2018-01-17T16:56:08.956Z</published>
    <updated>2019-01-14T15:32:13.196Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p><!-- end --><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>è¯»è¯»HashMap(2)</title>
    <link href="http://tigutf.github.io/2018/01/05/%E8%AF%BB%E8%AF%BBHashMap2/"/>
    <id>http://tigutf.github.io/2018/01/05/è¯»è¯»HashMap2/</id>
    <published>2018-01-05T13:22:00.000Z</published>
    <updated>2019-01-14T15:37:06.886Z</updated>
    
    <content type="html"><![CDATA[<p>ç½‘ä¸Šæœ‰å¾ˆå¤šå¯¹HashMapï¼ŒHashTableå‡ ä¸ªé›†åˆç±»çš„å¯¹æ¯”ä¸è§£è¯´,çœ‹äº†ä¸‹æºç ï¼Œè®°ä¸‹ç¬”è®°~</p><a id="more"></a><h1 id="HashMapæ“ä½œ"><a href="#HashMapæ“ä½œ" class="headerlink" title="HashMapæ“ä½œ"></a>HashMapæ“ä½œ</h1><h2 id="Java1-6-HashMapâ€”PUT"><a href="#Java1-6-HashMapâ€”PUT" class="headerlink" title="Java1.6 HashMapâ€”PUT"></a>Java1.6 HashMapâ€”PUT</h2><blockquote><p>putæ“ä½œï¼ŒåŸºäºJava 1.6çš„æºç å¦‚ä¸‹:</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.6</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœtableæ•°ç»„ä¸ºç©ºæ•°ç»„&#123;&#125;ï¼Œè¿›è¡Œæ•°ç»„å¡«å……ï¼ˆä¸ºtableåˆ†é…å®é™…å†…å­˜ç©ºé—´ï¼‰ï¼Œå…¥å‚ä¸ºthresholdï¼Œæ­¤æ—¶thresholdä¸ºinitialCapacity é»˜è®¤æ˜¯1&lt;&lt;4(24=16)</span></span><br><span class="line">    <span class="keyword">if</span> (table == EMPTY_TABLE) &#123;</span><br><span class="line">        inflateTable(threshold);</span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">//å¦‚æœkeyä¸ºnullï¼Œå­˜å‚¨ä½ç½®ä¸ºtable[0]æˆ–table[0]çš„å†²çªé“¾ä¸Š</span></span><br><span class="line">    <span class="keyword">if</span> (key == <span class="keyword">null</span>)</span><br><span class="line">        <span class="keyword">return</span> putForNullKey(value);</span><br><span class="line">    <span class="keyword">int</span> hash = hash(key);<span class="comment">//å¯¹keyçš„hashcodeè¿›ä¸€æ­¥è®¡ç®—ï¼Œç¡®ä¿æ•£åˆ—å‡åŒ€</span></span><br><span class="line">    <span class="keyword">int</span> i = indexFor(hash, table.length);<span class="comment">//è·å–åœ¨tableä¸­çš„å®é™…ä½ç½®</span></span><br><span class="line">    <span class="keyword">for</span> (Entry&lt;K,V&gt; e = table[i]; e != <span class="keyword">null</span>; e = e.next) &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœè¯¥å¯¹åº”æ•°æ®å·²å­˜åœ¨ï¼Œæ‰§è¡Œè¦†ç›–æ“ä½œã€‚ç”¨æ–°valueæ›¿æ¢æ—§valueï¼Œå¹¶è¿”å›æ—§value</span></span><br><span class="line">        Object k;</span><br><span class="line">        <span class="keyword">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;</span><br><span class="line">            V oldValue = e.value;</span><br><span class="line">            e.value = value;</span><br><span class="line">            e.recordAccess(<span class="keyword">this</span>);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    modCount++;<span class="comment">//ä¿è¯å¹¶å‘è®¿é—®æ—¶ï¼Œè‹¥HashMapå†…éƒ¨ç»“æ„å‘ç”Ÿå˜åŒ–ï¼Œå¿«é€Ÿå“åº”å¤±è´¥</span></span><br><span class="line">    addEntry(hash, key, value, i);<span class="comment">//æ–°å¢ä¸€ä¸ªentry</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨æ˜¯é˜²æ­¢è´¨é‡è¾ƒå·®çš„å“ˆå¸Œå‡½æ•°å¸¦æ¥è¿‡å¤šçš„å†²çªï¼ˆç¢°æ’ï¼‰é—®é¢˜ã€‚</span></span><br><span class="line"><span class="comment">  Javaä¸­intå€¼å 4ä¸ªå­—èŠ‚ï¼Œå³32ä½ã€‚æ ¹æ®è¿™32ä½å€¼è¿›è¡Œç§»ä½ã€å¼‚æˆ–è¿ç®—å¾—åˆ°ä¸€ä¸ªå€¼ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(<span class="keyword">int</span> h)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// This function ensures that hashCodes that differ only by</span></span><br><span class="line">    <span class="comment">// constant multiples at each bit position have a bounded</span></span><br><span class="line">    <span class="comment">// number of collisions (approximately 8 at default load factor).</span></span><br><span class="line">    h ^= (h &gt;&gt;&gt; <span class="number">20</span>) ^ (h &gt;&gt;&gt; <span class="number">12</span>);</span><br><span class="line">    <span class="keyword">return</span> h ^ (h &gt;&gt;&gt; <span class="number">7</span>) ^ (h &gt;&gt;&gt; <span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  indexForè¿”å›hashå€¼å’Œtableæ•°ç»„é•¿åº¦å‡1çš„ä¸è¿ç®—ç»“æœã€‚</span></span><br><span class="line"><span class="comment">  ä½¿ç”¨length-1æ˜¯ä¸ºäº†ä¿è¯ç»“æœçš„æœ€å¤§å€¼æ˜¯length-1ï¼Œä¸ä¼šäº§ç”Ÿæ•°ç»„è¶Šç•Œé—®é¢˜ã€‚</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">indexFor</span><span class="params">(<span class="keyword">int</span> h, <span class="keyword">int</span> length)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> h &amp; (length-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>å½“æ‰§è¡ŒaddEntryï¼Œè‹¥å¢åŠ å…ƒç´ åtableçš„å¤§å°å¤§äºthresholdï¼ˆå®¹å™¨å¤§å°ä¸è´Ÿè½½å› å­çš„ä¹˜æœºï¼‰ï¼Œåˆ™éœ€è¦å¯¹å½“å‰æ•°ç»„è¿›è¡Œé‡ç½®å¤§å°ï¼ˆæ‹“å±•ä¸ºåŸæ¥é•¿åº¦çš„ä¸¤å€ï¼‰ï¼Œè°ƒç”¨resize(int capacity)</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> newCapacity)</span> </span>&#123;</span><br><span class="line">    Entry[] oldTable = table;</span><br><span class="line">    <span class="keyword">int</span> oldCapacity = oldTable.length;</span><br><span class="line">    <span class="comment">// å½“å®¹é‡å·²ç»åˆ°è¾¾å…è®¸çš„æœ€å¤§å€¼ï¼Œå³MAXIMUN_CAPACITYï¼Œåˆ™ä¸å†æ‹“å±•å®¹é‡ï¼›</span></span><br><span class="line">    <span class="comment">// è€Œå°†è£…è½½æ‹“å±•çš„ç•Œé™å€¼è®¾ä¸ºè®¡ç®—æœºå…è®¸çš„æœ€å¤§å€¼ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> (oldCapacity == MAXIMUM_CAPACITY) &#123;</span><br><span class="line">        threshold = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ›å»ºæ–°æ•°ç»„ï¼Œå®¹é‡ä¸ºæŒ‡å®šçš„å®¹é‡</span></span><br><span class="line">    Entry[] newTable = <span class="keyword">new</span> Entry[newCapacity];</span><br><span class="line">    transfer(newTable);</span><br><span class="line">    table = newTable;</span><br><span class="line">    <span class="comment">// è®¾ç½®ä¸‹ä¸€æ¬¡éœ€è¦è°ƒæ•´æ•°ç»„å¤§å°çš„ç•Œé™</span></span><br><span class="line">    threshold = (<span class="keyword">int</span>)(newCapacity * loadFactor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">transfer</span><span class="params">(Entry[] newTable)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ä¿ç•™åŸæ•°ç»„çš„å¼•ç”¨åˆ°srcä¸­ï¼Œ</span></span><br><span class="line">    Entry[] src = table;</span><br><span class="line">    <span class="comment">// æ–°å®¹é‡ä½¿æ–°æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line">    <span class="keyword">int</span> newCapacity = newTable.length;</span><br><span class="line">    <span class="comment">// éå†åŸæ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; src.length; j++) &#123;</span><br><span class="line">        <span class="comment">// è·å–å…ƒç´ e</span></span><br><span class="line">        Entry&lt;K,V&gt; e = src[j];</span><br><span class="line">        <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// å°†åŸæ•°ç»„ä¸­çš„å…ƒç´ ç½®ä¸ºnull</span></span><br><span class="line">            src[j] = <span class="keyword">null</span>;</span><br><span class="line">            <span class="comment">// éå†åŸæ•°ç»„ä¸­jä½ç½®æŒ‡å‘çš„é“¾è¡¨</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                Entry&lt;K,V&gt; next = e.next;</span><br><span class="line">                <span class="comment">// æ ¹æ®æ–°çš„å®¹é‡è®¡ç®—eåœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®</span></span><br><span class="line">                <span class="keyword">int</span> i = indexFor(e.hash, newCapacity);</span><br><span class="line">                <span class="comment">// å°†eæ’å…¥åˆ°newTable[i]æŒ‡å‘çš„é“¾è¡¨çš„å¤´éƒ¨</span></span><br><span class="line">                e.next = newTable[i];</span><br><span class="line">                newTable[i] = e;</span><br><span class="line">                e = next;</span><br><span class="line">            &#125; <span class="keyword">while</span> (e != <span class="keyword">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Java1-8-HashMapâ€”PUT"><a href="#Java1-8-HashMapâ€”PUT" class="headerlink" title="Java1.8 HashMapâ€”PUT"></a>Java1.8 HashMapâ€”PUT</h2><ul><li>1.8ä¹‹å‰ï¼ŒHashMapä¸»å¹²æ˜¯æ•°ç»„ä¸é“¾è¡¨çš„ç»“åˆï¼Œè€Œ1.8ç‰ˆæœ¬ä¸­å‘ç”Ÿäº†ä¸€äº›æ”¹å˜ï¼Œè½¬å˜æˆäº†åŸºäºæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘å®ç°ï¼š</li></ul><p><img src="https://upload-images.jianshu.io/upload_images/5222801-b17f2e0dfb2f8ead.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/810/format/webp" alt=""></p><blockquote><p>1.8ç‰ˆæœ¬ åŸºç¡€æ•°ç»„ç±»å‹å˜æˆNode<k,v>[]ï¼Œå¦‚ä¸‹ï¼š</k,v></p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">      <span class="keyword">final</span> <span class="keyword">int</span> hash;</span><br><span class="line">      <span class="keyword">final</span> K key;</span><br><span class="line">      V value;</span><br><span class="line">      Node&lt;K,V&gt; next;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">LinkedHashMap</span>.<span class="title">Entry</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">        TreeNode&lt;K,V&gt; parent;  <span class="comment">// red-black tree links</span></span><br><span class="line">        TreeNode&lt;K,V&gt; left;</span><br><span class="line">        TreeNode&lt;K,V&gt; right;</span><br><span class="line">        TreeNode&lt;K,V&gt; prev;    <span class="comment">// needed to unlink next upon deletion</span></span><br><span class="line">        <span class="keyword">boolean</span> red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br></pre></td></tr></table></figure><blockquote><p>putæ“ä½œï¼ŒåŸºäºJava 1.8çš„æºç å¦‚ä¸‹:</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">public V put(K key, V value) &#123;</span><br><span class="line">     return putVal(hash(key), key, value, false, true);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> final V putVal(int hash, K key, V value, boolean onlyIfAbsent,</span><br><span class="line">                 boolean evict) &#123;</span><br><span class="line">      Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;</span><br><span class="line">      //å½“å‰HashMapä¸ºç©ºæ—¶ï¼Œåˆå§‹åŒ–æ•°ç»„å¤§å°</span><br><span class="line">      if ((tab = table) == null || (n = tab.length) == 0)</span><br><span class="line">          n = (tab = resize()).length;</span><br><span class="line">      //tableæ•°ç»„çš„ä½ç½®çš„ç®—æ³•æ˜¯:i = (n - 1) &amp; hashï¼Œå°†æ•°ç»„é•¿åº¦å‡1åä¸è¿ç®—hash</span><br><span class="line">      //å½“è®¡ç®—å¾—åˆ°çš„hashå€¼ä¸ºç©ºï¼Œåˆ™æ–°å¢ä¸€ä¸ªèŠ‚ç‚¹</span><br><span class="line">      if ((p = tab[i = (n - 1) &amp; hash]) == null)</span><br><span class="line">          tab[i] = newNode(hash, key, value, null);</span><br><span class="line">      else &#123; //å½“hashè®¡ç®—å¾—åˆ°çš„å€¼ç›¸åŒï¼ˆå“ˆå¸Œç¢°æ’ï¼‰</span><br><span class="line">          Node&lt;K,V&gt; e; K k;</span><br><span class="line">          if (p.hash == hash &amp;&amp;</span><br><span class="line">              ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">              e = p;</span><br><span class="line">         //å½“èŠ‚ç‚¹ä¸ºçº¢é»‘æ ‘æ—¶ï¼Œå°†ç»“æœæ’å…¥åˆ°çº¢é»‘æ ‘ä¸­</span><br><span class="line">          else if (p instanceof TreeNode)</span><br><span class="line">              e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);</span><br><span class="line">          else &#123; //é¦–ä¸ªé“¾è¡¨èŠ‚ç‚¹ä¸ºé“¾è¡¨</span><br><span class="line">              for (int binCount = 0; ; ++binCount) &#123;</span><br><span class="line">                  if ((e = p.next) == null) &#123;</span><br><span class="line">                      p.next = newNode(hash, key, value, null);</span><br><span class="line">                      if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st</span><br><span class="line">                          treeifyBin(tab, hash);</span><br><span class="line">                      break;</span><br><span class="line">                  &#125;</span><br><span class="line">                  if (e.hash == hash &amp;&amp;</span><br><span class="line">                      ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">                      break;</span><br><span class="line">                  p = e;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          if (e != null) &#123; // existing mapping for key</span><br><span class="line">              V oldValue = e.value;</span><br><span class="line">              if (!onlyIfAbsent || oldValue == null)</span><br><span class="line">                  e.value = value;</span><br><span class="line">              afterNodeAccess(e);</span><br><span class="line">              return oldValue;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      ++modCount;</span><br><span class="line">      if (++size &gt; threshold)</span><br><span class="line">          resize();</span><br><span class="line">      afterNodeInsertion(evict);</span><br><span class="line">      return null;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>HashMapå°†æ’å…¥çš„é”®å€¼å¯¹å°è£…åœ¨Nodeå¯¹è±¡ä¸­ï¼Œæ¯ä¸ªNodeå¯¹è±¡å«æœ‰hashå€¼ï¼Œé”®å¯¹è±¡keyï¼Œå€¼å¯¹è±¡valueã€‚å½“å“ˆå¸Œå€¼å†²çªåï¼Œæ–°å¢çš„Nodeä¼šè¢«nextå˜é‡æŒ‡å‘ï¼Œç»„æˆé“¾è¡¨ã€‚å½“è¯¥é“¾è¡¨çš„é•¿åº¦è¶…è¿‡8ï¼Œå°†å…¶è½¬æ¢ä¸ºçº¢é»‘æ ‘èŠ‚ç‚¹ã€‚</p><ul><li><p>è¿™é‡Œæœ‰ä¸€ä¸ªæ³¨æ„çš„åœ°æ–¹ï¼Œtableæ•°ç»„çš„ä½ç½®çš„è®¡ç®—ç®—æ³•æ˜¯:</p><font color="#aa6655"> <strong> i = (n - 1) &amp; hash; </strong> </font><p><strong><br>næ˜¯æ•°ç»„çš„é•¿åº¦ï¼Œhashæ˜¯keyçš„å“ˆå¸Œå€¼ï¼ˆintå‹32ä½ï¼‰é«˜16ä½çš„è¿”å›å€¼ï¼›<br>HashMapçš„æ•°ç»„é•¿åº¦æ˜¯ç”±é™åˆ¶çš„ï¼Œä¸€å®šæ˜¯2çš„å¹‚ï¼ŒäºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼ï¼ˆ10ï¼Œ100ï¼Œ1000ï¼Œ10000,,,ï¼‰ï¼Œå½“å‡1ä¹‹åå¾—ï¼ˆ01ï¼Œ11ï¼Œ111ï¼Œ1111,,,ï¼‰ï¼Œ(n-1)&amp;hash ç­‰ä»·äº 1111â€¦1 &amp; XXXXXXXXXXXXXXXXX ï¼›ç”¨hashä¸(n-1)åšä½ç½®è¿ç®—ç›¸æ¯”%è¿ç®—æ›´é«˜æ•ˆï¼Œè¿™å¯èƒ½å°±æ˜¯HashMapæ•°ç»„é•¿åº¦ä¸º2çš„å¹‚çš„åŸå› ï¼Œå¹¶ä¸”è¿™ç§å·§å¦™çš„è®¾è®¡ä¹Ÿä¿è¯ä½ç½®iä¸ä¼šè¶…è¿‡æ•°ç»„é•¿åº¦ã€‚</strong></p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">    <span class="keyword">int</span> oldCap = (oldTab == <span class="keyword">null</span>) ? <span class="number">0</span> : oldTab.length;  <span class="comment">//åˆå§‹é•¿åº¦ä¸º0</span></span><br><span class="line">    <span class="keyword">int</span> oldThr = threshold;<span class="comment">//å¦‚æœHashMapæ„é€ æ–¹æŒ‡å®šäº†åˆå§‹é•¿åº¦å’ŒåŠ è½½å› å­ï¼Œthresholdä¼šè¢«è®¡ç®—å‡ºæ¥</span></span><br><span class="line">    <span class="keyword">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//ç¬¬äºŒæ¬¡åŠä»¥åçš„æ‰©å®¹èµ°è¿™é‡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span> oldTab;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">            newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">        newCap = oldThr;  <span class="comment">//åˆå§‹åŒ–é•¿åº¦å’ŒåŠ è½½å› å­èµ°è¿™é‡Œ</span></span><br><span class="line">    <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults  //åˆå§‹é»˜è®¤æ‰§è¡Œè¿™ä¸ªåˆ†æ”¯</span></span><br><span class="line">        newCap = DEFAULT_INITIAL_CAPACITY; <span class="comment">//é»˜è®¤é•¿åº¦</span></span><br><span class="line">        newThr = (<span class="keyword">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); <span class="comment">//é»˜è®¤ä¸´ç•Œå€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ•°ç»„çš„é•¿åº¦å’Œä½ç½®è®¡ç®—è¿‡åï¼Œåˆ™éœ€è¦åœ¨è¯¥ä½ç½®çš„é¦–ä¸ªé“¾è¡¨èŠ‚ç‚¹æ’å…¥å…ƒç´ ï¼Œç”±äºå“ˆå¸Œå†²çªä¸é“¾è¡¨é•¿åº¦è¾¾8ä»¥ä¸Šåä¼šè½¬å˜æˆçº¢é»‘æ ‘çš„è§„åˆ™ï¼Œæ‰€ä»¥éœ€è¦å¤šäº†è§£ä¸‹ä¸‹é¢ä¸€æ®µä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (int binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line"><span class="keyword">if</span> ((e = p.next) == null) &#123; //@<span class="number">1</span>å¦‚æœéå†åˆ°é“¾è¡¨çš„æœ«å°¾ï¼Œè¯´æ˜éå†çš„è¿‡ç¨‹ä¸­æœªæ‰¾åˆ°keyç›¸ç­‰çš„èŠ‚ç‚¹ï¼Œå°†é”®å€¼å¯¹æ’å…¥æœ«å°¾</span><br><span class="line">    p.next = newNode(hash, key, value, null);</span><br><span class="line">    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) // <span class="number">-1</span> <span class="keyword">for</span> <span class="number">1</span>st</span><br><span class="line">        treeifyBin(tab, hash); //@<span class="number">3</span>åœ¨é“¾è¡¨æœ«å°¾æ’å…¥æ–°èŠ‚ç‚¹åï¼Œé“¾è¡¨çš„é•¿åº¦è¾¾åˆ°<span class="number">8</span>ï¼Œæ­¤æ—¶æ–¹æ³•treeifyBin(tab, hash)å°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</span><br><span class="line">    //@<span class="number">2</span> å¦‚æœéå†é“¾è¡¨çš„è¿‡ç¨‹ä¸­ï¼Œå­˜åœ¨å“ˆå¸Œå€¼ä¸€è‡´ï¼Œå¼•ç”¨ç›¸ç­‰æˆ–equalsç›¸ç­‰çš„èŠ‚ç‚¹ï¼Œç»ˆæ­¢éå†ï¼Œæ–°é”®å€¼å¯¹çš„å€¼ä¼šæ›¿æ¢è¿™ä¸ªèŠ‚ç‚¹ä¸ŠåŸæ¥çš„å€¼ã€‚</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">p = e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Java1-8-HashMapâ€”GETå–å‡ºç®—æ³•"><a href="#Java1-8-HashMapâ€”GETå–å‡ºç®—æ³•" class="headerlink" title="Java1.8 HashMapâ€”GETå–å‡ºç®—æ³•"></a>Java1.8 HashMapâ€”GETå–å‡ºç®—æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt; e;</span><br><span class="line">        <span class="keyword">return</span> (e = getNode(hash(key), key)) == <span class="keyword">null</span> ? <span class="keyword">null</span> : e.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">final</span> Node&lt;K,V&gt; <span class="title">getNode</span><span class="params">(<span class="keyword">int</span> hash, Object key)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; <span class="keyword">int</span> n; K k;</span><br><span class="line">        <span class="keyword">if</span> ((tab = table) != <span class="keyword">null</span> &amp;&amp; (n = tab.length) &gt; <span class="number">0</span> &amp;&amp;</span><br><span class="line">            (first = tab[(n - <span class="number">1</span>) &amp; hash]) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (first.hash == hash &amp;&amp; <span class="comment">// always check first node</span></span><br><span class="line">                ((k = first.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                <span class="keyword">return</span> first;</span><br><span class="line">            <span class="keyword">if</span> ((e = first.next) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (first <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                    <span class="keyword">return</span> ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">return</span> e;</span><br><span class="line">                &#125; <span class="keyword">while</span> ((e = e.next) != <span class="keyword">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>å–å‡ºç®—æ³•å…¶å®å°±æ˜¯æ’å…¥ç®—æ³•çš„é€†å‘è¿‡ç¨‹ï¼Œä½ å¯èƒ½ç›´æ¥ä»table[i]ä¸­å–èµ°é”®å€¼å¯¹ï¼Œä¹Ÿå¯èƒ½æ˜¯çº¢é»‘æ ‘æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚<br>è¦æ³¨æ„çš„æ˜¯åªæ»¡è¶³equlasç›¸ç­‰å¹¶ä¸èƒ½æœ‰æ•ˆå–å‡ºå…ƒç´ ï¼Œè¿˜å¿…é¡»æ»¡è¶³å“ˆå¸Œå€¼ç›¸ç­‰ï¼Œæ‰€ä»¥è¦è€ƒè™‘é‡å†™keyçš„hashCode()æ–¹æ³•ã€‚<br><!-- end --></p><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font><p>éƒ¨åˆ†å†…å®¹å‚è€ƒï¼š<br><a href="https://www.jianshu.com/p/df4a907ef4ef" target="_blank" rel="noopener">https://www.jianshu.com/p/df4a907ef4ef</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç½‘ä¸Šæœ‰å¾ˆå¤šå¯¹HashMapï¼ŒHashTableå‡ ä¸ªé›†åˆç±»çš„å¯¹æ¯”ä¸è§£è¯´,çœ‹äº†ä¸‹æºç ï¼Œè®°ä¸‹ç¬”è®°~&lt;/p&gt;
    
    </summary>
    
      <category term="é›†åˆ" scheme="http://tigutf.github.io/categories/%E9%9B%86%E5%90%88/"/>
    
      <category term="HashMap" scheme="http://tigutf.github.io/categories/%E9%9B%86%E5%90%88/HashMap/"/>
    
    
      <category term="Java|Map|é›†åˆ" scheme="http://tigutf.github.io/tags/Java-Map-%E9%9B%86%E5%90%88/"/>
    
  </entry>
  
  <entry>
    <title>è¯»è¯»HashMap(1)</title>
    <link href="http://tigutf.github.io/2017/10/05/%E8%AF%BB%E8%AF%BBHashMap/"/>
    <id>http://tigutf.github.io/2017/10/05/è¯»è¯»HashMap/</id>
    <published>2017-10-05T14:22:48.000Z</published>
    <updated>2019-01-27T17:20:02.524Z</updated>
    
    <content type="html"><![CDATA[<p>ç½‘ä¸Šæœ‰å¾ˆå¤šå¯¹HashMapï¼ŒHashTableå‡ ä¸ªé›†åˆç±»çš„å¯¹æ¯”ä¸è§£è¯´,çœ‹äº†ä¸‹æºç ï¼Œè®°ä¸‹ç¬”è®°~</p><a id="more"></a><p>æ–‡ç« éƒ¨åˆ†å‚è€ƒå¦‚ä¸‹ï¼š</p><ol><li><a href="http://www.cnblogs.com/skywang12345/p/3310835.html" target="_blank" rel="noopener">http://www.cnblogs.com/skywang12345/p/3310835.html</a></li><li><a href="https://www.cnblogs.com/chengxiao/p/6059914.html" target="_blank" rel="noopener">https://www.cnblogs.com/chengxiao/p/6059914.html</a></li></ol><h1 id="HashMapåŸºç¡€ç»“æ„"><a href="#HashMapåŸºç¡€ç»“æ„" class="headerlink" title="HashMapåŸºç¡€ç»“æ„"></a>HashMapåŸºç¡€ç»“æ„</h1><h2 id="HashMapçš„åŸºç¡€å±æ€§"><a href="#HashMapçš„åŸºç¡€å±æ€§" class="headerlink" title="HashMapçš„åŸºç¡€å±æ€§"></a>HashMapçš„åŸºç¡€å±æ€§</h2><p>HashMap æ˜¯ä¸€ä¸ªæ•£åˆ—è¡¨ï¼Œå®ƒå­˜å‚¨çš„å†…å®¹æ˜¯é”®å€¼å¯¹(key-value)æ˜ å°„ã€‚<br>HashMap ç»§æ‰¿äºAbstractMapï¼Œå®ç°äº†Mapã€Cloneableã€java.io.Serializableæ¥å£ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Cloneable</span>, <span class="title">Serializable</span> </span>&#123;</span><br></pre></td></tr></table></figure></p><p>HashMapåº•å±‚ç»´æŠ¤çš„æ˜¯æ•°ç»„+é“¾è¡¨(é“¾åœ°å€æ³•),å®ƒé‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°ï¼šâ€œåˆå§‹å®¹é‡â€ å’Œ â€œåŠ è½½å› å­â€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//é»˜è®¤çš„åˆå§‹åŒ–å¤§å°</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">4</span>; <span class="comment">// aka 16</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ€å¤§çš„å®¹é‡å€¼ï¼ŒhashMapçš„å®¹é‡å¤§å°å¿…é¡»æ˜¯2çš„næ¬¡å¹‚ï¼ˆ2^30ï¼‰</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAXIMUM_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è´Ÿè½½å› å­</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="number">0.75f</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * An empty table instance to share when the table is not inflated.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> Entry&lt;?,?&gt;[] EMPTY_TABLE = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The table, resized as necessary. Length MUST Always be a power of two.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE;</span><br></pre></td></tr></table></figure><ul><li>DEFAULT_INITIAL_CAPACITY å³åˆå§‹å®¹é‡ï¼ŒHashMapåˆ›å»ºæ—¶çš„åˆå§‹å®¹é‡:1&lt;&lt;4 è¡¨ç¤º äºŒè¿›åˆ¶çš„01ï¼Œå‘å·¦åç§»4ä½å¾—åˆ° 10000ï¼Œè½¬æ¢æˆåè¿›åˆ¶å³ä¸º16</li><li>DEFAULT_LOAD_FACTOR å³åŠ è½½å› å­ï¼Œæ˜¯å“ˆå¸Œè¡¨åœ¨å…¶å®¹é‡è‡ªåŠ¨å¢åŠ ä¹‹å‰å¯ä»¥è¾¾åˆ°å¤šæ»¡çš„ä¸€ç§å°ºåº¦ï¼Œé»˜è®¤ä¸º0.75ã€‚å½“å“ˆå¸Œè¡¨ä¸­çš„æ¡ç›®æ•°è¶…å‡ºäº†åŠ è½½å› å­ä¸å½“å‰å®¹é‡çš„ä¹˜ç§¯æ—¶ï¼Œåˆ™è¦å¯¹è¯¥å“ˆå¸Œè¡¨è¿›è¡Œ rehash æ“ä½œï¼ˆå³é‡å»ºå†…éƒ¨æ•°æ®ç»“æ„ï¼‰ï¼Œä»è€Œå“ˆå¸Œè¡¨å°†å…·æœ‰å¤§çº¦ä¸¤å€çš„æ¡¶æ•°ã€‚</li><li>HashMapçš„ä¸»å¹²æ˜¯ä¸€ä¸ªEntryæ•°ç»„ã€‚Entryæ˜¯HashMapçš„åŸºæœ¬ç»„æˆå•å…ƒï¼Œæ¯ä¸€ä¸ªEntryåŒ…å«ä¸€ä¸ªkey-valueé”®å€¼å¯¹ã€‚å½“å‘ç”Ÿå“ˆå¸Œç¢°æ’æ—¶ï¼ˆä¸¤ä¸ªå€¼è®¡ç®—å¾—åˆ°çš„å“ˆå¸Œå€¼ç›¸åŒï¼‰ï¼Œåˆ™å­˜å‚¨åˆ°å¯¹åº”ä¸‹æ ‡çš„æ•°ç»„æ ¼å­çš„é“¾è¡¨é‡Œã€‚<font color="#aa5500"><br>ï¼ˆå“ˆå¸Œå†²çªçš„è§£å†³æ–¹æ¡ˆæœ‰å¤šç§:å¼€æ”¾å®šå€æ³•ï¼ˆå‘ç”Ÿå†²çªï¼Œç»§ç»­å¯»æ‰¾ä¸‹ä¸€å—æœªè¢«å ç”¨çš„å­˜å‚¨åœ°å€ï¼‰ï¼Œå†æ•£åˆ—å‡½æ•°æ³•ï¼Œé“¾åœ°å€æ³•ï¼Œè€ŒHashMapå³æ˜¯é‡‡ç”¨äº†é“¾åœ°å€æ³•ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„+é“¾è¡¨çš„æ–¹å¼ï¼Œï¼‰<br></font></li></ul><p><img src="1543336152x2890174124.jpg" alt="å›¾ç‰‡å¤±æ•ˆ"></p><h2 id="HashMapçš„æ„é€ å‡½æ•°"><a href="#HashMapçš„æ„é€ å‡½æ•°" class="headerlink" title="HashMapçš„æ„é€ å‡½æ•°"></a>HashMapçš„æ„é€ å‡½æ•°</h2><ul><li>HashMapæœ‰4ç§æ„é€ å‡½æ•°</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»¥é»˜è®¤çš„åˆå§‹åŒ–å¤§å°16å’Œè´Ÿè½½å› å­0.75ï¼Œæ„é€ å¯¹è±¡</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the default initial capacity</span></span><br><span class="line"><span class="comment"> * (16) and the default load factor (0.75).</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="comment">// all other fields defaulted</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šåˆå§‹åŒ–å¤§å°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(initialCapacity, DEFAULT_LOAD_FACTOR);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šå®¹é‡å¤§å°å’Œè´Ÿè½½å› å­</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(<span class="keyword">int</span> initialCapacity, <span class="keyword">float</span> loadFactor)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal initial capacity: "</span> +</span><br><span class="line">                                           initialCapacity);</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &gt; MAXIMUM_CAPACITY)</span><br><span class="line">        initialCapacity = MAXIMUM_CAPACITY;</span><br><span class="line">    <span class="keyword">if</span> (loadFactor &lt;= <span class="number">0</span> || Float.isNaN(loadFactor))</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"Illegal load factor: "</span> +</span><br><span class="line">                                           loadFactor);</span><br><span class="line">    <span class="keyword">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="keyword">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æŒ‡å®šmap</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HashMap</span><span class="params">(Map&lt;? extends K, ? extends V&gt; m)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR;</span><br><span class="line">    putMapEntries(m, <span class="keyword">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å‰ä¸‰ç§æ„é€ å™¨å½“ä¸­ï¼Œæ²¡æœ‰ä¸ºæ•°ç»„Entry<k,v> tableåˆ†é…å†…å­˜ç©ºé—´ï¼Œè€Œæ˜¯åœ¨æ‰§è¡Œputæ“ä½œçš„æ—¶å€™æ‰çœŸæ­£æ„å»ºtableæ•°ç»„ï¼›è€Œç¬¬å››ç§ï¼ŒæŒ‡å®šäº†Mapï¼Œæ„é€ å™¨ä¸­è°ƒç”¨putMapEntries(m, false);åˆ™ä¼šæ„å»ºtableæ•°ç»„ã€‚</k,v></p><h2 id="HashMap-åŸç†"><a href="#HashMap-åŸç†" class="headerlink" title="HashMap åŸç†"></a>HashMap åŸç†</h2><p>åŸºäºJava1.6ï¼Œåœ¨ä¸Šé¢çš„åŸºç¡€ä¿¡æ¯ä¸­æˆ‘ä»¬å·²ç»äº†è§£HashMapçš„ç»“æ„ï¼Œæ•°ç»„æ˜¯HashMapçš„ä¸»ä½“ï¼Œé“¾è¡¨åˆ™æ˜¯ä¸»è¦ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªè€Œå­˜åœ¨çš„.</p><ol><li>å¦‚æœè®¡ç®—å®šä½åˆ°çš„æ•°ç»„ä½ç½®ä¸å«é“¾è¡¨ï¼ˆå½“å‰entryçš„nextæŒ‡å‘nullï¼‰ï¼Œé‚£ä¹ˆå¯¹äºæŸ¥æ‰¾ã€æ·»åŠ æ“ä½œå¾ˆå¿«ï¼Œä»…éœ€ä¸€æ¬¡å¯»å€å³å¯ï¼Œæ—¶é—´å¤æ‚åº¦O(1);</li><li>å¦‚æœå®šä½åˆ°çš„ä½ç½®åŒ…å«é“¾è¡¨ï¼Œå¯¹äºæ·»åŠ æ“ä½œï¼Œé¦–å…ˆéå†é“¾è¡¨ï¼Œå­˜åœ¨åˆ™è¦†ç›–ï¼Œå¦åˆ™æ–°å¢ï¼Œå…¶æ—¶é—´å¤æ‚åº¦O(n);å¯¹äºæŸ¥æ‰¾æ“ä½œï¼Œä»éœ€éå†é“¾è¡¨ï¼Œé€ä¸€å¯¹æ¯”keyå¯¹è±¡æŸ¥æ‰¾ï¼›</li></ol><p>æ‰€ä»¥ï¼Œä»æ€§èƒ½è€ƒè™‘ï¼ŒHashMapä¸­çš„é“¾è¡¨å‡ºç°è¶Šå°‘ï¼Œæ€§èƒ½æ‰ä¼šè¶Šå¥½ã€‚<br><!-- end --></p><font color="blue" face="æ¥·ä½“"><br>å¥½å¥½å­¦ä¹ å¤©å¤©å‘ä¸Š-åˆ†äº«ã€äº¤æµã€å…±åŒè¿›æ­¥~<br></font>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç½‘ä¸Šæœ‰å¾ˆå¤šå¯¹HashMapï¼ŒHashTableå‡ ä¸ªé›†åˆç±»çš„å¯¹æ¯”ä¸è§£è¯´,çœ‹äº†ä¸‹æºç ï¼Œè®°ä¸‹ç¬”è®°~&lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="http://tigutf.github.io/categories/Java/"/>
    
    
      <category term="Java | Map | é›†åˆ" scheme="http://tigutf.github.io/tags/Java-Map-%E9%9B%86%E5%90%88/"/>
    
  </entry>
  
</feed>
